(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();function jp(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var su={exports:{}},za={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function Vy(){if(Zg)return za;Zg=1;var m=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:m,type:s,key:c,ref:r!==void 0?r:null,props:l}}return za.Fragment=t,za.jsx=i,za.jsxs=i,za}var Wg;function Xy(){return Wg||(Wg=1,su.exports=Vy()),su.exports}var G=Xy(),au={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Yy(){if(Jg)return gt;Jg=1;var m=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,x={};function w(D,H,P){this.props=D,this.context=H,this.refs=x,this.updater=P||S}w.prototype.isReactComponent={},w.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},w.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function C(){}C.prototype=w.prototype;function T(D,H,P){this.props=D,this.context=H,this.refs=x,this.updater=P||S}var L=T.prototype=new C;L.constructor=T,_(L,w.prototype),L.isPureReactComponent=!0;var O=Array.isArray;function B(){}var z={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function K(D,H,P){var Q=P.ref;return{$$typeof:m,type:D,key:H,ref:Q!==void 0?Q:null,props:P}}function J(D,H){return K(D.type,H,D.props)}function Z(D){return typeof D=="object"&&D!==null&&D.$$typeof===m}function ht(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(P){return H[P]})}var wt=/\/+/g;function dt(D,H){return typeof D=="object"&&D!==null&&D.key!=null?ht(""+D.key):H.toString(36)}function Dt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(B,B):(D.status="pending",D.then(function(H){D.status==="pending"&&(D.status="fulfilled",D.value=H)},function(H){D.status==="pending"&&(D.status="rejected",D.reason=H)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function N(D,H,P,Q,et){var nt=typeof D;(nt==="undefined"||nt==="boolean")&&(D=null);var at=!1;if(D===null)at=!0;else switch(nt){case"bigint":case"string":case"number":at=!0;break;case"object":switch(D.$$typeof){case m:case t:at=!0;break;case p:return at=D._init,N(at(D._payload),H,P,Q,et)}}if(at)return et=et(D),at=Q===""?"."+dt(D,0):Q,O(et)?(P="",at!=null&&(P=at.replace(wt,"$&/")+"/"),N(et,H,P,"",function(Ut){return Ut})):et!=null&&(Z(et)&&(et=J(et,P+(et.key==null||D&&D.key===et.key?"":(""+et.key).replace(wt,"$&/")+"/")+at)),H.push(et)),1;at=0;var Bt=Q===""?".":Q+":";if(O(D))for(var ct=0;ct<D.length;ct++)Q=D[ct],nt=Bt+dt(Q,ct),at+=N(Q,H,P,nt,et);else if(ct=A(D),typeof ct=="function")for(D=ct.call(D),ct=0;!(Q=D.next()).done;)Q=Q.value,nt=Bt+dt(Q,ct++),at+=N(Q,H,P,nt,et);else if(nt==="object"){if(typeof D.then=="function")return N(Dt(D),H,P,Q,et);throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return at}function q(D,H,P){if(D==null)return D;var Q=[],et=0;return N(D,Q,"","",function(nt){return H.call(P,nt,et++)}),Q}function W(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(P){(D._status===0||D._status===-1)&&(D._status=1,D._result=P)},function(P){(D._status===0||D._status===-1)&&(D._status=2,D._result=P)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var ft=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},At={map:q,forEach:function(D,H,P){q(D,function(){H.apply(this,arguments)},P)},count:function(D){var H=0;return q(D,function(){H++}),H},toArray:function(D){return q(D,function(H){return H})||[]},only:function(D){if(!Z(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return gt.Activity=y,gt.Children=At,gt.Component=w,gt.Fragment=i,gt.Profiler=r,gt.PureComponent=T,gt.StrictMode=s,gt.Suspense=h,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,gt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return z.H.useMemoCache(D)}},gt.cache=function(D){return function(){return D.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(D,H,P){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Q=_({},D.props),et=D.key;if(H!=null)for(nt in H.key!==void 0&&(et=""+H.key),H)!$.call(H,nt)||nt==="key"||nt==="__self"||nt==="__source"||nt==="ref"&&H.ref===void 0||(Q[nt]=H[nt]);var nt=arguments.length-2;if(nt===1)Q.children=P;else if(1<nt){for(var at=Array(nt),Bt=0;Bt<nt;Bt++)at[Bt]=arguments[Bt+2];Q.children=at}return K(D.type,et,Q)},gt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},gt.createElement=function(D,H,P){var Q,et={},nt=null;if(H!=null)for(Q in H.key!==void 0&&(nt=""+H.key),H)$.call(H,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(et[Q]=H[Q]);var at=arguments.length-2;if(at===1)et.children=P;else if(1<at){for(var Bt=Array(at),ct=0;ct<at;ct++)Bt[ct]=arguments[ct+2];et.children=Bt}if(D&&D.defaultProps)for(Q in at=D.defaultProps,at)et[Q]===void 0&&(et[Q]=at[Q]);return K(D,nt,et)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(D){return{$$typeof:u,render:D}},gt.isValidElement=Z,gt.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:W}},gt.memo=function(D,H){return{$$typeof:f,type:D,compare:H===void 0?null:H}},gt.startTransition=function(D){var H=z.T,P={};z.T=P;try{var Q=D(),et=z.S;et!==null&&et(P,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(B,ft)}catch(nt){ft(nt)}finally{H!==null&&P.types!==null&&(H.types=P.types),z.T=H}},gt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},gt.use=function(D){return z.H.use(D)},gt.useActionState=function(D,H,P){return z.H.useActionState(D,H,P)},gt.useCallback=function(D,H){return z.H.useCallback(D,H)},gt.useContext=function(D){return z.H.useContext(D)},gt.useDebugValue=function(){},gt.useDeferredValue=function(D,H){return z.H.useDeferredValue(D,H)},gt.useEffect=function(D,H){return z.H.useEffect(D,H)},gt.useEffectEvent=function(D){return z.H.useEffectEvent(D)},gt.useId=function(){return z.H.useId()},gt.useImperativeHandle=function(D,H,P){return z.H.useImperativeHandle(D,H,P)},gt.useInsertionEffect=function(D,H){return z.H.useInsertionEffect(D,H)},gt.useLayoutEffect=function(D,H){return z.H.useLayoutEffect(D,H)},gt.useMemo=function(D,H){return z.H.useMemo(D,H)},gt.useOptimistic=function(D,H){return z.H.useOptimistic(D,H)},gt.useReducer=function(D,H,P){return z.H.useReducer(D,H,P)},gt.useRef=function(D){return z.H.useRef(D)},gt.useState=function(D){return z.H.useState(D)},gt.useSyncExternalStore=function(D,H,P){return z.H.useSyncExternalStore(D,H,P)},gt.useTransition=function(){return z.H.useTransition()},gt.version="19.2.3",gt}var tp;function ku(){return tp||(tp=1,au.exports=Yy()),au.exports}var Zt=ku();const $y=jp(Zt);var ru={exports:{}},Pa={},ou={exports:{}},lu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function Ky(){return ep||(ep=1,(function(m){function t(N,q){var W=N.length;N.push(q);t:for(;0<W;){var ft=W-1>>>1,At=N[ft];if(0<r(At,q))N[ft]=q,N[W]=At,W=ft;else break t}}function i(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var q=N[0],W=N.pop();if(W!==q){N[0]=W;t:for(var ft=0,At=N.length,D=At>>>1;ft<D;){var H=2*(ft+1)-1,P=N[H],Q=H+1,et=N[Q];if(0>r(P,W))Q<At&&0>r(et,P)?(N[ft]=et,N[Q]=W,ft=Q):(N[ft]=P,N[H]=W,ft=H);else if(Q<At&&0>r(et,W))N[ft]=et,N[Q]=W,ft=Q;else break t}}return q}function r(N,q){var W=N.sortIndex-q.sortIndex;return W!==0?W:N.id-q.id}if(m.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;m.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();m.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,y=null,b=3,A=!1,S=!1,_=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function L(N){for(var q=i(f);q!==null;){if(q.callback===null)s(f);else if(q.startTime<=N)s(f),q.sortIndex=q.expirationTime,t(h,q);else break;q=i(f)}}function O(N){if(_=!1,L(N),!S)if(i(h)!==null)S=!0,B||(B=!0,ht());else{var q=i(f);q!==null&&Dt(O,q.startTime-N)}}var B=!1,z=-1,$=5,K=-1;function J(){return x?!0:!(m.unstable_now()-K<$)}function Z(){if(x=!1,B){var N=m.unstable_now();K=N;var q=!0;try{t:{S=!1,_&&(_=!1,C(z),z=-1),A=!0;var W=b;try{e:{for(L(N),y=i(h);y!==null&&!(y.expirationTime>N&&J());){var ft=y.callback;if(typeof ft=="function"){y.callback=null,b=y.priorityLevel;var At=ft(y.expirationTime<=N);if(N=m.unstable_now(),typeof At=="function"){y.callback=At,L(N),q=!0;break e}y===i(h)&&s(h),L(N)}else s(h);y=i(h)}if(y!==null)q=!0;else{var D=i(f);D!==null&&Dt(O,D.startTime-N),q=!1}}break t}finally{y=null,b=W,A=!1}q=void 0}}finally{q?ht():B=!1}}}var ht;if(typeof T=="function")ht=function(){T(Z)};else if(typeof MessageChannel<"u"){var wt=new MessageChannel,dt=wt.port2;wt.port1.onmessage=Z,ht=function(){dt.postMessage(null)}}else ht=function(){w(Z,0)};function Dt(N,q){z=w(function(){N(m.unstable_now())},q)}m.unstable_IdlePriority=5,m.unstable_ImmediatePriority=1,m.unstable_LowPriority=4,m.unstable_NormalPriority=3,m.unstable_Profiling=null,m.unstable_UserBlockingPriority=2,m.unstable_cancelCallback=function(N){N.callback=null},m.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<N?Math.floor(1e3/N):5},m.unstable_getCurrentPriorityLevel=function(){return b},m.unstable_next=function(N){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var W=b;b=q;try{return N()}finally{b=W}},m.unstable_requestPaint=function(){x=!0},m.unstable_runWithPriority=function(N,q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=b;b=N;try{return q()}finally{b=W}},m.unstable_scheduleCallback=function(N,q,W){var ft=m.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ft+W:ft):W=ft,N){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=W+At,N={id:p++,callback:q,priorityLevel:N,startTime:W,expirationTime:At,sortIndex:-1},W>ft?(N.sortIndex=W,t(f,N),i(h)===null&&N===i(f)&&(_?(C(z),z=-1):_=!0,Dt(O,W-ft))):(N.sortIndex=At,t(h,N),S||A||(S=!0,B||(B=!0,ht()))),N},m.unstable_shouldYield=J,m.unstable_wrapCallback=function(N){var q=b;return function(){var W=b;b=q;try{return N.apply(this,arguments)}finally{b=W}}}})(lu)),lu}var ip;function Qy(){return ip||(ip=1,ou.exports=Ky()),ou.exports}var cu={exports:{}},Ce={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np;function Zy(){if(np)return Ce;np=1;var m=ku();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var c=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ce.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(h,f,null,p)},Ce.flushSync=function(h){var f=c.T,p=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=f,s.p=p,s.d.f()}},Ce.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},Ce.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},Ce.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):p==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ce.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},Ce.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);s.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ce.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},Ce.requestFormReset=function(h){s.d.r(h)},Ce.unstable_batchedUpdates=function(h,f){return h(f)},Ce.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},Ce.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ce.version="19.2.3",Ce}var sp;function Wy(){if(sp)return cu.exports;sp=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(t){console.error(t)}}return m(),cu.exports=Zy(),cu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function Jy(){if(ap)return Pa;ap=1;var m=Qy(),t=ku(),i=Wy();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return h(d),e;if(g===o)return h(d),n;g=g.sibling}throw Error(s(188))}if(a.return!==o.return)a=d,o=g;else{for(var v=!1,E=d.child;E;){if(E===a){v=!0,a=d,o=g;break}if(E===o){v=!0,o=d,a=g;break}E=E.sibling}if(!v){for(E=g.child;E;){if(E===a){v=!0,a=g,o=d;break}if(E===o){v=!0,o=g,a=d;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ht(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var wt=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===wt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case T:return e.displayName||"Context";case C:return(e._context.displayName||"Context")+".Consumer";case L:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return n=e.displayName||null,n!==null?n:dt(e.type)||"Memo";case $:n=e._payload,e=e._init;try{return dt(e(n))}catch{}}return null}var Dt=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ft=[],At=-1;function D(e){return{current:e}}function H(e){0>At||(e.current=ft[At],ft[At]=null,At--)}function P(e,n){At++,ft[At]=e.current,e.current=n}var Q=D(null),et=D(null),nt=D(null),at=D(null);function Bt(e,n){switch(P(nt,n),P(et,e),P(Q,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ag(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ag(n),e=Sg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(Q),P(Q,e)}function ct(){H(Q),H(et),H(nt)}function Ut(e){e.memoizedState!==null&&P(at,e);var n=Q.current,a=Sg(n,e.type);n!==a&&(P(et,e),P(Q,a))}function bi(e){et.current===e&&(H(Q),H(et)),at.current===e&&(H(at),Na._currentValue=W)}var Mi,Ki;function Xt(e){if(Mi===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Mi=n&&n[1]||"",Ki=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mi+e+Ki}var Ie=!1;function ti(e,n){if(!e||Ie)return"";Ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(j){var I=j}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(j){I=j}e.call(Y.prototype)}}else{try{throw Error()}catch(j){I=j}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(j){if(j&&I&&typeof j.stack=="string")return[j.stack,I.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),v=g[0],E=g[1];if(v&&E){var M=v.split(`
`),U=E.split(`
`);for(d=o=0;o<M.length&&!M[o].includes("DetermineComponentFrameRoot");)o++;for(;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;if(o===M.length||d===U.length)for(o=M.length-1,d=U.length-1;1<=o&&0<=d&&M[o]!==U[d];)d--;for(;1<=o&&0<=d;o--,d--)if(M[o]!==U[d]){if(o!==1||d!==1)do if(o--,d--,0>d||M[o]!==U[d]){var V=`
`+M[o].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=o&&0<=d);break}}}finally{Ie=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Xt(a):""}function jo(e,n){switch(e.tag){case 26:case 27:case 5:return Xt(e.type);case 16:return Xt("Lazy");case 13:return e.child!==n&&n!==null?Xt("Suspense Fallback"):Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return ti(e.type,!1);case 11:return ti(e.type.render,!1);case 1:return ti(e.type,!0);case 31:return Xt("Activity");default:return""}}function Qu(e){try{var n="",a=null;do n+=jo(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Go=Object.prototype.hasOwnProperty,qo=m.unstable_scheduleCallback,Vo=m.unstable_cancelCallback,wm=m.unstable_shouldYield,Em=m.unstable_requestPaint,He=m.unstable_now,xm=m.unstable_getCurrentPriorityLevel,Zu=m.unstable_ImmediatePriority,Wu=m.unstable_UserBlockingPriority,sr=m.unstable_NormalPriority,Tm=m.unstable_LowPriority,Ju=m.unstable_IdlePriority,Cm=m.log,Mm=m.unstable_setDisableYieldValue,qs=null,je=null;function Qi(e){if(typeof Cm=="function"&&Mm(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(qs,e)}catch{}}var Ge=Math.clz32?Math.clz32:Om,Dm=Math.log,Rm=Math.LN2;function Om(e){return e>>>=0,e===0?32:31-(Dm(e)/Rm|0)|0}var ar=256,rr=262144,or=4194304;function xn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function lr(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var d=0,g=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~g,o!==0?d=xn(o):(v&=E,v!==0?d=xn(v):a||(a=E&~e,a!==0&&(d=xn(a))))):(E=o&~g,E!==0?d=xn(E):v!==0?d=xn(v):a||(a=o&~e,a!==0&&(d=xn(a)))),d===0?0:n!==0&&n!==d&&(n&g)===0&&(g=d&-d,a=n&-n,g>=a||g===32&&(a&4194048)!==0)?n:d}function Vs(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Nm(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function th(){var e=or;return or<<=1,(or&62914560)===0&&(or=4194304),e}function Xo(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Xs(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lm(e,n,a,o,d,g){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,M=e.expirationTimes,U=e.hiddenUpdates;for(a=v&~a;0<a;){var V=31-Ge(a),Y=1<<V;E[V]=0,M[V]=-1;var I=U[V];if(I!==null)for(U[V]=null,V=0;V<I.length;V++){var j=I[V];j!==null&&(j.lane&=-536870913)}a&=~Y}o!==0&&eh(e,o,0),g!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=g&~(v&~n))}function eh(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ge(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function ih(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Ge(a),d=1<<o;d&n|e[o]&n&&(e[o]|=n),a&=~d}}function nh(e,n){var a=n&-n;return a=(a&42)!==0?1:Yo(a),(a&(e.suspendedLanes|n))!==0?0:a}function Yo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $o(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function sh(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:qg(e.type))}function ah(e,n){var a=q.p;try{return q.p=e,n()}finally{q.p=a}}var Zi=Math.random().toString(36).slice(2),ve="__reactFiber$"+Zi,Oe="__reactProps$"+Zi,$n="__reactContainer$"+Zi,Ko="__reactEvents$"+Zi,km="__reactListeners$"+Zi,Bm="__reactHandles$"+Zi,rh="__reactResources$"+Zi,Ys="__reactMarker$"+Zi;function Qo(e){delete e[ve],delete e[Oe],delete e[Ko],delete e[km],delete e[Bm]}function Kn(e){var n=e[ve];if(n)return n;for(var a=e.parentNode;a;){if(n=a[$n]||a[ve]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Mg(e);e!==null;){if(a=e[ve])return a;e=Mg(e)}return n}e=a,a=e.parentNode}return null}function Qn(e){if(e=e[ve]||e[$n]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function $s(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Zn(e){var n=e[rh];return n||(n=e[rh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function pe(e){e[Ys]=!0}var oh=new Set,lh={};function Tn(e,n){Wn(e,n),Wn(e+"Capture",n)}function Wn(e,n){for(lh[e]=n,e=0;e<n.length;e++)oh.add(n[e])}var zm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ch={},uh={};function Pm(e){return Go.call(uh,e)?!0:Go.call(ch,e)?!1:zm.test(e)?uh[e]=!0:(ch[e]=!0,!1)}function cr(e,n,a){if(Pm(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function ur(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Di(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function ei(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Fm(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,g=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,g.call(this,v)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Zo(e){if(!e._valueTracker){var n=hh(e)?"checked":"value";e._valueTracker=Fm(e,n,""+e[n])}}function dh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=hh(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function hr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Um=/[\n"\\]/g;function ii(e){return e.replace(Um,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Wo(e,n,a,o,d,g,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ei(n)):e.value!==""+ei(n)&&(e.value=""+ei(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?Jo(e,v,ei(n)):a!=null?Jo(e,v,ei(a)):o!=null&&e.removeAttribute("value"),d==null&&g!=null&&(e.defaultChecked=!!g),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+ei(E):e.removeAttribute("name")}function fh(e,n,a,o,d,g,v,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){Zo(e);return}a=a!=null?""+ei(a):"",n=n!=null?""+ei(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Zo(e)}function Jo(e,n,a){n==="number"&&hr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Jn(e,n,a,o){if(e=e.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=n.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&o&&(e[a].defaultSelected=!0)}else{for(a=""+ei(a),n=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function gh(e,n,a){if(n!=null&&(n=""+ei(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ei(a):""}function ph(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(Dt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=ei(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Zo(e)}function ts(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Im=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mh(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Im.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function yh(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&a[d]!==o&&mh(e,d,o)}else for(var g in n)n.hasOwnProperty(g)&&mh(e,g,n[g])}function tl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(e){return jm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ri(){}var el=null;function il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var es=null,is=null;function bh(e){var n=Qn(e);if(n&&(e=n.stateNode)){var a=e[Oe]||null;t:switch(e=n.stateNode,n.type){case"input":if(Wo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ii(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var d=o[Oe]||null;if(!d)throw Error(s(90));Wo(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&dh(o)}break t;case"textarea":gh(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Jn(e,!!a.multiple,n,!1)}}}var nl=!1;function vh(e,n,a){if(nl)return e(n,a);nl=!0;try{var o=e(n);return o}finally{if(nl=!1,(es!==null||is!==null)&&(Jr(),es&&(n=es,e=is,is=es=null,bh(n),e)))for(n=0;n<e.length;n++)bh(e[n])}}function Ks(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Oe]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sl=!1;if(Oi)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){sl=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{sl=!1}var Wi=null,al=null,fr=null;function Ah(){if(fr)return fr;var e,n=al,a=n.length,o,d="value"in Wi?Wi.value:Wi.textContent,g=d.length;for(e=0;e<a&&n[e]===d[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===d[g-o];o++);return fr=d.slice(e,1<o?1-o:void 0)}function gr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function pr(){return!0}function Sh(){return!1}function Ne(e){function n(a,o,d,g,v){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pr:Sh,this.isPropagationStopped=Sh,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),n}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mr=Ne(Cn),Zs=y({},Cn,{view:0,detail:0}),Gm=Ne(Zs),rl,ol,Ws,yr=y({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ws&&(Ws&&e.type==="mousemove"?(rl=e.screenX-Ws.screenX,ol=e.screenY-Ws.screenY):ol=rl=0,Ws=e),rl)},movementY:function(e){return"movementY"in e?e.movementY:ol}}),_h=Ne(yr),qm=y({},yr,{dataTransfer:0}),Vm=Ne(qm),Xm=y({},Zs,{relatedTarget:0}),ll=Ne(Xm),Ym=y({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),$m=Ne(Ym),Km=y({},Cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qm=Ne(Km),Zm=y({},Cn,{data:0}),wh=Ne(Zm),Wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=t0[e])?!!n[e]:!1}function cl(){return e0}var i0=y({},Zs,{key:function(e){if(e.key){var n=Wm[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=gr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(e){return e.type==="keypress"?gr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),n0=Ne(i0),s0=y({},yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eh=Ne(s0),a0=y({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),r0=Ne(a0),o0=y({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),l0=Ne(o0),c0=y({},yr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=Ne(c0),h0=y({},Cn,{newState:0,oldState:0}),d0=Ne(h0),f0=[9,13,27,32],ul=Oi&&"CompositionEvent"in window,Js=null;Oi&&"documentMode"in document&&(Js=document.documentMode);var g0=Oi&&"TextEvent"in window&&!Js,xh=Oi&&(!ul||Js&&8<Js&&11>=Js),Th=" ",Ch=!1;function Mh(e,n){switch(e){case"keyup":return f0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function p0(e,n){switch(e){case"compositionend":return Dh(n);case"keypress":return n.which!==32?null:(Ch=!0,Th);case"textInput":return e=n.data,e===Th&&Ch?null:e;default:return null}}function m0(e,n){if(ns)return e==="compositionend"||!ul&&Mh(e,n)?(e=Ah(),fr=al=Wi=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return xh&&n.locale!=="ko"?null:n.data;default:return null}}var y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!y0[e.type]:n==="textarea"}function Oh(e,n,a,o){es?is?is.push(o):is=[o]:es=o,n=ro(n,"onChange"),0<n.length&&(a=new mr("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var ta=null,ea=null;function b0(e){gg(e,0)}function br(e){var n=$s(e);if(dh(n))return e}function Nh(e,n){if(e==="change")return n}var Lh=!1;if(Oi){var hl;if(Oi){var dl="oninput"in document;if(!dl){var kh=document.createElement("div");kh.setAttribute("oninput","return;"),dl=typeof kh.oninput=="function"}hl=dl}else hl=!1;Lh=hl&&(!document.documentMode||9<document.documentMode)}function Bh(){ta&&(ta.detachEvent("onpropertychange",zh),ea=ta=null)}function zh(e){if(e.propertyName==="value"&&br(ea)){var n=[];Oh(n,ea,e,il(e)),vh(b0,n)}}function v0(e,n,a){e==="focusin"?(Bh(),ta=n,ea=a,ta.attachEvent("onpropertychange",zh)):e==="focusout"&&Bh()}function A0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return br(ea)}function S0(e,n){if(e==="click")return br(n)}function _0(e,n){if(e==="input"||e==="change")return br(n)}function w0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var qe=typeof Object.is=="function"?Object.is:w0;function ia(e,n){if(qe(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!Go.call(n,d)||!qe(e[d],n[d]))return!1}return!0}function Ph(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fh(e,n){var a=Ph(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ph(a)}}function Uh(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Uh(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Ih(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=hr(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=hr(e.document)}return n}function fl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var E0=Oi&&"documentMode"in document&&11>=document.documentMode,ss=null,gl=null,na=null,pl=!1;function Hh(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pl||ss==null||ss!==hr(o)||(o=ss,"selectionStart"in o&&fl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),na&&ia(na,o)||(na=o,o=ro(gl,"onSelect"),0<o.length&&(n=new mr("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=ss)))}function Mn(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var as={animationend:Mn("Animation","AnimationEnd"),animationiteration:Mn("Animation","AnimationIteration"),animationstart:Mn("Animation","AnimationStart"),transitionrun:Mn("Transition","TransitionRun"),transitionstart:Mn("Transition","TransitionStart"),transitioncancel:Mn("Transition","TransitionCancel"),transitionend:Mn("Transition","TransitionEnd")},ml={},jh={};Oi&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Dn(e){if(ml[e])return ml[e];if(!as[e])return e;var n=as[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in jh)return ml[e]=n[a];return e}var Gh=Dn("animationend"),qh=Dn("animationiteration"),Vh=Dn("animationstart"),x0=Dn("transitionrun"),T0=Dn("transitionstart"),C0=Dn("transitioncancel"),Xh=Dn("transitionend"),Yh=new Map,yl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yl.push("scrollEnd");function pi(e,n){Yh.set(e,n),Tn(n,[e])}var vr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ni=[],rs=0,bl=0;function Ar(){for(var e=rs,n=bl=rs=0;n<e;){var a=ni[n];ni[n++]=null;var o=ni[n];ni[n++]=null;var d=ni[n];ni[n++]=null;var g=ni[n];if(ni[n++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}g!==0&&$h(a,d,g)}}function Sr(e,n,a,o){ni[rs++]=e,ni[rs++]=n,ni[rs++]=a,ni[rs++]=o,bl|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function vl(e,n,a,o){return Sr(e,n,a,o),_r(e)}function Rn(e,n){return Sr(e,null,null,n),_r(e)}function $h(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var d=!1,g=e.return;g!==null;)g.childLanes|=a,o=g.alternate,o!==null&&(o.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(d=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,d&&n!==null&&(d=31-Ge(a),e=g.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=a|536870912),g):null}function _r(e){if(50<xa)throw xa=0,Mc=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var os={};function M0(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,n,a,o){return new M0(e,n,a,o)}function Al(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ni(e,n){var a=e.alternate;return a===null?(a=Ve(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Kh(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function wr(e,n,a,o,d,g){var v=0;if(o=e,typeof e=="function")Al(e)&&(v=1);else if(typeof e=="string")v=Ly(e,a,Q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case K:return e=Ve(31,a,n,d),e.elementType=K,e.lanes=g,e;case _:return On(a.children,d,g,n);case x:v=8,d|=24;break;case w:return e=Ve(12,a,n,d|2),e.elementType=w,e.lanes=g,e;case O:return e=Ve(13,a,n,d),e.elementType=O,e.lanes=g,e;case B:return e=Ve(19,a,n,d),e.elementType=B,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case T:v=10;break t;case C:v=9;break t;case L:v=11;break t;case z:v=14;break t;case $:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=Ve(v,a,n,d),n.elementType=e,n.type=o,n.lanes=g,n}function On(e,n,a,o){return e=Ve(7,e,o,n),e.lanes=a,e}function Sl(e,n,a){return e=Ve(6,e,null,n),e.lanes=a,e}function Qh(e){var n=Ve(18,null,null,0);return n.stateNode=e,n}function _l(e,n,a){return n=Ve(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Zh=new WeakMap;function si(e,n){if(typeof e=="object"&&e!==null){var a=Zh.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Qu(n)},Zh.set(e,n),n)}return{value:e,source:n,stack:Qu(n)}}var ls=[],cs=0,Er=null,sa=0,ai=[],ri=0,Ji=null,vi=1,Ai="";function Li(e,n){ls[cs++]=sa,ls[cs++]=Er,Er=e,sa=n}function Wh(e,n,a){ai[ri++]=vi,ai[ri++]=Ai,ai[ri++]=Ji,Ji=e;var o=vi;e=Ai;var d=32-Ge(o)-1;o&=~(1<<d),a+=1;var g=32-Ge(n)+d;if(30<g){var v=d-d%5;g=(o&(1<<v)-1).toString(32),o>>=v,d-=v,vi=1<<32-Ge(n)+d|a<<d|o,Ai=g+e}else vi=1<<g|a<<d|o,Ai=e}function wl(e){e.return!==null&&(Li(e,1),Wh(e,1,0))}function El(e){for(;e===Er;)Er=ls[--cs],ls[cs]=null,sa=ls[--cs],ls[cs]=null;for(;e===Ji;)Ji=ai[--ri],ai[ri]=null,Ai=ai[--ri],ai[ri]=null,vi=ai[--ri],ai[ri]=null}function Jh(e,n){ai[ri++]=vi,ai[ri++]=Ai,ai[ri++]=Ji,vi=n.id,Ai=n.overflow,Ji=e}var Ae=null,Yt=null,Tt=!1,tn=null,oi=!1,xl=Error(s(519));function en(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw aa(si(n,e)),xl}function td(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[ve]=e,n[Oe]=o,a){case"dialog":_t("cancel",n),_t("close",n);break;case"iframe":case"object":case"embed":_t("load",n);break;case"video":case"audio":for(a=0;a<Ca.length;a++)_t(Ca[a],n);break;case"source":_t("error",n);break;case"img":case"image":case"link":_t("error",n),_t("load",n);break;case"details":_t("toggle",n);break;case"input":_t("invalid",n),fh(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":_t("invalid",n);break;case"textarea":_t("invalid",n),ph(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||bg(n.textContent,a)?(o.popover!=null&&(_t("beforetoggle",n),_t("toggle",n)),o.onScroll!=null&&_t("scroll",n),o.onScrollEnd!=null&&_t("scrollend",n),o.onClick!=null&&(n.onclick=Ri),n=!0):n=!1,n||en(e,!0)}function ed(e){for(Ae=e.return;Ae;)switch(Ae.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:Ae=Ae.return}}function us(e){if(e!==Ae)return!1;if(!Tt)return ed(e),Tt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Gc(e.type,e.memoizedProps)),a=!a),a&&Yt&&en(e),ed(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Yt=Cg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Yt=Cg(e)}else n===27?(n=Yt,mn(e.type)?(e=$c,$c=null,Yt=e):Yt=n):Yt=Ae?ci(e.stateNode.nextSibling):null;return!0}function Nn(){Yt=Ae=null,Tt=!1}function Tl(){var e=tn;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),tn=null),e}function aa(e){tn===null?tn=[e]:tn.push(e)}var Cl=D(null),Ln=null,ki=null;function nn(e,n,a){P(Cl,n._currentValue),n._currentValue=a}function Bi(e){e._currentValue=Cl.current,H(Cl)}function Ml(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Dl(e,n,a,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var g=d.dependencies;if(g!==null){var v=d.child;g=g.firstContext;t:for(;g!==null;){var E=g;g=d;for(var M=0;M<n.length;M++)if(E.context===n[M]){g.lanes|=a,E=g.alternate,E!==null&&(E.lanes|=a),Ml(g.return,a,e),o||(v=null);break t}g=E.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(s(341));v.lanes|=a,g=v.alternate,g!==null&&(g.lanes|=a),Ml(v,a,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function hs(e,n,a,o){e=null;for(var d=n,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=d.type;qe(d.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(d===at.current){if(v=d.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Na):e=[Na])}d=d.return}e!==null&&Dl(n,e,a,o),n.flags|=262144}function xr(e){for(e=e.firstContext;e!==null;){if(!qe(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kn(e){Ln=e,ki=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return id(Ln,e)}function Tr(e,n){return Ln===null&&kn(e),id(e,n)}function id(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},ki===null){if(e===null)throw Error(s(308));ki=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ki=ki.next=n;return a}var D0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},R0=m.unstable_scheduleCallback,O0=m.unstable_NormalPriority,ae={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rl(){return{controller:new D0,data:new Map,refCount:0}}function ra(e){e.refCount--,e.refCount===0&&R0(O0,function(){e.controller.abort()})}var oa=null,Ol=0,ds=0,fs=null;function N0(e,n){if(oa===null){var a=oa=[];Ol=0,ds=kc(),fs={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ol++,n.then(nd,nd),n}function nd(){if(--Ol===0&&oa!==null){fs!==null&&(fs.status="fulfilled");var e=oa;oa=null,ds=0,fs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function L0(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<a.length;d++)(0,a[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var sd=N.S;N.S=function(e,n){jf=He(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&N0(e,n),sd!==null&&sd(e,n)};var Bn=D(null);function Nl(){var e=Bn.current;return e!==null?e:qt.pooledCache}function Cr(e,n){n===null?P(Bn,Bn.current):P(Bn,n.pool)}function ad(){var e=Nl();return e===null?null:{parent:ae._currentValue,pool:e}}var gs=Error(s(460)),Ll=Error(s(474)),Mr=Error(s(542)),Dr={then:function(){}};function rd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function od(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Ri,Ri),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cd(e),e;default:if(typeof n.status=="string")n.then(Ri,Ri);else{if(e=qt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cd(e),e}throw Pn=n,gs}}function zn(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Pn=a,gs):a}}var Pn=null;function ld(){if(Pn===null)throw Error(s(459));var e=Pn;return Pn=null,e}function cd(e){if(e===gs||e===Mr)throw Error(s(483))}var ps=null,la=0;function Rr(e){var n=la;return la+=1,ps===null&&(ps=[]),od(ps,e,n)}function ca(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Or(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ud(e){function n(k,R){if(e){var F=k.deletions;F===null?(k.deletions=[R],k.flags|=16):F.push(R)}}function a(k,R){if(!e)return null;for(;R!==null;)n(k,R),R=R.sibling;return null}function o(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function d(k,R){return k=Ni(k,R),k.index=0,k.sibling=null,k}function g(k,R,F){return k.index=F,e?(F=k.alternate,F!==null?(F=F.index,F<R?(k.flags|=67108866,R):F):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,R,F,X){return R===null||R.tag!==6?(R=Sl(F,k.mode,X),R.return=k,R):(R=d(R,F),R.return=k,R)}function M(k,R,F,X){var ot=F.type;return ot===_?V(k,R,F.props.children,X,F.key):R!==null&&(R.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===$&&zn(ot)===R.type)?(R=d(R,F.props),ca(R,F),R.return=k,R):(R=wr(F.type,F.key,F.props,null,k.mode,X),ca(R,F),R.return=k,R)}function U(k,R,F,X){return R===null||R.tag!==4||R.stateNode.containerInfo!==F.containerInfo||R.stateNode.implementation!==F.implementation?(R=_l(F,k.mode,X),R.return=k,R):(R=d(R,F.children||[]),R.return=k,R)}function V(k,R,F,X,ot){return R===null||R.tag!==7?(R=On(F,k.mode,X,ot),R.return=k,R):(R=d(R,F),R.return=k,R)}function Y(k,R,F){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Sl(""+R,k.mode,F),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case A:return F=wr(R.type,R.key,R.props,null,k.mode,F),ca(F,R),F.return=k,F;case S:return R=_l(R,k.mode,F),R.return=k,R;case $:return R=zn(R),Y(k,R,F)}if(Dt(R)||ht(R))return R=On(R,k.mode,F,null),R.return=k,R;if(typeof R.then=="function")return Y(k,Rr(R),F);if(R.$$typeof===T)return Y(k,Tr(k,R),F);Or(k,R)}return null}function I(k,R,F,X){var ot=R!==null?R.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ot!==null?null:E(k,R,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===ot?M(k,R,F,X):null;case S:return F.key===ot?U(k,R,F,X):null;case $:return F=zn(F),I(k,R,F,X)}if(Dt(F)||ht(F))return ot!==null?null:V(k,R,F,X,null);if(typeof F.then=="function")return I(k,R,Rr(F),X);if(F.$$typeof===T)return I(k,R,Tr(k,F),X);Or(k,F)}return null}function j(k,R,F,X,ot){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return k=k.get(F)||null,E(R,k,""+X,ot);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return k=k.get(X.key===null?F:X.key)||null,M(R,k,X,ot);case S:return k=k.get(X.key===null?F:X.key)||null,U(R,k,X,ot);case $:return X=zn(X),j(k,R,F,X,ot)}if(Dt(X)||ht(X))return k=k.get(F)||null,V(R,k,X,ot,null);if(typeof X.then=="function")return j(k,R,F,Rr(X),ot);if(X.$$typeof===T)return j(k,R,F,Tr(R,X),ot);Or(R,X)}return null}function st(k,R,F,X){for(var ot=null,Rt=null,rt=R,vt=R=0,xt=null;rt!==null&&vt<F.length;vt++){rt.index>vt?(xt=rt,rt=null):xt=rt.sibling;var Ot=I(k,rt,F[vt],X);if(Ot===null){rt===null&&(rt=xt);break}e&&rt&&Ot.alternate===null&&n(k,rt),R=g(Ot,R,vt),Rt===null?ot=Ot:Rt.sibling=Ot,Rt=Ot,rt=xt}if(vt===F.length)return a(k,rt),Tt&&Li(k,vt),ot;if(rt===null){for(;vt<F.length;vt++)rt=Y(k,F[vt],X),rt!==null&&(R=g(rt,R,vt),Rt===null?ot=rt:Rt.sibling=rt,Rt=rt);return Tt&&Li(k,vt),ot}for(rt=o(rt);vt<F.length;vt++)xt=j(rt,k,vt,F[vt],X),xt!==null&&(e&&xt.alternate!==null&&rt.delete(xt.key===null?vt:xt.key),R=g(xt,R,vt),Rt===null?ot=xt:Rt.sibling=xt,Rt=xt);return e&&rt.forEach(function(Sn){return n(k,Sn)}),Tt&&Li(k,vt),ot}function ut(k,R,F,X){if(F==null)throw Error(s(151));for(var ot=null,Rt=null,rt=R,vt=R=0,xt=null,Ot=F.next();rt!==null&&!Ot.done;vt++,Ot=F.next()){rt.index>vt?(xt=rt,rt=null):xt=rt.sibling;var Sn=I(k,rt,Ot.value,X);if(Sn===null){rt===null&&(rt=xt);break}e&&rt&&Sn.alternate===null&&n(k,rt),R=g(Sn,R,vt),Rt===null?ot=Sn:Rt.sibling=Sn,Rt=Sn,rt=xt}if(Ot.done)return a(k,rt),Tt&&Li(k,vt),ot;if(rt===null){for(;!Ot.done;vt++,Ot=F.next())Ot=Y(k,Ot.value,X),Ot!==null&&(R=g(Ot,R,vt),Rt===null?ot=Ot:Rt.sibling=Ot,Rt=Ot);return Tt&&Li(k,vt),ot}for(rt=o(rt);!Ot.done;vt++,Ot=F.next())Ot=j(rt,k,vt,Ot.value,X),Ot!==null&&(e&&Ot.alternate!==null&&rt.delete(Ot.key===null?vt:Ot.key),R=g(Ot,R,vt),Rt===null?ot=Ot:Rt.sibling=Ot,Rt=Ot);return e&&rt.forEach(function(qy){return n(k,qy)}),Tt&&Li(k,vt),ot}function jt(k,R,F,X){if(typeof F=="object"&&F!==null&&F.type===_&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var ot=F.key;R!==null;){if(R.key===ot){if(ot=F.type,ot===_){if(R.tag===7){a(k,R.sibling),X=d(R,F.props.children),X.return=k,k=X;break t}}else if(R.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===$&&zn(ot)===R.type){a(k,R.sibling),X=d(R,F.props),ca(X,F),X.return=k,k=X;break t}a(k,R);break}else n(k,R);R=R.sibling}F.type===_?(X=On(F.props.children,k.mode,X,F.key),X.return=k,k=X):(X=wr(F.type,F.key,F.props,null,k.mode,X),ca(X,F),X.return=k,k=X)}return v(k);case S:t:{for(ot=F.key;R!==null;){if(R.key===ot)if(R.tag===4&&R.stateNode.containerInfo===F.containerInfo&&R.stateNode.implementation===F.implementation){a(k,R.sibling),X=d(R,F.children||[]),X.return=k,k=X;break t}else{a(k,R);break}else n(k,R);R=R.sibling}X=_l(F,k.mode,X),X.return=k,k=X}return v(k);case $:return F=zn(F),jt(k,R,F,X)}if(Dt(F))return st(k,R,F,X);if(ht(F)){if(ot=ht(F),typeof ot!="function")throw Error(s(150));return F=ot.call(F),ut(k,R,F,X)}if(typeof F.then=="function")return jt(k,R,Rr(F),X);if(F.$$typeof===T)return jt(k,R,Tr(k,F),X);Or(k,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,R!==null&&R.tag===6?(a(k,R.sibling),X=d(R,F),X.return=k,k=X):(a(k,R),X=Sl(F,k.mode,X),X.return=k,k=X),v(k)):a(k,R)}return function(k,R,F,X){try{la=0;var ot=jt(k,R,F,X);return ps=null,ot}catch(rt){if(rt===gs||rt===Mr)throw rt;var Rt=Ve(29,rt,null,k.mode);return Rt.lanes=X,Rt.return=k,Rt}finally{}}}var Fn=ud(!0),hd=ud(!1),sn=!1;function kl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bl(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function an(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rn(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Nt&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=_r(e),$h(e,null,a),n}return Sr(e,o,n,a),_r(e)}function ua(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,ih(e,a)}}function zl(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?d=g=n:g=g.next=n}else d=g=n;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Pl=!1;function ha(){if(Pl){var e=fs;if(e!==null)throw e}}function da(e,n,a,o){Pl=!1;var d=e.updateQueue;sn=!1;var g=d.firstBaseUpdate,v=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var M=E,U=M.next;M.next=null,v===null?g=U:v.next=U,v=M;var V=e.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==v&&(E===null?V.firstBaseUpdate=U:E.next=U,V.lastBaseUpdate=M))}if(g!==null){var Y=d.baseState;v=0,V=U=M=null,E=g;do{var I=E.lane&-536870913,j=I!==E.lane;if(j?(Et&I)===I:(o&I)===I){I!==0&&I===ds&&(Pl=!0),V!==null&&(V=V.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var st=e,ut=E;I=n;var jt=a;switch(ut.tag){case 1:if(st=ut.payload,typeof st=="function"){Y=st.call(jt,Y,I);break t}Y=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=ut.payload,I=typeof st=="function"?st.call(jt,Y,I):st,I==null)break t;Y=y({},Y,I);break t;case 2:sn=!0}}I=E.callback,I!==null&&(e.flags|=64,j&&(e.flags|=8192),j=d.callbacks,j===null?d.callbacks=[I]:j.push(I))}else j={lane:I,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(U=V=j,M=Y):V=V.next=j,v|=I;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;j=E,E=j.next,j.next=null,d.lastBaseUpdate=j,d.shared.pending=null}}while(!0);V===null&&(M=Y),d.baseState=M,d.firstBaseUpdate=U,d.lastBaseUpdate=V,g===null&&(d.shared.lanes=0),hn|=v,e.lanes=v,e.memoizedState=Y}}function dd(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function fd(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)dd(a[e],n)}var ms=D(null),Nr=D(0);function gd(e,n){e=qi,P(Nr,e),P(ms,n),qi=e|n.baseLanes}function Fl(){P(Nr,qi),P(ms,ms.current)}function Ul(){qi=Nr.current,H(ms),H(Nr)}var Xe=D(null),li=null;function on(e){var n=e.alternate;P(ie,ie.current&1),P(Xe,e),li===null&&(n===null||ms.current!==null||n.memoizedState!==null)&&(li=e)}function Il(e){P(ie,ie.current),P(Xe,e),li===null&&(li=e)}function pd(e){e.tag===22?(P(ie,ie.current),P(Xe,e),li===null&&(li=e)):ln()}function ln(){P(ie,ie.current),P(Xe,Xe.current)}function Ye(e){H(Xe),li===e&&(li=null),H(ie)}var ie=D(0);function Lr(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Xc(a)||Yc(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var zi=0,bt=null,It=null,re=null,kr=!1,ys=!1,Un=!1,Br=0,fa=0,bs=null,k0=0;function Jt(){throw Error(s(321))}function Hl(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!qe(e[a],n[a]))return!1;return!0}function jl(e,n,a,o,d,g){return zi=g,bt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,N.H=e===null||e.memoizedState===null?Wd:nc,Un=!1,g=a(o,d),Un=!1,ys&&(g=yd(n,a,o,d)),md(e),g}function md(e){N.H=ma;var n=It!==null&&It.next!==null;if(zi=0,re=It=bt=null,kr=!1,fa=0,bs=null,n)throw Error(s(300));e===null||oe||(e=e.dependencies,e!==null&&xr(e)&&(oe=!0))}function yd(e,n,a,o){bt=e;var d=0;do{if(ys&&(bs=null),fa=0,ys=!1,25<=d)throw Error(s(301));if(d+=1,re=It=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}N.H=Jd,g=n(a,o)}while(ys);return g}function B0(){var e=N.H,n=e.useState()[0];return n=typeof n.then=="function"?ga(n):n,e=e.useState()[0],(It!==null?It.memoizedState:null)!==e&&(bt.flags|=1024),n}function Gl(){var e=Br!==0;return Br=0,e}function ql(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Vl(e){if(kr){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}kr=!1}zi=0,re=It=bt=null,ys=!1,fa=Br=0,bs=null}function Me(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?bt.memoizedState=re=e:re=re.next=e,re}function ne(){if(It===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=It.next;var n=re===null?bt.memoizedState:re.next;if(n!==null)re=n,It=e;else{if(e===null)throw bt.alternate===null?Error(s(467)):Error(s(310));It=e,e={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},re===null?bt.memoizedState=re=e:re=re.next=e}return re}function zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ga(e){var n=fa;return fa+=1,bs===null&&(bs=[]),e=od(bs,e,n),n=bt,(re===null?n.memoizedState:re.next)===null&&(n=n.alternate,N.H=n===null||n.memoizedState===null?Wd:nc),e}function Pr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ga(e);if(e.$$typeof===T)return Se(e)}throw Error(s(438,String(e)))}function Xl(e){var n=null,a=bt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=bt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=zr(),bt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=J;return n.index++,a}function Pi(e,n){return typeof n=="function"?n(e):n}function Fr(e){var n=ne();return Yl(n,It,e)}function Yl(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var d=e.baseQueue,g=o.pending;if(g!==null){if(d!==null){var v=d.next;d.next=g.next,g.next=v}n.baseQueue=d=g,o.pending=null}if(g=e.baseState,d===null)e.memoizedState=g;else{n=d.next;var E=v=null,M=null,U=n,V=!1;do{var Y=U.lane&-536870913;if(Y!==U.lane?(Et&Y)===Y:(zi&Y)===Y){var I=U.revertLane;if(I===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),Y===ds&&(V=!0);else if((zi&I)===I){U=U.next,I===ds&&(V=!0);continue}else Y={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(E=M=Y,v=g):M=M.next=Y,bt.lanes|=I,hn|=I;Y=U.action,Un&&a(g,Y),g=U.hasEagerState?U.eagerState:a(g,Y)}else I={lane:Y,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(E=M=I,v=g):M=M.next=I,bt.lanes|=Y,hn|=Y;U=U.next}while(U!==null&&U!==n);if(M===null?v=g:M.next=E,!qe(g,e.memoizedState)&&(oe=!0,V&&(a=fs,a!==null)))throw a;e.memoizedState=g,e.baseState=v,e.baseQueue=M,o.lastRenderedState=g}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function $l(e){var n=ne(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,d=a.pending,g=n.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do g=e(g,v.action),v=v.next;while(v!==d);qe(g,n.memoizedState)||(oe=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),a.lastRenderedState=g}return[g,o]}function bd(e,n,a){var o=bt,d=ne(),g=Tt;if(g){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!qe((It||d).memoizedState,a);if(v&&(d.memoizedState=a,oe=!0),d=d.queue,Zl(Sd.bind(null,o,d,e),[e]),d.getSnapshot!==n||v||re!==null&&re.memoizedState.tag&1){if(o.flags|=2048,vs(9,{destroy:void 0},Ad.bind(null,o,d,a,n),null),qt===null)throw Error(s(349));g||(zi&127)!==0||vd(o,n,a)}return a}function vd(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=bt.updateQueue,n===null?(n=zr(),bt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Ad(e,n,a,o){n.value=a,n.getSnapshot=o,_d(n)&&wd(e)}function Sd(e,n,a){return a(function(){_d(n)&&wd(e)})}function _d(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!qe(e,a)}catch{return!0}}function wd(e){var n=Rn(e,2);n!==null&&Pe(n,e,2)}function Kl(e){var n=Me();if(typeof e=="function"){var a=e;if(e=a(),Un){Qi(!0);try{a()}finally{Qi(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},n}function Ed(e,n,a,o){return e.baseState=a,Yl(e,It,typeof o=="function"?o:Pi)}function z0(e,n,a,o,d){if(Hr(e))throw Error(s(485));if(e=n.action,e!==null){var g={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};N.T!==null?a(!0):g.isTransition=!1,o(g),a=n.pending,a===null?(g.next=n.pending=g,xd(n,g)):(g.next=a.next,n.pending=a.next=g)}}function xd(e,n){var a=n.action,o=n.payload,d=e.state;if(n.isTransition){var g=N.T,v={};N.T=v;try{var E=a(d,o),M=N.S;M!==null&&M(v,E),Td(e,n,E)}catch(U){Ql(e,n,U)}finally{g!==null&&v.types!==null&&(g.types=v.types),N.T=g}}else try{g=a(d,o),Td(e,n,g)}catch(U){Ql(e,n,U)}}function Td(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Cd(e,n,o)},function(o){return Ql(e,n,o)}):Cd(e,n,a)}function Cd(e,n,a){n.status="fulfilled",n.value=a,Md(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,xd(e,a)))}function Ql(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Md(n),n=n.next;while(n!==o)}e.action=null}function Md(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Dd(e,n){return n}function Rd(e,n){if(Tt){var a=qt.formState;if(a!==null){t:{var o=bt;if(Tt){if(Yt){e:{for(var d=Yt,g=oi;d.nodeType!==8;){if(!g){d=null;break e}if(d=ci(d.nextSibling),d===null){d=null;break e}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Yt=ci(d.nextSibling),o=d.data==="F!";break t}}en(o)}o=!1}o&&(n=a[0])}}return a=Me(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dd,lastRenderedState:n},a.queue=o,a=Kd.bind(null,bt,o),o.dispatch=a,o=Kl(!1),g=ic.bind(null,bt,!1,o.queue),o=Me(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,a=z0.bind(null,bt,d,g,a),d.dispatch=a,o.memoizedState=e,[n,a,!1]}function Od(e){var n=ne();return Nd(n,It,e)}function Nd(e,n,a){if(n=Yl(e,n,Dd)[0],e=Fr(Pi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=ga(n)}catch(v){throw v===gs?Mr:v}else o=n;n=ne();var d=n.queue,g=d.dispatch;return a!==n.memoizedState&&(bt.flags|=2048,vs(9,{destroy:void 0},P0.bind(null,d,a),null)),[o,g,e]}function P0(e,n){e.action=n}function Ld(e){var n=ne(),a=It;if(a!==null)return Nd(n,a,e);ne(),n=n.memoizedState,a=ne();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function vs(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=bt.updateQueue,n===null&&(n=zr(),bt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function kd(){return ne().memoizedState}function Ur(e,n,a,o){var d=Me();bt.flags|=e,d.memoizedState=vs(1|n,{destroy:void 0},a,o===void 0?null:o)}function Ir(e,n,a,o){var d=ne();o=o===void 0?null:o;var g=d.memoizedState.inst;It!==null&&o!==null&&Hl(o,It.memoizedState.deps)?d.memoizedState=vs(n,g,a,o):(bt.flags|=e,d.memoizedState=vs(1|n,g,a,o))}function Bd(e,n){Ur(8390656,8,e,n)}function Zl(e,n){Ir(2048,8,e,n)}function F0(e){bt.flags|=4;var n=bt.updateQueue;if(n===null)n=zr(),bt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function zd(e){var n=ne().memoizedState;return F0({ref:n,nextImpl:e}),function(){if((Nt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Pd(e,n){return Ir(4,2,e,n)}function Fd(e,n){return Ir(4,4,e,n)}function Ud(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Id(e,n,a){a=a!=null?a.concat([e]):null,Ir(4,4,Ud.bind(null,n,e),a)}function Wl(){}function Hd(e,n){var a=ne();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Hl(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function jd(e,n){var a=ne();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Hl(n,o[1]))return o[0];if(o=e(),Un){Qi(!0);try{e()}finally{Qi(!1)}}return a.memoizedState=[o,n],o}function Jl(e,n,a){return a===void 0||(zi&1073741824)!==0&&(Et&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=qf(),bt.lanes|=e,hn|=e,a)}function Gd(e,n,a,o){return qe(a,n)?a:ms.current!==null?(e=Jl(e,a,o),qe(e,n)||(oe=!0),e):(zi&42)===0||(zi&1073741824)!==0&&(Et&261930)===0?(oe=!0,e.memoizedState=a):(e=qf(),bt.lanes|=e,hn|=e,n)}function qd(e,n,a,o,d){var g=q.p;q.p=g!==0&&8>g?g:8;var v=N.T,E={};N.T=E,ic(e,!1,n,a);try{var M=d(),U=N.S;if(U!==null&&U(E,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var V=L0(M,o);pa(e,n,V,Qe(e))}else pa(e,n,o,Qe(e))}catch(Y){pa(e,n,{then:function(){},status:"rejected",reason:Y},Qe())}finally{q.p=g,v!==null&&E.types!==null&&(v.types=E.types),N.T=v}}function U0(){}function tc(e,n,a,o){if(e.tag!==5)throw Error(s(476));var d=Vd(e).queue;qd(e,d,n,W,a===null?U0:function(){return Xd(e),a(o)})}function Vd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:W},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Xd(e){var n=Vd(e);n.next===null&&(n=e.alternate.memoizedState),pa(e,n.next.queue,{},Qe())}function ec(){return Se(Na)}function Yd(){return ne().memoizedState}function $d(){return ne().memoizedState}function I0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Qe();e=an(a);var o=rn(n,e,a);o!==null&&(Pe(o,n,a),ua(o,n,a)),n={cache:Rl()},e.payload=n;return}n=n.return}}function H0(e,n,a){var o=Qe();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Hr(e)?Qd(n,a):(a=vl(e,n,a,o),a!==null&&(Pe(a,e,o),Zd(a,n,o)))}function Kd(e,n,a){var o=Qe();pa(e,n,a,o)}function pa(e,n,a,o){var d={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hr(e))Qd(n,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var v=n.lastRenderedState,E=g(v,a);if(d.hasEagerState=!0,d.eagerState=E,qe(E,v))return Sr(e,n,d,0),qt===null&&Ar(),!1}catch{}finally{}if(a=vl(e,n,d,o),a!==null)return Pe(a,e,o),Zd(a,n,o),!0}return!1}function ic(e,n,a,o){if(o={lane:2,revertLane:kc(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Hr(e)){if(n)throw Error(s(479))}else n=vl(e,a,o,2),n!==null&&Pe(n,e,2)}function Hr(e){var n=e.alternate;return e===bt||n!==null&&n===bt}function Qd(e,n){ys=kr=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Zd(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,ih(e,a)}}var ma={readContext:Se,use:Pr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};ma.useEffectEvent=Jt;var Wd={readContext:Se,use:Pr,useCallback:function(e,n){return Me().memoizedState=[e,n===void 0?null:n],e},useContext:Se,useEffect:Bd,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Ur(4194308,4,Ud.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Ur(4194308,4,e,n)},useInsertionEffect:function(e,n){Ur(4,2,e,n)},useMemo:function(e,n){var a=Me();n=n===void 0?null:n;var o=e();if(Un){Qi(!0);try{e()}finally{Qi(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=Me();if(a!==void 0){var d=a(n);if(Un){Qi(!0);try{a(n)}finally{Qi(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=H0.bind(null,bt,e),[o.memoizedState,e]},useRef:function(e){var n=Me();return e={current:e},n.memoizedState=e},useState:function(e){e=Kl(e);var n=e.queue,a=Kd.bind(null,bt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Wl,useDeferredValue:function(e,n){var a=Me();return Jl(a,e,n)},useTransition:function(){var e=Kl(!1);return e=qd.bind(null,bt,e.queue,!0,!1),Me().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=bt,d=Me();if(Tt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),qt===null)throw Error(s(349));(Et&127)!==0||vd(o,n,a)}d.memoizedState=a;var g={value:a,getSnapshot:n};return d.queue=g,Bd(Sd.bind(null,o,g,e),[e]),o.flags|=2048,vs(9,{destroy:void 0},Ad.bind(null,o,g,a,n),null),a},useId:function(){var e=Me(),n=qt.identifierPrefix;if(Tt){var a=Ai,o=vi;a=(o&~(1<<32-Ge(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Br++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=k0++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:ec,useFormState:Rd,useActionState:Rd,useOptimistic:function(e){var n=Me();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=ic.bind(null,bt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Xl,useCacheRefresh:function(){return Me().memoizedState=I0.bind(null,bt)},useEffectEvent:function(e){var n=Me(),a={impl:e};return n.memoizedState=a,function(){if((Nt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},nc={readContext:Se,use:Pr,useCallback:Hd,useContext:Se,useEffect:Zl,useImperativeHandle:Id,useInsertionEffect:Pd,useLayoutEffect:Fd,useMemo:jd,useReducer:Fr,useRef:kd,useState:function(){return Fr(Pi)},useDebugValue:Wl,useDeferredValue:function(e,n){var a=ne();return Gd(a,It.memoizedState,e,n)},useTransition:function(){var e=Fr(Pi)[0],n=ne().memoizedState;return[typeof e=="boolean"?e:ga(e),n]},useSyncExternalStore:bd,useId:Yd,useHostTransitionStatus:ec,useFormState:Od,useActionState:Od,useOptimistic:function(e,n){var a=ne();return Ed(a,It,e,n)},useMemoCache:Xl,useCacheRefresh:$d};nc.useEffectEvent=zd;var Jd={readContext:Se,use:Pr,useCallback:Hd,useContext:Se,useEffect:Zl,useImperativeHandle:Id,useInsertionEffect:Pd,useLayoutEffect:Fd,useMemo:jd,useReducer:$l,useRef:kd,useState:function(){return $l(Pi)},useDebugValue:Wl,useDeferredValue:function(e,n){var a=ne();return It===null?Jl(a,e,n):Gd(a,It.memoizedState,e,n)},useTransition:function(){var e=$l(Pi)[0],n=ne().memoizedState;return[typeof e=="boolean"?e:ga(e),n]},useSyncExternalStore:bd,useId:Yd,useHostTransitionStatus:ec,useFormState:Ld,useActionState:Ld,useOptimistic:function(e,n){var a=ne();return It!==null?Ed(a,It,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Xl,useCacheRefresh:$d};Jd.useEffectEvent=zd;function sc(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ac={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Qe(),d=an(o);d.payload=n,a!=null&&(d.callback=a),n=rn(e,d,o),n!==null&&(Pe(n,e,o),ua(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Qe(),d=an(o);d.tag=1,d.payload=n,a!=null&&(d.callback=a),n=rn(e,d,o),n!==null&&(Pe(n,e,o),ua(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Qe(),o=an(a);o.tag=2,n!=null&&(o.callback=n),n=rn(e,o,a),n!==null&&(Pe(n,e,a),ua(n,e,a))}};function tf(e,n,a,o,d,g,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,v):n.prototype&&n.prototype.isPureReactComponent?!ia(a,o)||!ia(d,g):!0}function ef(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&ac.enqueueReplaceState(n,n.state,null)}function In(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function nf(e){vr(e)}function sf(e){console.error(e)}function af(e){vr(e)}function jr(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function rf(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function rc(e,n,a){return a=an(a),a.tag=3,a.payload={element:null},a.callback=function(){jr(e,n)},a}function of(e){return e=an(e),e.tag=3,e}function lf(e,n,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;e.payload=function(){return d(g)},e.callback=function(){rf(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){rf(n,a,o),typeof d!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function j0(e,n,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&hs(n,a,d,!0),a=Xe.current,a!==null){switch(a.tag){case 31:case 13:return li===null?to():a.alternate===null&&te===0&&(te=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===Dr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Oc(e,o,d)),!1;case 22:return a.flags|=65536,o===Dr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Oc(e,o,d)),!1}throw Error(s(435,a.tag))}return Oc(e,o,d),to(),!1}if(Tt)return n=Xe.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==xl&&(e=Error(s(422),{cause:o}),aa(si(e,a)))):(o!==xl&&(n=Error(s(423),{cause:o}),aa(si(n,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=si(o,a),d=rc(e.stateNode,o,d),zl(e,d),te!==4&&(te=2)),!1;var g=Error(s(520),{cause:o});if(g=si(g,a),Ea===null?Ea=[g]:Ea.push(g),te!==4&&(te=2),n===null)return!0;o=si(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=rc(a.stateNode,o,e),zl(a,e),!1;case 1:if(n=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(dn===null||!dn.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=of(d),lf(d,e,a,o),zl(a,d),!1}a=a.return}while(a!==null);return!1}var oc=Error(s(461)),oe=!1;function _e(e,n,a,o){n.child=e===null?hd(n,null,a,o):Fn(n,e.child,a,o)}function cf(e,n,a,o,d){a=a.render;var g=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return kn(n),o=jl(e,n,a,v,g,d),E=Gl(),e!==null&&!oe?(ql(e,n,d),Fi(e,n,d)):(Tt&&E&&wl(n),n.flags|=1,_e(e,n,o,d),n.child)}function uf(e,n,a,o,d){if(e===null){var g=a.type;return typeof g=="function"&&!Al(g)&&g.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=g,hf(e,n,g,o,d)):(e=wr(a.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!pc(e,d)){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:ia,a(v,o)&&e.ref===n.ref)return Fi(e,n,d)}return n.flags|=1,e=Ni(g,o),e.ref=n.ref,e.return=n,n.child=e}function hf(e,n,a,o,d){if(e!==null){var g=e.memoizedProps;if(ia(g,o)&&e.ref===n.ref)if(oe=!1,n.pendingProps=o=g,pc(e,d))(e.flags&131072)!==0&&(oe=!0);else return n.lanes=e.lanes,Fi(e,n,d)}return lc(e,n,a,o,d)}function df(e,n,a,o){var d=o.children,g=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~g}else o=0,n.child=null;return ff(e,n,g,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Cr(n,g!==null?g.cachePool:null),g!==null?gd(n,g):Fl(),pd(n);else return o=n.lanes=536870912,ff(e,n,g!==null?g.baseLanes|a:a,a,o)}else g!==null?(Cr(n,g.cachePool),gd(n,g),ln(),n.memoizedState=null):(e!==null&&Cr(n,null),Fl(),ln());return _e(e,n,d,a),n.child}function ya(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function ff(e,n,a,o,d){var g=Nl();return g=g===null?null:{parent:ae._currentValue,pool:g},n.memoizedState={baseLanes:a,cachePool:g},e!==null&&Cr(n,null),Fl(),pd(n),e!==null&&hs(e,n,o,!0),n.childLanes=d,null}function Gr(e,n){return n=Vr({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function gf(e,n,a){return Fn(n,e.child,null,a),e=Gr(n,n.pendingProps),e.flags|=2,Ye(n),n.memoizedState=null,e}function G0(e,n,a){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Tt){if(o.mode==="hidden")return e=Gr(n,o),n.lanes=536870912,ya(null,e);if(Il(n),(e=Yt)?(e=Tg(e,oi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ji!==null?{id:vi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=Qh(e),a.return=n,n.child=a,Ae=n,Yt=null)):e=null,e===null)throw en(n);return n.lanes=536870912,null}return Gr(n,o)}var g=e.memoizedState;if(g!==null){var v=g.dehydrated;if(Il(n),d)if(n.flags&256)n.flags&=-257,n=gf(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(oe||hs(e,n,a,!1),d=(a&e.childLanes)!==0,oe||d){if(o=qt,o!==null&&(v=nh(o,a),v!==0&&v!==g.retryLane))throw g.retryLane=v,Rn(e,v),Pe(o,e,v),oc;to(),n=gf(e,n,a)}else e=g.treeContext,Yt=ci(v.nextSibling),Ae=n,Tt=!0,tn=null,oi=!1,e!==null&&Jh(n,e),n=Gr(n,o),n.flags|=4096;return n}return e=Ni(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function qr(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function lc(e,n,a,o,d){return kn(n),a=jl(e,n,a,o,void 0,d),o=Gl(),e!==null&&!oe?(ql(e,n,d),Fi(e,n,d)):(Tt&&o&&wl(n),n.flags|=1,_e(e,n,a,d),n.child)}function pf(e,n,a,o,d,g){return kn(n),n.updateQueue=null,a=yd(n,o,a,d),md(e),o=Gl(),e!==null&&!oe?(ql(e,n,g),Fi(e,n,g)):(Tt&&o&&wl(n),n.flags|=1,_e(e,n,a,g),n.child)}function mf(e,n,a,o,d){if(kn(n),n.stateNode===null){var g=os,v=a.contextType;typeof v=="object"&&v!==null&&(g=Se(v)),g=new a(o,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ac,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=o,g.state=n.memoizedState,g.refs={},kl(n),v=a.contextType,g.context=typeof v=="object"&&v!==null?Se(v):os,g.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(sc(n,a,v,o),g.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&ac.enqueueReplaceState(g,g.state,null),da(n,o,g,d),ha(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){g=n.stateNode;var E=n.memoizedProps,M=In(a,E);g.props=M;var U=g.context,V=a.contextType;v=os,typeof V=="object"&&V!==null&&(v=Se(V));var Y=a.getDerivedStateFromProps;V=typeof Y=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,V||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||U!==v)&&ef(n,g,o,v),sn=!1;var I=n.memoizedState;g.state=I,da(n,o,g,d),ha(),U=n.memoizedState,E||I!==U||sn?(typeof Y=="function"&&(sc(n,a,Y,o),U=n.memoizedState),(M=sn||tf(n,a,M,o,I,U,v))?(V||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=U),g.props=o,g.state=U,g.context=v,o=M):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{g=n.stateNode,Bl(e,n),v=n.memoizedProps,V=In(a,v),g.props=V,Y=n.pendingProps,I=g.context,U=a.contextType,M=os,typeof U=="object"&&U!==null&&(M=Se(U)),E=a.getDerivedStateFromProps,(U=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==Y||I!==M)&&ef(n,g,o,M),sn=!1,I=n.memoizedState,g.state=I,da(n,o,g,d),ha();var j=n.memoizedState;v!==Y||I!==j||sn||e!==null&&e.dependencies!==null&&xr(e.dependencies)?(typeof E=="function"&&(sc(n,a,E,o),j=n.memoizedState),(V=sn||tf(n,a,V,o,I,j,M)||e!==null&&e.dependencies!==null&&xr(e.dependencies))?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,j,M),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,j,M)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=j),g.props=o,g.state=j,g.context=M,o=V):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),o=!1)}return g=o,qr(e,n),o=(n.flags&128)!==0,g||o?(g=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&o?(n.child=Fn(n,e.child,null,d),n.child=Fn(n,null,a,d)):_e(e,n,a,d),n.memoizedState=g.state,e=n.child):e=Fi(e,n,d),e}function yf(e,n,a,o){return Nn(),n.flags|=256,_e(e,n,a,o),n.child}var cc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uc(e){return{baseLanes:e,cachePool:ad()}}function hc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Ke),e}function bf(e,n,a){var o=n.pendingProps,d=!1,g=(n.flags&128)!==0,v;if((v=g)||(v=e!==null&&e.memoizedState===null?!1:(ie.current&2)!==0),v&&(d=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Tt){if(d?on(n):ln(),(e=Yt)?(e=Tg(e,oi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Ji!==null?{id:vi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},a=Qh(e),a.return=n,n.child=a,Ae=n,Yt=null)):e=null,e===null)throw en(n);return Yc(e)?n.lanes=32:n.lanes=536870912,null}var E=o.children;return o=o.fallback,d?(ln(),d=n.mode,E=Vr({mode:"hidden",children:E},d),o=On(o,d,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,o=n.child,o.memoizedState=uc(a),o.childLanes=hc(e,v,a),n.memoizedState=cc,ya(null,o)):(on(n),dc(n,E))}var M=e.memoizedState;if(M!==null&&(E=M.dehydrated,E!==null)){if(g)n.flags&256?(on(n),n.flags&=-257,n=fc(e,n,a)):n.memoizedState!==null?(ln(),n.child=e.child,n.flags|=128,n=null):(ln(),E=o.fallback,d=n.mode,o=Vr({mode:"visible",children:o.children},d),E=On(E,d,a,null),E.flags|=2,o.return=n,E.return=n,o.sibling=E,n.child=o,Fn(n,e.child,null,a),o=n.child,o.memoizedState=uc(a),o.childLanes=hc(e,v,a),n.memoizedState=cc,n=ya(null,o));else if(on(n),Yc(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var U=v.dgst;v=U,o=Error(s(419)),o.stack="",o.digest=v,aa({value:o,source:null,stack:null}),n=fc(e,n,a)}else if(oe||hs(e,n,a,!1),v=(a&e.childLanes)!==0,oe||v){if(v=qt,v!==null&&(o=nh(v,a),o!==0&&o!==M.retryLane))throw M.retryLane=o,Rn(e,o),Pe(v,e,o),oc;Xc(E)||to(),n=fc(e,n,a)}else Xc(E)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Yt=ci(E.nextSibling),Ae=n,Tt=!0,tn=null,oi=!1,e!==null&&Jh(n,e),n=dc(n,o.children),n.flags|=4096);return n}return d?(ln(),E=o.fallback,d=n.mode,M=e.child,U=M.sibling,o=Ni(M,{mode:"hidden",children:o.children}),o.subtreeFlags=M.subtreeFlags&65011712,U!==null?E=Ni(U,E):(E=On(E,d,a,null),E.flags|=2),E.return=n,o.return=n,o.sibling=E,n.child=o,ya(null,o),o=n.child,E=e.child.memoizedState,E===null?E=uc(a):(d=E.cachePool,d!==null?(M=ae._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=ad(),E={baseLanes:E.baseLanes|a,cachePool:d}),o.memoizedState=E,o.childLanes=hc(e,v,a),n.memoizedState=cc,ya(e.child,o)):(on(n),a=e.child,e=a.sibling,a=Ni(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function dc(e,n){return n=Vr({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Vr(e,n){return e=Ve(22,e,null,n),e.lanes=0,e}function fc(e,n,a){return Fn(n,e.child,null,a),e=dc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function vf(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Ml(e.return,n,a)}function gc(e,n,a,o,d,g){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d,treeForkCount:g}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=d,v.treeForkCount=g)}function Af(e,n,a){var o=n.pendingProps,d=o.revealOrder,g=o.tail;o=o.children;var v=ie.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,P(ie,v),_e(e,n,o,a),o=Tt?sa:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vf(e,a,n);else if(e.tag===19)vf(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=n.child,d=null;a!==null;)e=a.alternate,e!==null&&Lr(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),gc(n,!1,d,a,g,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Lr(e)===null){n.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}gc(n,!0,a,null,g,o);break;case"together":gc(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Fi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),hn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(hs(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=Ni(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ni(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function pc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&xr(e)))}function q0(e,n,a){switch(n.tag){case 3:Bt(n,n.stateNode.containerInfo),nn(n,ae,e.memoizedState.cache),Nn();break;case 27:case 5:Ut(n);break;case 4:Bt(n,n.stateNode.containerInfo);break;case 10:nn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Il(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(on(n),n.flags|=128,null):(a&n.child.childLanes)!==0?bf(e,n,a):(on(n),e=Fi(e,n,a),e!==null?e.sibling:null);on(n);break;case 19:var d=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(hs(e,n,a,!1),o=(a&n.childLanes)!==0),d){if(o)return Af(e,n,a);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),P(ie,ie.current),o)break;return null;case 22:return n.lanes=0,df(e,n,a,n.pendingProps);case 24:nn(n,ae,e.memoizedState.cache)}return Fi(e,n,a)}function Sf(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)oe=!0;else{if(!pc(e,a)&&(n.flags&128)===0)return oe=!1,q0(e,n,a);oe=(e.flags&131072)!==0}else oe=!1,Tt&&(n.flags&1048576)!==0&&Wh(n,sa,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=zn(n.elementType),n.type=e,typeof e=="function")Al(e)?(o=In(e,o),n.tag=1,n=mf(null,n,e,o,a)):(n.tag=0,n=lc(null,n,e,o,a));else{if(e!=null){var d=e.$$typeof;if(d===L){n.tag=11,n=cf(null,n,e,o,a);break t}else if(d===z){n.tag=14,n=uf(null,n,e,o,a);break t}}throw n=dt(e)||e,Error(s(306,n,""))}}return n;case 0:return lc(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,d=In(o,n.pendingProps),mf(e,n,o,d,a);case 3:t:{if(Bt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var g=n.memoizedState;d=g.element,Bl(e,n),da(n,o,null,a);var v=n.memoizedState;if(o=v.cache,nn(n,ae,o),o!==g.cache&&Dl(n,[ae],a,!0),ha(),o=v.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=yf(e,n,o,a);break t}else if(o!==d){d=si(Error(s(424)),n),aa(d),n=yf(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Yt=ci(e.firstChild),Ae=n,Tt=!0,tn=null,oi=!0,a=hd(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Nn(),o===d){n=Fi(e,n,a);break t}_e(e,n,o,a)}n=n.child}return n;case 26:return qr(e,n),e===null?(a=Ng(n.type,null,n.pendingProps,null))?n.memoizedState=a:Tt||(a=n.type,e=n.pendingProps,o=oo(nt.current).createElement(a),o[ve]=n,o[Oe]=e,we(o,a,e),pe(o),n.stateNode=o):n.memoizedState=Ng(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ut(n),e===null&&Tt&&(o=n.stateNode=Dg(n.type,n.pendingProps,nt.current),Ae=n,oi=!0,d=Yt,mn(n.type)?($c=d,Yt=ci(o.firstChild)):Yt=d),_e(e,n,n.pendingProps.children,a),qr(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Tt&&((d=o=Yt)&&(o=Ay(o,n.type,n.pendingProps,oi),o!==null?(n.stateNode=o,Ae=n,Yt=ci(o.firstChild),oi=!1,d=!0):d=!1),d||en(n)),Ut(n),d=n.type,g=n.pendingProps,v=e!==null?e.memoizedProps:null,o=g.children,Gc(d,g)?o=null:v!==null&&Gc(d,v)&&(n.flags|=32),n.memoizedState!==null&&(d=jl(e,n,B0,null,null,a),Na._currentValue=d),qr(e,n),_e(e,n,o,a),n.child;case 6:return e===null&&Tt&&((e=a=Yt)&&(a=Sy(a,n.pendingProps,oi),a!==null?(n.stateNode=a,Ae=n,Yt=null,e=!0):e=!1),e||en(n)),null;case 13:return bf(e,n,a);case 4:return Bt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Fn(n,null,o,a):_e(e,n,o,a),n.child;case 11:return cf(e,n,n.type,n.pendingProps,a);case 7:return _e(e,n,n.pendingProps,a),n.child;case 8:return _e(e,n,n.pendingProps.children,a),n.child;case 12:return _e(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,nn(n,n.type,o.value),_e(e,n,o.children,a),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,kn(n),d=Se(d),o=o(d),n.flags|=1,_e(e,n,o,a),n.child;case 14:return uf(e,n,n.type,n.pendingProps,a);case 15:return hf(e,n,n.type,n.pendingProps,a);case 19:return Af(e,n,a);case 31:return G0(e,n,a);case 22:return df(e,n,a,n.pendingProps);case 24:return kn(n),o=Se(ae),e===null?(d=Nl(),d===null&&(d=qt,g=Rl(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),n.memoizedState={parent:o,cache:d},kl(n),nn(n,ae,d)):((e.lanes&a)!==0&&(Bl(e,n),da(n,null,null,a),ha()),d=e.memoizedState,g=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),nn(n,ae,o)):(o=g.cache,nn(n,ae,o),o!==d.cache&&Dl(n,[ae],a,!0))),_e(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Ui(e){e.flags|=4}function mc(e,n,a,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if($f())e.flags|=8192;else throw Pn=Dr,Ll}else e.flags&=-16777217}function _f(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pg(n))if($f())e.flags|=8192;else throw Pn=Dr,Ll}function Xr(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?th():536870912,e.lanes|=n,ws|=n)}function ba(e,n){if(!Tt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function $t(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function V0(e,n,a){var o=n.pendingProps;switch(El(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(n),null;case 1:return $t(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Bi(ae),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(us(n)?Ui(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Tl())),$t(n),null;case 26:var d=n.type,g=n.memoizedState;return e===null?(Ui(n),g!==null?($t(n),_f(n,g)):($t(n),mc(n,d,null,o,a))):g?g!==e.memoizedState?(Ui(n),$t(n),_f(n,g)):($t(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Ui(n),$t(n),mc(n,d,e,o,a)),null;case 27:if(bi(n),a=nt.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Ui(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return $t(n),null}e=Q.current,us(n)?td(n):(e=Dg(d,o,a),n.stateNode=e,Ui(n))}return $t(n),null;case 5:if(bi(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Ui(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return $t(n),null}if(g=Q.current,us(n))td(n);else{var v=oo(nt.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?v.createElement(d,{is:o.is}):v.createElement(d)}}g[ve]=n,g[Oe]=o;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=g;t:switch(we(g,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Ui(n)}}return $t(n),mc(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Ui(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=nt.current,us(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,d=Ae,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[ve]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||bg(e.nodeValue,a)),e||en(n,!0)}else e=oo(e).createTextNode(o),e[ve]=n,n.stateNode=e}return $t(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=us(n),a!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[ve]=n}else Nn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),e=!1}else a=Tl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ye(n),n):(Ye(n),null);if((n.flags&128)!==0)throw Error(s(558))}return $t(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=us(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[ve]=n}else Nn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$t(n),d=!1}else d=Tl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Ye(n),n):(Ye(n),null)}return Ye(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==d&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Xr(n,n.updateQueue),$t(n),null);case 4:return ct(),e===null&&Fc(n.stateNode.containerInfo),$t(n),null;case 10:return Bi(n.type),$t(n),null;case 19:if(H(ie),o=n.memoizedState,o===null)return $t(n),null;if(d=(n.flags&128)!==0,g=o.rendering,g===null)if(d)ba(o,!1);else{if(te!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=Lr(e),g!==null){for(n.flags|=128,ba(o,!1),e=g.updateQueue,n.updateQueue=e,Xr(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Kh(a,e),a=a.sibling;return P(ie,ie.current&1|2),Tt&&Li(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&He()>Zr&&(n.flags|=128,d=!0,ba(o,!1),n.lanes=4194304)}else{if(!d)if(e=Lr(g),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,Xr(n,e),ba(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Tt)return $t(n),null}else 2*He()-o.renderingStartTime>Zr&&a!==536870912&&(n.flags|=128,d=!0,ba(o,!1),n.lanes=4194304);o.isBackwards?(g.sibling=n.child,n.child=g):(e=o.last,e!==null?e.sibling=g:n.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=He(),e.sibling=null,a=ie.current,P(ie,d?a&1|2:a&1),Tt&&Li(n,o.treeForkCount),e):($t(n),null);case 22:case 23:return Ye(n),Ul(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&($t(n),n.subtreeFlags&6&&(n.flags|=8192)):$t(n),a=n.updateQueue,a!==null&&Xr(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&H(Bn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Bi(ae),$t(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function X0(e,n){switch(El(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Bi(ae),ct(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return bi(n),null;case 31:if(n.memoizedState!==null){if(Ye(n),n.alternate===null)throw Error(s(340));Nn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ye(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Nn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(ie),null;case 4:return ct(),null;case 10:return Bi(n.type),null;case 22:case 23:return Ye(n),Ul(),e!==null&&H(Bn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Bi(ae),null;case 25:return null;default:return null}}function wf(e,n){switch(El(n),n.tag){case 3:Bi(ae),ct();break;case 26:case 27:case 5:bi(n);break;case 4:ct();break;case 31:n.memoizedState!==null&&Ye(n);break;case 13:Ye(n);break;case 19:H(ie);break;case 10:Bi(n.type);break;case 22:case 23:Ye(n),Ul(),e!==null&&H(Bn);break;case 24:Bi(ae)}}function va(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&e)===e){o=void 0;var g=a.create,v=a.inst;o=g(),v.destroy=o}a=a.next}while(a!==d)}}catch(E){Pt(n,n.return,E)}}function cn(e,n,a){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var g=d.next;o=g;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,d=n;var M=a,U=E;try{U()}catch(V){Pt(d,M,V)}}}o=o.next}while(o!==g)}}catch(V){Pt(n,n.return,V)}}function Ef(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{fd(n,a)}catch(o){Pt(e,e.return,o)}}}function xf(e,n,a){a.props=In(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Pt(e,n,o)}}function Aa(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(d){Pt(e,n,d)}}function Si(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){Pt(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Pt(e,n,d)}else a.current=null}function Tf(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){Pt(e,e.return,d)}}function yc(e,n,a){try{var o=e.stateNode;gy(o,e.type,a,n),o[Oe]=n}catch(d){Pt(e,e.return,d)}}function Cf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&mn(e.type)||e.tag===4}function bc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Cf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&mn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ri));else if(o!==4&&(o===27&&mn(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(vc(e,n,a),e=e.sibling;e!==null;)vc(e,n,a),e=e.sibling}function Yr(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&mn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Yr(e,n,a),e=e.sibling;e!==null;)Yr(e,n,a),e=e.sibling}function Mf(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);we(n,o,a),n[ve]=e,n[Oe]=a}catch(g){Pt(e,e.return,g)}}var Ii=!1,le=!1,Ac=!1,Df=typeof WeakSet=="function"?WeakSet:Set,me=null;function Y0(e,n){if(e=e.containerInfo,Hc=po,e=Ih(e),fl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var v=0,E=-1,M=-1,U=0,V=0,Y=e,I=null;e:for(;;){for(var j;Y!==a||d!==0&&Y.nodeType!==3||(E=v+d),Y!==g||o!==0&&Y.nodeType!==3||(M=v+o),Y.nodeType===3&&(v+=Y.nodeValue.length),(j=Y.firstChild)!==null;)I=Y,Y=j;for(;;){if(Y===e)break e;if(I===a&&++U===d&&(E=v),I===g&&++V===o&&(M=v),(j=Y.nextSibling)!==null)break;Y=I,I=Y.parentNode}Y=j}a=E===-1||M===-1?null:{start:E,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(jc={focusedElem:e,selectionRange:a},po=!1,me=n;me!==null;)if(n=me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,me=e;else for(;me!==null;){switch(n=me,g=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=n,d=g.memoizedProps,g=g.memoizedState,o=a.stateNode;try{var st=In(a.type,d);e=o.getSnapshotBeforeUpdate(st,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(ut){Pt(a,a.return,ut)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Vc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,me=e;break}me=n.return}}function Rf(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ji(e,a),o&4&&va(5,a);break;case 1:if(ji(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Pt(a,a.return,v)}else{var d=In(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Pt(a,a.return,v)}}o&64&&Ef(a),o&512&&Aa(a,a.return);break;case 3:if(ji(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{fd(e,n)}catch(v){Pt(a,a.return,v)}}break;case 27:n===null&&o&4&&Mf(a);case 26:case 5:ji(e,a),n===null&&o&4&&Tf(a),o&512&&Aa(a,a.return);break;case 12:ji(e,a);break;case 31:ji(e,a),o&4&&Lf(e,a);break;case 13:ji(e,a),o&4&&kf(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=iy.bind(null,a),_y(e,a))));break;case 22:if(o=a.memoizedState!==null||Ii,!o){n=n!==null&&n.memoizedState!==null||le,d=Ii;var g=le;Ii=o,(le=n)&&!g?Gi(e,a,(a.subtreeFlags&8772)!==0):ji(e,a),Ii=d,le=g}break;case 30:break;default:ji(e,a)}}function Of(e){var n=e.alternate;n!==null&&(e.alternate=null,Of(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Qo(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Kt=null,Le=!1;function Hi(e,n,a){for(a=a.child;a!==null;)Nf(e,n,a),a=a.sibling}function Nf(e,n,a){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(qs,a)}catch{}switch(a.tag){case 26:le||Si(a,n),Hi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:le||Si(a,n);var o=Kt,d=Le;mn(a.type)&&(Kt=a.stateNode,Le=!1),Hi(e,n,a),Da(a.stateNode),Kt=o,Le=d;break;case 5:le||Si(a,n);case 6:if(o=Kt,d=Le,Kt=null,Hi(e,n,a),Kt=o,Le=d,Kt!==null)if(Le)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(a.stateNode)}catch(g){Pt(a,n,g)}else try{Kt.removeChild(a.stateNode)}catch(g){Pt(a,n,g)}break;case 18:Kt!==null&&(Le?(e=Kt,Eg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Os(e)):Eg(Kt,a.stateNode));break;case 4:o=Kt,d=Le,Kt=a.stateNode.containerInfo,Le=!0,Hi(e,n,a),Kt=o,Le=d;break;case 0:case 11:case 14:case 15:cn(2,a,n),le||cn(4,a,n),Hi(e,n,a);break;case 1:le||(Si(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&xf(a,n,o)),Hi(e,n,a);break;case 21:Hi(e,n,a);break;case 22:le=(o=le)||a.memoizedState!==null,Hi(e,n,a),le=o;break;default:Hi(e,n,a)}}function Lf(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Os(e)}catch(a){Pt(n,n.return,a)}}}function kf(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Os(e)}catch(a){Pt(n,n.return,a)}}function $0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Df),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Df),n;default:throw Error(s(435,e.tag))}}function $r(e,n){var a=$0(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var d=ny.bind(null,e,o);o.then(d,d)}})}function ke(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],g=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(mn(E.type)){Kt=E.stateNode,Le=!1;break t}break;case 5:Kt=E.stateNode,Le=!1;break t;case 3:case 4:Kt=E.stateNode.containerInfo,Le=!0;break t}E=E.return}if(Kt===null)throw Error(s(160));Nf(g,v,d),Kt=null,Le=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Bf(n,e),n=n.sibling}var mi=null;function Bf(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ke(n,e),Be(e),o&4&&(cn(3,e,e.return),va(3,e),cn(5,e,e.return));break;case 1:ke(n,e),Be(e),o&512&&(le||a===null||Si(a,a.return)),o&64&&Ii&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=mi;if(ke(n,e),Be(e),o&512&&(le||a===null||Si(a,a.return)),o&4){var g=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(o){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Ys]||g[ve]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(o),d.head.insertBefore(g,d.querySelector("head > title"))),we(g,o,a),g[ve]=e,pe(g),o=g;break t;case"link":var v=Bg("link","href",d).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(g=v[E],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}g=d.createElement(o),we(g,o,a),d.head.appendChild(g);break;case"meta":if(v=Bg("meta","content",d).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(g=v[E],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}g=d.createElement(o),we(g,o,a),d.head.appendChild(g);break;default:throw Error(s(468,o))}g[ve]=e,pe(g),o=g}e.stateNode=o}else zg(d,e.type,e.stateNode);else e.stateNode=kg(d,o,e.memoizedProps);else g!==o?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,o===null?zg(d,e.type,e.stateNode):kg(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&yc(e,e.memoizedProps,a.memoizedProps)}break;case 27:ke(n,e),Be(e),o&512&&(le||a===null||Si(a,a.return)),a!==null&&o&4&&yc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ke(n,e),Be(e),o&512&&(le||a===null||Si(a,a.return)),e.flags&32){d=e.stateNode;try{ts(d,"")}catch(st){Pt(e,e.return,st)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,yc(e,d,a!==null?a.memoizedProps:d)),o&1024&&(Ac=!0);break;case 6:if(ke(n,e),Be(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(st){Pt(e,e.return,st)}}break;case 3:if(uo=null,d=mi,mi=lo(n.containerInfo),ke(n,e),mi=d,Be(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Os(n.containerInfo)}catch(st){Pt(e,e.return,st)}Ac&&(Ac=!1,zf(e));break;case 4:o=mi,mi=lo(e.stateNode.containerInfo),ke(n,e),Be(e),mi=o;break;case 12:ke(n,e),Be(e);break;case 31:ke(n,e),Be(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$r(e,o)));break;case 13:ke(n,e),Be(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qr=He()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$r(e,o)));break;case 22:d=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,U=Ii,V=le;if(Ii=U||d,le=V||M,ke(n,e),le=V,Ii=U,Be(e),o&8192)t:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(a===null||M||Ii||le||Hn(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(g=M.stateNode,d)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=M.stateNode;var Y=M.memoizedProps.style,I=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(st){Pt(M,M.return,st)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(st){Pt(M,M.return,st)}}}else if(n.tag===18){if(a===null){M=n;try{var j=M.stateNode;d?xg(j,!0):xg(M.stateNode,!1)}catch(st){Pt(M,M.return,st)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,$r(e,a))));break;case 19:ke(n,e),Be(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$r(e,o)));break;case 30:break;case 21:break;default:ke(n,e),Be(e)}}function Be(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Cf(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,g=bc(e);Yr(e,g,d);break;case 5:var v=a.stateNode;a.flags&32&&(ts(v,""),a.flags&=-33);var E=bc(e);Yr(e,E,v);break;case 3:case 4:var M=a.stateNode.containerInfo,U=bc(e);vc(e,U,M);break;default:throw Error(s(161))}}catch(V){Pt(e,e.return,V)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function zf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;zf(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ji(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Rf(e,n.alternate,n),n=n.sibling}function Hn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:cn(4,n,n.return),Hn(n);break;case 1:Si(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&xf(n,n.return,a),Hn(n);break;case 27:Da(n.stateNode);case 26:case 5:Si(n,n.return),Hn(n);break;case 22:n.memoizedState===null&&Hn(n);break;case 30:Hn(n);break;default:Hn(n)}e=e.sibling}}function Gi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,g=n,v=g.flags;switch(g.tag){case 0:case 11:case 15:Gi(d,g,a),va(4,g);break;case 1:if(Gi(d,g,a),o=g,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(U){Pt(o,o.return,U)}if(o=g,d=o.updateQueue,d!==null){var E=o.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)dd(M[d],E)}catch(U){Pt(o,o.return,U)}}a&&v&64&&Ef(g),Aa(g,g.return);break;case 27:Mf(g);case 26:case 5:Gi(d,g,a),a&&o===null&&v&4&&Tf(g),Aa(g,g.return);break;case 12:Gi(d,g,a);break;case 31:Gi(d,g,a),a&&v&4&&Lf(d,g);break;case 13:Gi(d,g,a),a&&v&4&&kf(d,g);break;case 22:g.memoizedState===null&&Gi(d,g,a),Aa(g,g.return);break;case 30:break;default:Gi(d,g,a)}n=n.sibling}}function Sc(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ra(a))}function _c(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ra(e))}function yi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Pf(e,n,a,o),n=n.sibling}function Pf(e,n,a,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:yi(e,n,a,o),d&2048&&va(9,n);break;case 1:yi(e,n,a,o);break;case 3:yi(e,n,a,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ra(e)));break;case 12:if(d&2048){yi(e,n,a,o),e=n.stateNode;try{var g=n.memoizedProps,v=g.id,E=g.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Pt(n,n.return,M)}}else yi(e,n,a,o);break;case 31:yi(e,n,a,o);break;case 13:yi(e,n,a,o);break;case 23:break;case 22:g=n.stateNode,v=n.alternate,n.memoizedState!==null?g._visibility&2?yi(e,n,a,o):Sa(e,n):g._visibility&2?yi(e,n,a,o):(g._visibility|=2,As(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Sc(v,n);break;case 24:yi(e,n,a,o),d&2048&&_c(n.alternate,n);break;default:yi(e,n,a,o)}}function As(e,n,a,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=e,v=n,E=a,M=o,U=v.flags;switch(v.tag){case 0:case 11:case 15:As(g,v,E,M,d),va(8,v);break;case 23:break;case 22:var V=v.stateNode;v.memoizedState!==null?V._visibility&2?As(g,v,E,M,d):Sa(g,v):(V._visibility|=2,As(g,v,E,M,d)),d&&U&2048&&Sc(v.alternate,v);break;case 24:As(g,v,E,M,d),d&&U&2048&&_c(v.alternate,v);break;default:As(g,v,E,M,d)}n=n.sibling}}function Sa(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,d=o.flags;switch(o.tag){case 22:Sa(a,o),d&2048&&Sc(o.alternate,o);break;case 24:Sa(a,o),d&2048&&_c(o.alternate,o);break;default:Sa(a,o)}n=n.sibling}}var _a=8192;function Ss(e,n,a){if(e.subtreeFlags&_a)for(e=e.child;e!==null;)Ff(e,n,a),e=e.sibling}function Ff(e,n,a){switch(e.tag){case 26:Ss(e,n,a),e.flags&_a&&e.memoizedState!==null&&ky(a,mi,e.memoizedState,e.memoizedProps);break;case 5:Ss(e,n,a);break;case 3:case 4:var o=mi;mi=lo(e.stateNode.containerInfo),Ss(e,n,a),mi=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=_a,_a=16777216,Ss(e,n,a),_a=o):Ss(e,n,a));break;default:Ss(e,n,a)}}function Uf(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function wa(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];me=o,Hf(o,e)}Uf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)If(e),e=e.sibling}function If(e){switch(e.tag){case 0:case 11:case 15:wa(e),e.flags&2048&&cn(9,e,e.return);break;case 3:wa(e);break;case 12:wa(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Kr(e)):wa(e);break;default:wa(e)}}function Kr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];me=o,Hf(o,e)}Uf(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:cn(8,n,n.return),Kr(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Kr(n));break;default:Kr(n)}e=e.sibling}}function Hf(e,n){for(;me!==null;){var a=me;switch(a.tag){case 0:case 11:case 15:cn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ra(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,me=o;else t:for(a=e;me!==null;){o=me;var d=o.sibling,g=o.return;if(Of(o),o===a){me=null;break t}if(d!==null){d.return=g,me=d;break t}me=g}}}var K0={getCacheForType:function(e){var n=Se(ae),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Se(ae).controller.signal}},Q0=typeof WeakMap=="function"?WeakMap:Map,Nt=0,qt=null,St=null,Et=0,zt=0,$e=null,un=!1,_s=!1,wc=!1,qi=0,te=0,hn=0,jn=0,Ec=0,Ke=0,ws=0,Ea=null,ze=null,xc=!1,Qr=0,jf=0,Zr=1/0,Wr=null,dn=null,he=0,fn=null,Es=null,Vi=0,Tc=0,Cc=null,Gf=null,xa=0,Mc=null;function Qe(){return(Nt&2)!==0&&Et!==0?Et&-Et:N.T!==null?kc():sh()}function qf(){if(Ke===0)if((Et&536870912)===0||Tt){var e=rr;rr<<=1,(rr&3932160)===0&&(rr=262144),Ke=e}else Ke=536870912;return e=Xe.current,e!==null&&(e.flags|=32),Ke}function Pe(e,n,a){(e===qt&&(zt===2||zt===9)||e.cancelPendingCommit!==null)&&(xs(e,0),gn(e,Et,Ke,!1)),Xs(e,a),((Nt&2)===0||e!==qt)&&(e===qt&&((Nt&2)===0&&(jn|=a),te===4&&gn(e,Et,Ke,!1)),_i(e))}function Vf(e,n,a){if((Nt&6)!==0)throw Error(s(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Vs(e,n),d=o?J0(e,n):Rc(e,n,!0),g=o;do{if(d===0){_s&&!o&&gn(e,n,0,!1);break}else{if(a=e.current.alternate,g&&!Z0(a)){d=Rc(e,n,!1),g=!1;continue}if(d===2){if(g=n,e.errorRecoveryDisabledLanes&g)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;d=Ea;var M=E.current.memoizedState.isDehydrated;if(M&&(xs(E,v).flags|=256),v=Rc(E,v,!1),v!==2){if(wc&&!M){E.errorRecoveryDisabledLanes|=g,jn|=g,d=4;break t}g=ze,ze=d,g!==null&&(ze===null?ze=g:ze.push.apply(ze,g))}d=v}if(g=!1,d!==2)continue}}if(d===1){xs(e,0),gn(e,n,0,!0);break}t:{switch(o=e,g=d,g){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:gn(o,n,Ke,!un);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(d=Qr+300-He(),10<d)){if(gn(o,n,Ke,!un),lr(o,0,!0)!==0)break t;Vi=n,o.timeoutHandle=_g(Xf.bind(null,o,a,ze,Wr,xc,n,Ke,jn,ws,un,g,"Throttled",-0,0),d);break t}Xf(o,a,ze,Wr,xc,n,Ke,jn,ws,un,g,null,-0,0)}}break}while(!0);_i(e)}function Xf(e,n,a,o,d,g,v,E,M,U,V,Y,I,j){if(e.timeoutHandle=-1,Y=n.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ri},Ff(n,g,Y);var st=(g&62914560)===g?Qr-He():(g&4194048)===g?jf-He():0;if(st=By(Y,st),st!==null){Vi=g,e.cancelPendingCommit=st(tg.bind(null,e,n,g,a,o,d,v,E,M,V,Y,null,I,j)),gn(e,g,v,!U);return}}tg(e,n,g,a,o,d,v,E,M)}function Z0(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],g=d.getSnapshot;d=d.value;try{if(!qe(g(),d))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function gn(e,n,a,o){n&=~Ec,n&=~jn,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var g=31-Ge(d),v=1<<g;o[g]=-1,d&=~v}a!==0&&eh(e,a,n)}function Jr(){return(Nt&6)===0?(Ta(0),!1):!0}function Dc(){if(St!==null){if(zt===0)var e=St.return;else e=St,ki=Ln=null,Vl(e),ps=null,la=0,e=St;for(;e!==null;)wf(e.alternate,e),e=e.return;St=null}}function xs(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,yy(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Vi=0,Dc(),qt=e,St=a=Ni(e.current,null),Et=n,zt=0,$e=null,un=!1,_s=Vs(e,n),wc=!1,ws=Ke=Ec=jn=hn=te=0,ze=Ea=null,xc=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-Ge(o),g=1<<d;n|=e[d],o&=~g}return qi=n,Ar(),a}function Yf(e,n){bt=null,N.H=ma,n===gs||n===Mr?(n=ld(),zt=3):n===Ll?(n=ld(),zt=4):zt=n===oc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$e=n,St===null&&(te=1,jr(e,si(n,e.current)))}function $f(){var e=Xe.current;return e===null?!0:(Et&4194048)===Et?li===null:(Et&62914560)===Et||(Et&536870912)!==0?e===li:!1}function Kf(){var e=N.H;return N.H=ma,e===null?ma:e}function Qf(){var e=N.A;return N.A=K0,e}function to(){te=4,un||(Et&4194048)!==Et&&Xe.current!==null||(_s=!0),(hn&134217727)===0&&(jn&134217727)===0||qt===null||gn(qt,Et,Ke,!1)}function Rc(e,n,a){var o=Nt;Nt|=2;var d=Kf(),g=Qf();(qt!==e||Et!==n)&&(Wr=null,xs(e,n)),n=!1;var v=te;t:do try{if(zt!==0&&St!==null){var E=St,M=$e;switch(zt){case 8:Dc(),v=6;break t;case 3:case 2:case 9:case 6:Xe.current===null&&(n=!0);var U=zt;if(zt=0,$e=null,Ts(e,E,M,U),a&&_s){v=0;break t}break;default:U=zt,zt=0,$e=null,Ts(e,E,M,U)}}W0(),v=te;break}catch(V){Yf(e,V)}while(!0);return n&&e.shellSuspendCounter++,ki=Ln=null,Nt=o,N.H=d,N.A=g,St===null&&(qt=null,Et=0,Ar()),v}function W0(){for(;St!==null;)Zf(St)}function J0(e,n){var a=Nt;Nt|=2;var o=Kf(),d=Qf();qt!==e||Et!==n?(Wr=null,Zr=He()+500,xs(e,n)):_s=Vs(e,n);t:do try{if(zt!==0&&St!==null){n=St;var g=$e;e:switch(zt){case 1:zt=0,$e=null,Ts(e,n,g,1);break;case 2:case 9:if(rd(g)){zt=0,$e=null,Wf(n);break}n=function(){zt!==2&&zt!==9||qt!==e||(zt=7),_i(e)},g.then(n,n);break t;case 3:zt=7;break t;case 4:zt=5;break t;case 7:rd(g)?(zt=0,$e=null,Wf(n)):(zt=0,$e=null,Ts(e,n,g,7));break;case 5:var v=null;switch(St.tag){case 26:v=St.memoizedState;case 5:case 27:var E=St;if(v?Pg(v):E.stateNode.complete){zt=0,$e=null;var M=E.sibling;if(M!==null)St=M;else{var U=E.return;U!==null?(St=U,eo(U)):St=null}break e}}zt=0,$e=null,Ts(e,n,g,5);break;case 6:zt=0,$e=null,Ts(e,n,g,6);break;case 8:Dc(),te=6;break t;default:throw Error(s(462))}}ty();break}catch(V){Yf(e,V)}while(!0);return ki=Ln=null,N.H=o,N.A=d,Nt=a,St!==null?0:(qt=null,Et=0,Ar(),te)}function ty(){for(;St!==null&&!wm();)Zf(St)}function Zf(e){var n=Sf(e.alternate,e,qi);e.memoizedProps=e.pendingProps,n===null?eo(e):St=n}function Wf(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=pf(a,n,n.pendingProps,n.type,void 0,Et);break;case 11:n=pf(a,n,n.pendingProps,n.type.render,n.ref,Et);break;case 5:Vl(n);default:wf(a,n),n=St=Kh(n,qi),n=Sf(a,n,qi)}e.memoizedProps=e.pendingProps,n===null?eo(e):St=n}function Ts(e,n,a,o){ki=Ln=null,Vl(n),ps=null,la=0;var d=n.return;try{if(j0(e,d,n,a,Et)){te=1,jr(e,si(a,e.current)),St=null;return}}catch(g){if(d!==null)throw St=d,g;te=1,jr(e,si(a,e.current)),St=null;return}n.flags&32768?(Tt||o===1?e=!0:_s||(Et&536870912)!==0?e=!1:(un=e=!0,(o===2||o===9||o===3||o===6)&&(o=Xe.current,o!==null&&o.tag===13&&(o.flags|=16384))),Jf(n,e)):eo(n)}function eo(e){var n=e;do{if((n.flags&32768)!==0){Jf(n,un);return}e=n.return;var a=V0(n.alternate,n,qi);if(a!==null){St=a;return}if(n=n.sibling,n!==null){St=n;return}St=n=e}while(n!==null);te===0&&(te=5)}function Jf(e,n){do{var a=X0(e.alternate,e);if(a!==null){a.flags&=32767,St=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){St=e;return}St=e=a}while(e!==null);te=6,St=null}function tg(e,n,a,o,d,g,v,E,M){e.cancelPendingCommit=null;do io();while(he!==0);if((Nt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(g=n.lanes|n.childLanes,g|=bl,Lm(e,a,g,v,E,M),e===qt&&(St=qt=null,Et=0),Es=n,fn=e,Vi=a,Tc=g,Cc=d,Gf=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sy(sr,function(){return ag(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,d=q.p,q.p=2,v=Nt,Nt|=4;try{Y0(e,n,a)}finally{Nt=v,q.p=d,N.T=o}}he=1,eg(),ig(),ng()}}function eg(){if(he===1){he=0;var e=fn,n=Es,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=N.T,N.T=null;var o=q.p;q.p=2;var d=Nt;Nt|=4;try{Bf(n,e);var g=jc,v=Ih(e.containerInfo),E=g.focusedElem,M=g.selectionRange;if(v!==E&&E&&E.ownerDocument&&Uh(E.ownerDocument.documentElement,E)){if(M!==null&&fl(E)){var U=M.start,V=M.end;if(V===void 0&&(V=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(V,E.value.length);else{var Y=E.ownerDocument||document,I=Y&&Y.defaultView||window;if(I.getSelection){var j=I.getSelection(),st=E.textContent.length,ut=Math.min(M.start,st),jt=M.end===void 0?ut:Math.min(M.end,st);!j.extend&&ut>jt&&(v=jt,jt=ut,ut=v);var k=Fh(E,ut),R=Fh(E,jt);if(k&&R&&(j.rangeCount!==1||j.anchorNode!==k.node||j.anchorOffset!==k.offset||j.focusNode!==R.node||j.focusOffset!==R.offset)){var F=Y.createRange();F.setStart(k.node,k.offset),j.removeAllRanges(),ut>jt?(j.addRange(F),j.extend(R.node,R.offset)):(F.setEnd(R.node,R.offset),j.addRange(F))}}}}for(Y=[],j=E;j=j.parentNode;)j.nodeType===1&&Y.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var X=Y[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}po=!!Hc,jc=Hc=null}finally{Nt=d,q.p=o,N.T=a}}e.current=n,he=2}}function ig(){if(he===2){he=0;var e=fn,n=Es,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=N.T,N.T=null;var o=q.p;q.p=2;var d=Nt;Nt|=4;try{Rf(e,n.alternate,n)}finally{Nt=d,q.p=o,N.T=a}}he=3}}function ng(){if(he===4||he===3){he=0,Em();var e=fn,n=Es,a=Vi,o=Gf;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?he=5:(he=0,Es=fn=null,sg(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(dn=null),$o(a),n=n.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(qs,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=N.T,d=q.p,q.p=2,N.T=null;try{for(var g=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];g(E.value,{componentStack:E.stack})}}finally{N.T=n,q.p=d}}(Vi&3)!==0&&io(),_i(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===Mc?xa++:(xa=0,Mc=e):xa=0,Ta(0)}}function sg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ra(n)))}function io(){return eg(),ig(),ng(),ag()}function ag(){if(he!==5)return!1;var e=fn,n=Tc;Tc=0;var a=$o(Vi),o=N.T,d=q.p;try{q.p=32>a?32:a,N.T=null,a=Cc,Cc=null;var g=fn,v=Vi;if(he=0,Es=fn=null,Vi=0,(Nt&6)!==0)throw Error(s(331));var E=Nt;if(Nt|=4,If(g.current),Pf(g,g.current,v,a),Nt=E,Ta(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(qs,g)}catch{}return!0}finally{q.p=d,N.T=o,sg(e,n)}}function rg(e,n,a){n=si(a,n),n=rc(e.stateNode,n,2),e=rn(e,n,2),e!==null&&(Xs(e,2),_i(e))}function Pt(e,n,a){if(e.tag===3)rg(e,e,a);else for(;n!==null;){if(n.tag===3){rg(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(dn===null||!dn.has(o))){e=si(a,e),a=of(2),o=rn(n,a,2),o!==null&&(lf(a,o,n,e),Xs(o,2),_i(o));break}}n=n.return}}function Oc(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Q0;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(a)||(wc=!0,d.add(a),e=ey.bind(null,e,n,a),n.then(e,e))}function ey(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qt===e&&(Et&a)===a&&(te===4||te===3&&(Et&62914560)===Et&&300>He()-Qr?(Nt&2)===0&&xs(e,0):Ec|=a,ws===Et&&(ws=0)),_i(e)}function og(e,n){n===0&&(n=th()),e=Rn(e,n),e!==null&&(Xs(e,n),_i(e))}function iy(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),og(e,a)}function ny(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),og(e,a)}function sy(e,n){return qo(e,n)}var no=null,Cs=null,Nc=!1,so=!1,Lc=!1,pn=0;function _i(e){e!==Cs&&e.next===null&&(Cs===null?no=Cs=e:Cs=Cs.next=e),so=!0,Nc||(Nc=!0,ry())}function Ta(e,n){if(!Lc&&so){Lc=!0;do for(var a=!1,o=no;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var g=0;else{var v=o.suspendedLanes,E=o.pingedLanes;g=(1<<31-Ge(42|e)+1)-1,g&=d&~(v&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,hg(o,g))}else g=Et,g=lr(o,o===qt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||Vs(o,g)||(a=!0,hg(o,g));o=o.next}while(a);Lc=!1}}function ay(){lg()}function lg(){so=Nc=!1;var e=0;pn!==0&&my()&&(e=pn);for(var n=He(),a=null,o=no;o!==null;){var d=o.next,g=cg(o,n);g===0?(o.next=null,a===null?no=d:a.next=d,d===null&&(Cs=a)):(a=o,(e!==0||(g&3)!==0)&&(so=!0)),o=d}he!==0&&he!==5||Ta(e),pn!==0&&(pn=0)}function cg(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var v=31-Ge(g),E=1<<v,M=d[v];M===-1?((E&a)===0||(E&o)!==0)&&(d[v]=Nm(E,n)):M<=n&&(e.expiredLanes|=E),g&=~E}if(n=qt,a=Et,a=lr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(zt===2||zt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Vo(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Vs(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Vo(o),$o(a)){case 2:case 8:a=Wu;break;case 32:a=sr;break;case 268435456:a=Ju;break;default:a=sr}return o=ug.bind(null,e),a=qo(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Vo(o),e.callbackPriority=2,e.callbackNode=null,2}function ug(e,n){if(he!==0&&he!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(io()&&e.callbackNode!==a)return null;var o=Et;return o=lr(e,e===qt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Vf(e,o,n),cg(e,He()),e.callbackNode!=null&&e.callbackNode===a?ug.bind(null,e):null)}function hg(e,n){if(io())return null;Vf(e,n,!0)}function ry(){by(function(){(Nt&6)!==0?qo(Zu,ay):lg()})}function kc(){if(pn===0){var e=ds;e===0&&(e=ar,ar<<=1,(ar&261888)===0&&(ar=256)),pn=e}return pn}function dg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:dr(""+e)}function fg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function oy(e,n,a,o,d){if(n==="submit"&&a&&a.stateNode===d){var g=dg((d[Oe]||null).action),v=o.submitter;v&&(n=(n=v[Oe]||null)?dg(n.formAction):v.getAttribute("formAction"),n!==null&&(g=n,v=null));var E=new mr("action","action",null,o,d);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(pn!==0){var M=v?fg(d,v):new FormData(d);tc(a,{pending:!0,data:M,method:d.method,action:g},null,M)}}else typeof g=="function"&&(E.preventDefault(),M=v?fg(d,v):new FormData(d),tc(a,{pending:!0,data:M,method:d.method,action:g},g,M))},currentTarget:d}]})}}for(var Bc=0;Bc<yl.length;Bc++){var zc=yl[Bc],ly=zc.toLowerCase(),cy=zc[0].toUpperCase()+zc.slice(1);pi(ly,"on"+cy)}pi(Gh,"onAnimationEnd"),pi(qh,"onAnimationIteration"),pi(Vh,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(x0,"onTransitionRun"),pi(T0,"onTransitionStart"),pi(C0,"onTransitionCancel"),pi(Xh,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ca));function gg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],d=o.event;o=o.listeners;t:{var g=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],M=E.instance,U=E.currentTarget;if(E=E.listener,M!==g&&d.isPropagationStopped())break t;g=E,d.currentTarget=U;try{g(d)}catch(V){vr(V)}d.currentTarget=null,g=M}else for(v=0;v<o.length;v++){if(E=o[v],M=E.instance,U=E.currentTarget,E=E.listener,M!==g&&d.isPropagationStopped())break t;g=E,d.currentTarget=U;try{g(d)}catch(V){vr(V)}d.currentTarget=null,g=M}}}}function _t(e,n){var a=n[Ko];a===void 0&&(a=n[Ko]=new Set);var o=e+"__bubble";a.has(o)||(pg(n,e,2,!1),a.add(o))}function Pc(e,n,a){var o=0;n&&(o|=4),pg(a,e,o,n)}var ao="_reactListening"+Math.random().toString(36).slice(2);function Fc(e){if(!e[ao]){e[ao]=!0,oh.forEach(function(a){a!=="selectionchange"&&(uy.has(a)||Pc(a,!1,e),Pc(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ao]||(n[ao]=!0,Pc("selectionchange",!1,n))}}function pg(e,n,a,o){switch(qg(n)){case 2:var d=Fy;break;case 8:d=Uy;break;default:d=Jc}a=d.bind(null,n,a,e),d=void 0,!sl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,a,{capture:!0,passive:d}):e.addEventListener(n,a,!0):d!==void 0?e.addEventListener(n,a,{passive:d}):e.addEventListener(n,a,!1)}function Uc(e,n,a,o,d){var g=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===d)break;if(v===4)for(v=o.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;E!==null;){if(v=Kn(E),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){o=g=v;continue t}E=E.parentNode}}o=o.return}vh(function(){var U=g,V=il(a),Y=[];t:{var I=Yh.get(e);if(I!==void 0){var j=mr,st=e;switch(e){case"keypress":if(gr(a)===0)break t;case"keydown":case"keyup":j=n0;break;case"focusin":st="focus",j=ll;break;case"focusout":st="blur",j=ll;break;case"beforeblur":case"afterblur":j=ll;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=_h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Vm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=r0;break;case Gh:case qh:case Vh:j=$m;break;case Xh:j=l0;break;case"scroll":case"scrollend":j=Gm;break;case"wheel":j=u0;break;case"copy":case"cut":case"paste":j=Qm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Eh;break;case"toggle":case"beforetoggle":j=d0}var ut=(n&4)!==0,jt=!ut&&(e==="scroll"||e==="scrollend"),k=ut?I!==null?I+"Capture":null:I;ut=[];for(var R=U,F;R!==null;){var X=R;if(F=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||F===null||k===null||(X=Ks(R,k),X!=null&&ut.push(Ma(R,X,F))),jt)break;R=R.return}0<ut.length&&(I=new j(I,st,null,a,V),Y.push({event:I,listeners:ut}))}}if((n&7)===0){t:{if(I=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",I&&a!==el&&(st=a.relatedTarget||a.fromElement)&&(Kn(st)||st[$n]))break t;if((j||I)&&(I=V.window===V?V:(I=V.ownerDocument)?I.defaultView||I.parentWindow:window,j?(st=a.relatedTarget||a.toElement,j=U,st=st?Kn(st):null,st!==null&&(jt=l(st),ut=st.tag,st!==jt||ut!==5&&ut!==27&&ut!==6)&&(st=null)):(j=null,st=U),j!==st)){if(ut=_h,X="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(ut=Eh,X="onPointerLeave",k="onPointerEnter",R="pointer"),jt=j==null?I:$s(j),F=st==null?I:$s(st),I=new ut(X,R+"leave",j,a,V),I.target=jt,I.relatedTarget=F,X=null,Kn(V)===U&&(ut=new ut(k,R+"enter",st,a,V),ut.target=F,ut.relatedTarget=jt,X=ut),jt=X,j&&st)e:{for(ut=hy,k=j,R=st,F=0,X=k;X;X=ut(X))F++;X=0;for(var ot=R;ot;ot=ut(ot))X++;for(;0<F-X;)k=ut(k),F--;for(;0<X-F;)R=ut(R),X--;for(;F--;){if(k===R||R!==null&&k===R.alternate){ut=k;break e}k=ut(k),R=ut(R)}ut=null}else ut=null;j!==null&&mg(Y,I,j,ut,!1),st!==null&&jt!==null&&mg(Y,jt,st,ut,!0)}}t:{if(I=U?$s(U):window,j=I.nodeName&&I.nodeName.toLowerCase(),j==="select"||j==="input"&&I.type==="file")var Rt=Nh;else if(Rh(I))if(Lh)Rt=_0;else{Rt=A0;var rt=v0}else j=I.nodeName,!j||j.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?U&&tl(U.elementType)&&(Rt=Nh):Rt=S0;if(Rt&&(Rt=Rt(e,U))){Oh(Y,Rt,a,V);break t}rt&&rt(e,I,U),e==="focusout"&&U&&I.type==="number"&&U.memoizedProps.value!=null&&Jo(I,"number",I.value)}switch(rt=U?$s(U):window,e){case"focusin":(Rh(rt)||rt.contentEditable==="true")&&(ss=rt,gl=U,na=null);break;case"focusout":na=gl=ss=null;break;case"mousedown":pl=!0;break;case"contextmenu":case"mouseup":case"dragend":pl=!1,Hh(Y,a,V);break;case"selectionchange":if(E0)break;case"keydown":case"keyup":Hh(Y,a,V)}var vt;if(ul)t:{switch(e){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else ns?Mh(e,a)&&(xt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(xt="onCompositionStart");xt&&(xh&&a.locale!=="ko"&&(ns||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ns&&(vt=Ah()):(Wi=V,al="value"in Wi?Wi.value:Wi.textContent,ns=!0)),rt=ro(U,xt),0<rt.length&&(xt=new wh(xt,e,null,a,V),Y.push({event:xt,listeners:rt}),vt?xt.data=vt:(vt=Dh(a),vt!==null&&(xt.data=vt)))),(vt=g0?p0(e,a):m0(e,a))&&(xt=ro(U,"onBeforeInput"),0<xt.length&&(rt=new wh("onBeforeInput","beforeinput",null,a,V),Y.push({event:rt,listeners:xt}),rt.data=vt)),oy(Y,e,U,a,V)}gg(Y,n)})}function Ma(e,n,a){return{instance:e,listener:n,currentTarget:a}}function ro(e,n){for(var a=n+"Capture",o=[];e!==null;){var d=e,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Ks(e,a),d!=null&&o.unshift(Ma(e,d,g)),d=Ks(e,n),d!=null&&o.push(Ma(e,d,g))),e.tag===3)return o;e=e.return}return[]}function hy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mg(e,n,a,o,d){for(var g=n._reactName,v=[];a!==null&&a!==o;){var E=a,M=E.alternate,U=E.stateNode;if(E=E.tag,M!==null&&M===o)break;E!==5&&E!==26&&E!==27||U===null||(M=U,d?(U=Ks(a,g),U!=null&&v.unshift(Ma(a,U,M))):d||(U=Ks(a,g),U!=null&&v.push(Ma(a,U,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var dy=/\r\n?/g,fy=/\u0000|\uFFFD/g;function yg(e){return(typeof e=="string"?e:""+e).replace(dy,`
`).replace(fy,"")}function bg(e,n){return n=yg(n),yg(e)===n}function Ht(e,n,a,o,d,g){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ts(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ts(e,""+o);break;case"className":ur(e,"class",o);break;case"tabIndex":ur(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(e,a,o);break;case"style":yh(e,o,g);break;case"data":if(n!=="object"){ur(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=dr(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(n!=="input"&&Ht(e,n,"name",d.name,d,null),Ht(e,n,"formEncType",d.formEncType,d,null),Ht(e,n,"formMethod",d.formMethod,d,null),Ht(e,n,"formTarget",d.formTarget,d,null)):(Ht(e,n,"encType",d.encType,d,null),Ht(e,n,"method",d.method,d,null),Ht(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=dr(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Ri);break;case"onScroll":o!=null&&_t("scroll",e);break;case"onScrollEnd":o!=null&&_t("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=dr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":_t("beforetoggle",e),_t("toggle",e),cr(e,"popover",o);break;case"xlinkActuate":Di(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Di(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Di(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Di(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Di(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Di(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Di(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Di(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Di(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":cr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Hm.get(a)||a,cr(e,a,o))}}function Ic(e,n,a,o,d,g){switch(a){case"style":yh(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?ts(e,o):(typeof o=="number"||typeof o=="bigint")&&ts(e,""+o);break;case"onScroll":o!=null&&_t("scroll",e);break;case"onScrollEnd":o!=null&&_t("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),n=a.slice(2,d?a.length-7:void 0),g=e[Oe]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(n,g,d),typeof o=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,d);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):cr(e,a,o)}}}function we(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",e),_t("load",e);var o=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var v=a[g];if(v!=null)switch(g){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ht(e,n,g,v,a,null)}}d&&Ht(e,n,"srcSet",a.srcSet,a,null),o&&Ht(e,n,"src",a.src,a,null);return;case"input":_t("invalid",e);var E=g=v=d=null,M=null,U=null;for(o in a)if(a.hasOwnProperty(o)){var V=a[o];if(V!=null)switch(o){case"name":d=V;break;case"type":v=V;break;case"checked":M=V;break;case"defaultChecked":U=V;break;case"value":g=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:Ht(e,n,o,V,a,null)}}fh(e,g,E,M,U,v,d,!1);return;case"select":_t("invalid",e),o=v=g=null;for(d in a)if(a.hasOwnProperty(d)&&(E=a[d],E!=null))switch(d){case"value":g=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Ht(e,n,d,E,a,null)}n=g,a=v,e.multiple=!!o,n!=null?Jn(e,!!o,n,!1):a!=null&&Jn(e,!!o,a,!0);return;case"textarea":_t("invalid",e),g=d=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":d=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Ht(e,n,v,E,a,null)}ph(e,o,d,g);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(o=a[M],o!=null))switch(M){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ht(e,n,M,o,a,null)}return;case"dialog":_t("beforetoggle",e),_t("toggle",e),_t("cancel",e),_t("close",e);break;case"iframe":case"object":_t("load",e);break;case"video":case"audio":for(o=0;o<Ca.length;o++)_t(Ca[o],e);break;case"image":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"embed":case"source":case"link":_t("error",e),_t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(o=a[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ht(e,n,U,o,a,null)}return;default:if(tl(n)){for(V in a)a.hasOwnProperty(V)&&(o=a[V],o!==void 0&&Ic(e,n,V,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Ht(e,n,E,o,a,null))}function gy(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,v=null,E=null,M=null,U=null,V=null;for(j in a){var Y=a[j];if(a.hasOwnProperty(j)&&Y!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":M=Y;default:o.hasOwnProperty(j)||Ht(e,n,j,null,o,Y)}}for(var I in o){var j=o[I];if(Y=a[I],o.hasOwnProperty(I)&&(j!=null||Y!=null))switch(I){case"type":g=j;break;case"name":d=j;break;case"checked":U=j;break;case"defaultChecked":V=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:j!==Y&&Ht(e,n,I,j,o,Y)}}Wo(e,v,E,M,U,V,g,d);return;case"select":j=v=E=I=null;for(g in a)if(M=a[g],a.hasOwnProperty(g)&&M!=null)switch(g){case"value":break;case"multiple":j=M;default:o.hasOwnProperty(g)||Ht(e,n,g,null,o,M)}for(d in o)if(g=o[d],M=a[d],o.hasOwnProperty(d)&&(g!=null||M!=null))switch(d){case"value":I=g;break;case"defaultValue":E=g;break;case"multiple":v=g;default:g!==M&&Ht(e,n,d,g,o,M)}n=E,a=v,o=j,I!=null?Jn(e,!!a,I,!1):!!o!=!!a&&(n!=null?Jn(e,!!a,n,!0):Jn(e,!!a,a?[]:"",!1));return;case"textarea":j=I=null;for(E in a)if(d=a[E],a.hasOwnProperty(E)&&d!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ht(e,n,E,null,o,d)}for(v in o)if(d=o[v],g=a[v],o.hasOwnProperty(v)&&(d!=null||g!=null))switch(v){case"value":I=d;break;case"defaultValue":j=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==g&&Ht(e,n,v,d,o,g)}gh(e,I,j);return;case"option":for(var st in a)if(I=a[st],a.hasOwnProperty(st)&&I!=null&&!o.hasOwnProperty(st))switch(st){case"selected":e.selected=!1;break;default:Ht(e,n,st,null,o,I)}for(M in o)if(I=o[M],j=a[M],o.hasOwnProperty(M)&&I!==j&&(I!=null||j!=null))switch(M){case"selected":e.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Ht(e,n,M,I,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in a)I=a[ut],a.hasOwnProperty(ut)&&I!=null&&!o.hasOwnProperty(ut)&&Ht(e,n,ut,null,o,I);for(U in o)if(I=o[U],j=a[U],o.hasOwnProperty(U)&&I!==j&&(I!=null||j!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,n));break;default:Ht(e,n,U,I,o,j)}return;default:if(tl(n)){for(var jt in a)I=a[jt],a.hasOwnProperty(jt)&&I!==void 0&&!o.hasOwnProperty(jt)&&Ic(e,n,jt,void 0,o,I);for(V in o)I=o[V],j=a[V],!o.hasOwnProperty(V)||I===j||I===void 0&&j===void 0||Ic(e,n,V,I,o,j);return}}for(var k in a)I=a[k],a.hasOwnProperty(k)&&I!=null&&!o.hasOwnProperty(k)&&Ht(e,n,k,null,o,I);for(Y in o)I=o[Y],j=a[Y],!o.hasOwnProperty(Y)||I===j||I==null&&j==null||Ht(e,n,Y,I,o,j)}function vg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function py(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var d=a[o],g=d.transferSize,v=d.initiatorType,E=d.duration;if(g&&E&&vg(v)){for(v=0,E=d.responseEnd,o+=1;o<a.length;o++){var M=a[o],U=M.startTime;if(U>E)break;var V=M.transferSize,Y=M.initiatorType;V&&vg(Y)&&(M=M.responseEnd,v+=V*(M<E?1:(E-U)/(M-U)))}if(--o,n+=8*(g+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hc=null,jc=null;function oo(e){return e.nodeType===9?e:e.ownerDocument}function Ag(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Gc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qc=null;function my(){var e=window.event;return e&&e.type==="popstate"?e===qc?!1:(qc=e,!0):(qc=null,!1)}var _g=typeof setTimeout=="function"?setTimeout:void 0,yy=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,by=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(e){return wg.resolve(null).then(e).catch(vy)}:_g;function vy(e){setTimeout(function(){throw e})}function mn(e){return e==="head"}function Eg(e,n){var a=n,o=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(d),Os(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Da(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Da(a);for(var g=a.firstChild;g;){var v=g.nextSibling,E=g.nodeName;g[Ys]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=v}}else a==="body"&&Da(e.ownerDocument.body);a=d}while(a);Os(n)}function xg(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Vc(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Vc(a),Qo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Ay(e,n,a,o){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ys])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=ci(e.nextSibling),e===null)break}return null}function Sy(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ci(e.nextSibling),e===null))return null;return e}function Tg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ci(e.nextSibling),e===null))return null;return e}function Xc(e){return e.data==="$?"||e.data==="$~"}function Yc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _y(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ci(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var $c=null;function Cg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return ci(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Mg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Dg(e,n,a){switch(n=oo(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Da(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Qo(e)}var ui=new Map,Rg=new Set;function lo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xi=q.d;q.d={f:wy,r:Ey,D:xy,C:Ty,L:Cy,m:My,X:Ry,S:Dy,M:Oy};function wy(){var e=Xi.f(),n=Jr();return e||n}function Ey(e){var n=Qn(e);n!==null&&n.tag===5&&n.type==="form"?Xd(n):Xi.r(e)}var Ms=typeof document>"u"?null:document;function Og(e,n,a){var o=Ms;if(o&&typeof n=="string"&&n){var d=ii(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Rg.has(d)||(Rg.add(d),e={rel:e,crossOrigin:a,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),we(n,"link",e),pe(n),o.head.appendChild(n)))}}function xy(e){Xi.D(e),Og("dns-prefetch",e,null)}function Ty(e,n){Xi.C(e,n),Og("preconnect",e,n)}function Cy(e,n,a){Xi.L(e,n,a);var o=Ms;if(o&&e&&n){var d='link[rel="preload"][as="'+ii(n)+'"]';n==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+ii(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+ii(a.imageSizes)+'"]')):d+='[href="'+ii(e)+'"]';var g=d;switch(n){case"style":g=Ds(e);break;case"script":g=Rs(e)}ui.has(g)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ui.set(g,e),o.querySelector(d)!==null||n==="style"&&o.querySelector(Ra(g))||n==="script"&&o.querySelector(Oa(g))||(n=o.createElement("link"),we(n,"link",e),pe(n),o.head.appendChild(n)))}}function My(e,n){Xi.m(e,n);var a=Ms;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+ii(o)+'"][href="'+ii(e)+'"]',g=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Rs(e)}if(!ui.has(g)&&(e=y({rel:"modulepreload",href:e},n),ui.set(g,e),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Oa(g)))return}o=a.createElement("link"),we(o,"link",e),pe(o),a.head.appendChild(o)}}}function Dy(e,n,a){Xi.S(e,n,a);var o=Ms;if(o&&e){var d=Zn(o).hoistableStyles,g=Ds(e);n=n||"default";var v=d.get(g);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(Ra(g)))E.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ui.get(g))&&Kc(e,a);var M=v=o.createElement("link");pe(M),we(M,"link",e),M._p=new Promise(function(U,V){M.onload=U,M.onerror=V}),M.addEventListener("load",function(){E.loading|=1}),M.addEventListener("error",function(){E.loading|=2}),E.loading|=4,co(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},d.set(g,v)}}}function Ry(e,n){Xi.X(e,n);var a=Ms;if(a&&e){var o=Zn(a).hoistableScripts,d=Rs(e),g=o.get(d);g||(g=a.querySelector(Oa(d)),g||(e=y({src:e,async:!0},n),(n=ui.get(d))&&Qc(e,n),g=a.createElement("script"),pe(g),we(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(d,g))}}function Oy(e,n){Xi.M(e,n);var a=Ms;if(a&&e){var o=Zn(a).hoistableScripts,d=Rs(e),g=o.get(d);g||(g=a.querySelector(Oa(d)),g||(e=y({src:e,async:!0,type:"module"},n),(n=ui.get(d))&&Qc(e,n),g=a.createElement("script"),pe(g),we(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(d,g))}}function Ng(e,n,a,o){var d=(d=nt.current)?lo(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ds(a.href),a=Zn(d).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ds(a.href);var g=Zn(d).hoistableStyles,v=g.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,v),(g=d.querySelector(Ra(e)))&&!g._p&&(v.instance=g,v.state.loading=5),ui.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ui.set(e,a),g||Ny(d,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Rs(a),a=Zn(d).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ds(e){return'href="'+ii(e)+'"'}function Ra(e){return'link[rel="stylesheet"]['+e+"]"}function Lg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Ny(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),we(n,"link",a),pe(n),e.head.appendChild(n))}function Rs(e){return'[src="'+ii(e)+'"]'}function Oa(e){return"script[async]"+e}function kg(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ii(a.href)+'"]');if(o)return n.instance=o,pe(o),o;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),pe(o),we(o,"style",d),co(o,a.precedence,e),n.instance=o;case"stylesheet":d=Ds(a.href);var g=e.querySelector(Ra(d));if(g)return n.state.loading|=4,n.instance=g,pe(g),g;o=Lg(a),(d=ui.get(d))&&Kc(o,d),g=(e.ownerDocument||e).createElement("link"),pe(g);var v=g;return v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),we(g,"link",o),n.state.loading|=4,co(g,a.precedence,e),n.instance=g;case"script":return g=Rs(a.src),(d=e.querySelector(Oa(g)))?(n.instance=d,pe(d),d):(o=a,(d=ui.get(g))&&(o=y({},a),Qc(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),pe(d),we(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,co(o,a.precedence,e));return n.instance}function co(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,g=d,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)g=E;else if(g!==d)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Kc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Qc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var uo=null;function Bg(e,n,a){if(uo===null){var o=new Map,d=uo=new Map;d.set(a,o)}else d=uo,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var g=a[d];if(!(g[Ys]||g[ve]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(g):o.set(v,[g])}}return o}function zg(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Ly(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Pg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ky(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ds(o.href),g=n.querySelector(Ra(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=ho.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=g,pe(g);return}g=n.ownerDocument||n,o=Lg(o),(d=ui.get(d))&&Kc(o,d),g=g.createElement("link"),pe(g);var v=g;v._p=new Promise(function(E,M){v.onload=E,v.onerror=M}),we(g,"link",o),a.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ho.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Zc=0;function By(e,n){return e.stylesheets&&e.count===0&&go(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&go(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+n);0<e.imgBytes&&Zc===0&&(Zc=62500*py());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&go(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Zc?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function ho(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)go(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fo=null;function go(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fo=new Map,n.forEach(zy,e),fo=null,ho.call(e))}function zy(e,n){if(!(n.state.loading&4)){var a=fo.get(e);if(a)var o=a.get(null);else{a=new Map,fo.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var v=d[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}d=n.instance,v=d.getAttribute("data-precedence"),g=a.get(v)||o,g===o&&a.set(null,d),a.set(v,d),this.count++,o=ho.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),g?g.parentNode.insertBefore(d,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Na={$$typeof:T,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Py(e,n,a,o,d,g,v,E,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xo(0),this.hiddenUpdates=Xo(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Fg(e,n,a,o,d,g,v,E,M,U,V,Y){return e=new Py(e,n,a,v,M,U,V,Y,E),n=1,g===!0&&(n|=24),g=Ve(3,null,null,n),e.current=g,g.stateNode=e,n=Rl(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:o,isDehydrated:a,cache:n},kl(g),e}function Ug(e){return e?(e=os,e):os}function Ig(e,n,a,o,d,g){d=Ug(d),o.context===null?o.context=d:o.pendingContext=d,o=an(n),o.payload={element:a},g=g===void 0?null:g,g!==null&&(o.callback=g),a=rn(e,o,n),a!==null&&(Pe(a,e,n),ua(a,e,n))}function Hg(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Wc(e,n){Hg(e,n),(e=e.alternate)&&Hg(e,n)}function jg(e){if(e.tag===13||e.tag===31){var n=Rn(e,67108864);n!==null&&Pe(n,e,67108864),Wc(e,67108864)}}function Gg(e){if(e.tag===13||e.tag===31){var n=Qe();n=Yo(n);var a=Rn(e,n);a!==null&&Pe(a,e,n),Wc(e,n)}}var po=!0;function Fy(e,n,a,o){var d=N.T;N.T=null;var g=q.p;try{q.p=2,Jc(e,n,a,o)}finally{q.p=g,N.T=d}}function Uy(e,n,a,o){var d=N.T;N.T=null;var g=q.p;try{q.p=8,Jc(e,n,a,o)}finally{q.p=g,N.T=d}}function Jc(e,n,a,o){if(po){var d=tu(o);if(d===null)Uc(e,n,o,mo,a),Vg(e,o);else if(Hy(d,e,n,a,o))o.stopPropagation();else if(Vg(e,o),n&4&&-1<Iy.indexOf(e)){for(;d!==null;){var g=Qn(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=xn(g.pendingLanes);if(v!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var M=1<<31-Ge(v);E.entanglements[1]|=M,v&=~M}_i(g),(Nt&6)===0&&(Zr=He()+500,Ta(0))}}break;case 31:case 13:E=Rn(g,2),E!==null&&Pe(E,g,2),Jr(),Wc(g,2)}if(g=tu(o),g===null&&Uc(e,n,o,mo,a),g===d)break;d=g}d!==null&&o.stopPropagation()}else Uc(e,n,o,null,a)}}function tu(e){return e=il(e),eu(e)}var mo=null;function eu(e){if(mo=null,e=Kn(e),e!==null){var n=l(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return mo=e,null}function qg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xm()){case Zu:return 2;case Wu:return 8;case sr:case Tm:return 32;case Ju:return 268435456;default:return 32}default:return 32}}var iu=!1,yn=null,bn=null,vn=null,La=new Map,ka=new Map,An=[],Iy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vg(e,n){switch(e){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":La.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(n.pointerId)}}function Ba(e,n,a,o,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:g,targetContainers:[d]},n!==null&&(n=Qn(n),n!==null&&jg(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function Hy(e,n,a,o,d){switch(n){case"focusin":return yn=Ba(yn,e,n,a,o,d),!0;case"dragenter":return bn=Ba(bn,e,n,a,o,d),!0;case"mouseover":return vn=Ba(vn,e,n,a,o,d),!0;case"pointerover":var g=d.pointerId;return La.set(g,Ba(La.get(g)||null,e,n,a,o,d)),!0;case"gotpointercapture":return g=d.pointerId,ka.set(g,Ba(ka.get(g)||null,e,n,a,o,d)),!0}return!1}function Xg(e){var n=Kn(e.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,ah(e.priority,function(){Gg(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,ah(e.priority,function(){Gg(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=tu(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);el=o,a.target.dispatchEvent(o),el=null}else return n=Qn(a),n!==null&&jg(n),e.blockedOn=a,!1;n.shift()}return!0}function Yg(e,n,a){yo(e)&&a.delete(n)}function jy(){iu=!1,yn!==null&&yo(yn)&&(yn=null),bn!==null&&yo(bn)&&(bn=null),vn!==null&&yo(vn)&&(vn=null),La.forEach(Yg),ka.forEach(Yg)}function bo(e,n){e.blockedOn===n&&(e.blockedOn=null,iu||(iu=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,jy)))}var vo=null;function $g(e){vo!==e&&(vo=e,m.unstable_scheduleCallback(m.unstable_NormalPriority,function(){vo===e&&(vo=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(eu(o||a)===null)continue;break}var g=Qn(a);g!==null&&(e.splice(n,3),n-=3,tc(g,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function Os(e){function n(M){return bo(M,e)}yn!==null&&bo(yn,e),bn!==null&&bo(bn,e),vn!==null&&bo(vn,e),La.forEach(n),ka.forEach(n);for(var a=0;a<An.length;a++){var o=An[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<An.length&&(a=An[0],a.blockedOn===null);)Xg(a),a.blockedOn===null&&An.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],g=a[o+1],v=d[Oe]||null;if(typeof g=="function")v||$g(a);else if(v){var E=null;if(g&&g.hasAttribute("formAction")){if(d=g,v=g[Oe]||null)E=v.formAction;else if(eu(d)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),$g(a)}}}function Kg(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function nu(e){this._internalRoot=e}Ao.prototype.render=nu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=Qe();Ig(a,o,e,n,null,null)},Ao.prototype.unmount=nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ig(e.current,2,null,e,null,null),Jr(),n[$n]=null}};function Ao(e){this._internalRoot=e}Ao.prototype.unstable_scheduleHydration=function(e){if(e){var n=sh();e={blockedOn:null,target:e,priority:n};for(var a=0;a<An.length&&n!==0&&n<An[a].priority;a++);An.splice(a,0,e),a===0&&Xg(e)}};var Qg=t.version;if(Qg!=="19.2.3")throw Error(s(527,Qg,"19.2.3"));q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Gy={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{qs=So.inject(Gy),je=So}catch{}}return Pa.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,o="",d=nf,g=sf,v=af;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Fg(e,1,!1,null,null,a,o,null,d,g,v,Kg),e[$n]=n.current,Fc(e),new nu(n)},Pa.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var o=!1,d="",g=nf,v=sf,E=af,M=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=Fg(e,1,!0,n,a??null,o,d,M,g,v,E,Kg),n.context=Ug(null),a=n.current,o=Qe(),o=Yo(o),d=an(o),d.callback=null,rn(a,d,o),a=o,n.current.lanes=a,Xs(n,a),_i(n),e[$n]=n.current,Fc(e),new Ao(n)},Pa.version="19.2.3",Pa}var rp;function tb(){if(rp)return ru.exports;rp=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(t){console.error(t)}}return m(),ru.exports=Jy(),ru.exports}var eb=tb();const ib=jp(eb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=m=>m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sb=m=>m.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,s)=>s?s.toUpperCase():i.toLowerCase()),op=m=>{const t=sb(m);return t.charAt(0).toUpperCase()+t.slice(1)},Gp=(...m)=>m.filter((t,i,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===i).join(" ").trim(),ab=m=>{for(const t in m)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Zt.forwardRef(({color:m="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...u},h)=>Zt.createElement("svg",{ref:h,...rb,width:t,height:t,stroke:m,strokeWidth:s?Number(i)*24/Number(t):i,className:Gp("lucide",r),...!l&&!ab(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,p])=>Zt.createElement(f,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(m,t)=>{const i=Zt.forwardRef(({className:s,...r},l)=>Zt.createElement(ob,{ref:l,iconNode:t,className:Gp(`lucide-${nb(op(m))}`,`lucide-${m}`,s),...r}));return i.displayName=op(m),i};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cb=ge("arrow-left",lb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],hb=ge("book-open",ub);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fb=ge("circle-alert",db);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],lp=ge("external-link",gb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cp=ge("eye-off",pb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],up=ge("eye",mb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],bb=ge("gauge",yb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Ab=ge("headphones",vb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hp=ge("loader-circle",Sb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],wb=ge("moon",_b);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],xb=ge("pause",Eb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Cb=ge("play",Tb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Db=ge("save",Mb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dp=ge("settings",Rb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],uu=ge("sparkles",Ob);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Lb=ge("sun",Nb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Bb=ge("upload",kb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fp=ge("user",zb);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Fb=ge("volume-2",Pb);var Va=(m=>(m.TEXT="text",m.DESCRIPTION="description",m))(Va||{}),Ft=(m=>(m.IDLE="IDLE",m.UPLOADING="UPLOADING",m.PARSING_PDF="PARSING_PDF",m.EXTRACTING_SECTIONS="EXTRACTING_SECTIONS",m.PROCESSING_SECTION="PROCESSING_SECTION",m.GENERATING_VOICE="GENERATING_VOICE",m.PLAYING="PLAYING",m.PAUSED="PAUSED",m.COMPLETED="COMPLETED",m.ERROR="ERROR",m))(Ft||{});const De=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Au=[.001,0,0,.001,0,0],hu=1.35,Ze={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_n={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ya="pdfjs_internal_editor_",yt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Ub={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Su={TRIANGLES:1,LATTICE:2},de={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Oo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ls={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Bo={ERRORS:0,WARNINGS:1,INFOS:5},$a={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Fa={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Ib={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let zo=Bo.WARNINGS;function Hb(m){Number.isInteger(m)&&(zo=m)}function jb(){return zo}function Po(m){zo>=Bo.INFOS&&console.info(`Info: ${m}`)}function pt(m){zo>=Bo.WARNINGS&&console.warn(`Warning: ${m}`)}function Vt(m){throw new Error(m)}function Mt(m,t){m||Vt(t)}function Gb(m){switch(m?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qp(m,t=null,i=null){if(!m)return null;if(i&&typeof m=="string"&&(i.addDefaultProtocol&&m.startsWith("www.")&&m.match(/\./g)?.length>=2&&(m=`http://${m}`),i.tryConvertEncoding))try{m=$b(m)}catch{}const s=t?URL.parse(m,t):URL.parse(m);return Gb(s)?s:null}function Vp(m,t,i=!1){const s=URL.parse(m);return s?(s.hash=t,s.href):i&&qp(m,"http://example.com")?m.split("#",1)[0]+`${t?`#${t}`:""}`:""}function mt(m,t,i,s=!1){return Object.defineProperty(m,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const Xn=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class gp extends Xn{constructor(t,i){super(t,"PasswordException"),this.code=i}}class du extends Xn{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class _u extends Xn{constructor(t){super(t,"InvalidPDFException")}}class No extends Xn{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class qb extends Xn{constructor(t){super(t,"FormatError")}}class wn extends Xn{constructor(t){super(t,"AbortException")}}function Xp(m){(typeof m!="object"||m?.length===void 0)&&Vt("Invalid argument for bytesToString");const t=m.length,i=8192;if(t<i)return String.fromCharCode.apply(null,m);const s=[];for(let r=0;r<t;r+=i){const l=Math.min(r+i,t),c=m.subarray(r,l);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Za(m){typeof m!="string"&&Vt("Invalid argument for stringToBytes");const t=m.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=m.charCodeAt(s)&255;return i}function Vb(m){return String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,m&255)}function Xb(){const m=new Uint8Array(4);return m[0]=1,new Uint32Array(m.buffer,0,1)[0]===1}function Yb(){try{return new Function(""),!0}catch{return!1}}class fe{static get isLittleEndian(){return mt(this,"isLittleEndian",Xb())}static get isEvalSupported(){return mt(this,"isEvalSupported",Yb())}static get isOffscreenCanvasSupported(){return mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return mt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return mt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return mt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return mt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return mt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const fu=Array.from(Array(256).keys(),m=>m.toString(16).padStart(2,"0"));class tt{static makeHexColor(t,i,s){return`#${fu[t]}${fu[i]}${fu[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],l=t[s+1];t[s]=r*i[0]+l*i[2]+i[4],t[s+1]=r*i[1]+l*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],l=i[1],c=i[2],u=i[3],h=i[4],f=i[5];for(let p=0;p<6;p+=2){const y=t[s+p],b=t[s+p+1];t[s+p]=y*r+b*c+h,t[s+p+1]=y*l+b*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],l=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/l,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/l}static axialAlignedBoundingBox(t,i,s){const r=i[0],l=i[1],c=i[2],u=i[3],h=i[4],f=i[5],p=t[0],y=t[1],b=t[2],A=t[3];let S=r*p+h,_=S,x=r*b+h,w=x,C=u*y+f,T=C,L=u*A+f,O=L;if(l!==0||c!==0){const B=l*p,z=l*b,$=c*y,K=c*A;S+=$,w+=$,x+=K,_+=K,C+=B,O+=B,L+=z,T+=z}s[0]=Math.min(s[0],S,x,_,w),s[1]=Math.min(s[1],C,L,T,O),s[2]=Math.max(s[2],S,x,_,w),s[3]=Math.max(s[3],C,L,T,O)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],l=t[2],c=t[3],u=s**2+r**2,h=s*l+r*c,f=l**2+c**2,p=(u+f)/2,y=Math.sqrt(p**2-(u*f-h**2));i[0]=Math.sqrt(p+y||1),i[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return l>c?null:[s,l,r,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,l){l[0]=Math.min(l[0],t,s),l[1]=Math.min(l[1],i,r),l[2]=Math.max(l[2],t,s),l[3]=Math.max(l[3],i,r)}static#t(t,i,s,r,l,c,u,h,f,p){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,S=y*(y*(y*t+3*f*i)+3*b*s)+A*r,_=y*(y*(y*l+3*f*c)+3*b*u)+A*h;p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],_),p[2]=Math.max(p[2],S),p[3]=Math.max(p[3],_)}static#e(t,i,s,r,l,c,u,h,f,p,y,b){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,i,s,r,l,c,u,h,-y/p,b);return}const A=p**2-4*y*f;if(A<0)return;const S=Math.sqrt(A),_=2*f;this.#t(t,i,s,r,l,c,u,h,(-p+S)/_,b),this.#t(t,i,s,r,l,c,u,h,(-p-S)/_,b)}static bezierBoundingBox(t,i,s,r,l,c,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,h),this.#e(t,s,l,u,i,r,c,h,3*(-t+3*(s-l)+u),6*(t-2*s+l),3*(s-t),f),this.#e(t,s,l,u,i,r,c,h,3*(-i+3*(r-c)+h),6*(i-2*r+c),3*(r-i),f)}}function $b(m){return decodeURIComponent(escape(m))}let gu=null,pp=null;function Kb(m){return gu||(gu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,pp=new Map([["","t"]])),m.replaceAll(gu,(t,i,s)=>i?i.normalize("NFKC"):pp.get(s))}function Yp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const m=new Uint8Array(32);return crypto.getRandomValues(m),Xp(m)}const zs="pdfjs_internal_id_";function Qb(m,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...l]=i;if(!m(s)&&!Number.isInteger(s)||!t(r))return!1;const c=l.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Re(m,t,i){return Math.min(Math.max(m,t),i)}function $p(m){return Uint8Array.prototype.toBase64?m.toBase64():btoa(Xp(m))}function Zb(m){return Uint8Array.fromBase64?Uint8Array.fromBase64(m):Za(atob(m))}typeof Promise.try!="function"&&(Promise.try=function(m,...t){return new Promise(i=>{i(m(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(m){return m.reduce((t,i)=>t+i,0)});class Ka{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(l){if(!l)return;let c=null;const u=l.name;if(u==="#text")c=l.value;else if(Ka.shouldBuildText(u))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&i.push({str:c}),!!l.children)for(const h of l.children)r(h)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Kp{static setupStorage(t,i,s,r,l){const c=r.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:l}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&l.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,l=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:l,linkService:s});const u=l!=="richText",h=t.div;if(h.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=y}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&Ka.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const p=[[r,-1,c]];for(;p.length>0;){const[y,b,A]=p.at(-1);if(b+1===y.children.length){p.pop();continue}const S=y.children[++p.at(-1)[1]];if(S===null)continue;const{name:_}=S;if(_==="#text"){const w=document.createTextNode(S.value);f.push(w),A.append(w);continue}const x=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,_):document.createElement(_);if(A.append(x),S.attributes&&this.setAttributes({html:x,element:S,storage:i,intent:l,linkService:s}),S.children?.length>0)p.push([S,-1,x]);else if(S.value){const w=document.createTextNode(S.value);u&&Ka.shouldBuildText(_)&&f.push(w),x.append(w)}}for(const y of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Yi="http://www.w3.org/2000/svg";class Gs{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Wa(m,t="text"){if(Ga(m,document.baseURI)){const i=await fetch(m);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",m,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Ja{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:l=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=l,this.offsetY=c,s*=i;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,y=0,b=0,A=1;break;case 90:p=0,y=1,b=1,A=0;break;case 270:p=0,y=-1,b=-1,A=0;break;case 0:p=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let S,_,x,w;p===0?(S=Math.abs(f-t[1])*s+l,_=Math.abs(h-t[0])*s+c,x=(t[3]-t[1])*s,w=(t[2]-t[0])*s):(S=Math.abs(h-t[0])*s+l,_=Math.abs(f-t[1])*s+c,x=(t[2]-t[0])*s,w=(t[3]-t[1])*s),this.transform=[p*s,y*s,b*s,A*s,S-p*s*h-b*s*f,_-y*s*h-A*s*f],this.width=x,this.height=w}get rawDims(){const t=this.viewBox;return mt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Ja({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}convertToViewportPoint(t,i){const s=[t,i];return tt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];tt.applyTransform(i,this.transform);const s=[t[2],t[3]];return tt.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return tt.applyInverseTransform(s,this.transform),s}}class Bu extends Xn{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function Fo(m){const t=m.length;let i=0;for(;i<t&&m[i].trim()==="";)i++;return m.substring(i,i+5).toLowerCase()==="data:"}function zu(m){return typeof m=="string"&&/\.pdf$/i.test(m)}function Wb(m){return[m]=m.split(/[#?]/,1),m.substring(m.lastIndexOf("/")+1)}function Jb(m,t="document.pdf"){if(typeof m!="string")return t;if(Fo(m))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(m);if(!s)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},l=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(l.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(l.test(f))return r(f);const h=Array.from(s.searchParams.keys()).reverse();for(const f of h)if(l.test(f))return r(f)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return t}class mp{started=Object.create(null);times=[];time(t){t in this.started&&pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:l}of this.times)t.push(`${s.padEnd(i)} ${l-r}ms
`);return t.join("")}}function Ga(m,t){const i=t?URL.parse(m,t):URL.parse(m);return i?.protocol==="http:"||i?.protocol==="https:"}function gi(m){m.preventDefault()}function ee(m){m.preventDefault(),m.stopPropagation()}function tv(m){console.log("Deprecated API usage: "+m)}class wu{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(i[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(i[6],10);h=h>=0&&h<=59?h:0;const f=i[7]||"Z";let p=parseInt(i[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=p,u+=y):f==="+"&&(c-=p,u-=y),new Date(Date.UTC(s,r,l,c,u,h))}}function ev(m,{scale:t=1,rotation:i=0}){const{width:s,height:r}=m.attributes.style,l=[0,0,parseInt(s),parseInt(r)];return new Ja({viewBox:l,userUnit:1,scale:t,rotation:i})}function tr(m){if(m.startsWith("#")){const t=parseInt(m.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return m.startsWith("rgb(")?m.slice(4,-1).split(",").map(t=>parseInt(t)):m.startsWith("rgba(")?m.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt(`Not a valid color format: "${m}"`),[0,0,0])}function iv(m){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of m.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;m.set(i,tr(s))}t.remove()}function Qt(m){const{a:t,b:i,c:s,d:r,e:l,f:c}=m.getTransform();return[t,i,s,r,l,c]}function wi(m){const{a:t,b:i,c:s,d:r,e:l,f:c}=m.getTransform().invertSelf();return[t,i,s,r,l,c]}function qn(m,t,i=!1,s=!0){if(t instanceof Ja){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:c}=m,u=fe.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${l}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=p,c.height=y):(c.width=y,c.height=p)}s&&m.setAttribute("data-main-rotation",t.rotation)}class Ci{constructor(){const{pixelRatio:t}=Ci;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,l=-1){let c=1/0,u=1/0,h=1/0;s=Ci.capPixels(s,l),s>0&&(c=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,h=r/i);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const Eu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class nv{static get isDarkMode(){return mt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class sv{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),mt(this,"commentForegroundColor",tr(s))}}function av(m,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return m=Math.round(m*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[m,t,i]}function yp(m,t){const i=m[0]/255,s=m[1]/255,r=m[2]/255,l=Math.max(i,s,r),c=Math.min(i,s,r),u=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const h=l-c;switch(t[1]=u<.5?h/(l+c):h/(2-l-c),l){case i:t[0]=((s-r)/h+(s<r?6:0))*60;break;case s:t[0]=((r-i)/h+2)*60;break;case r:t[0]=((i-s)/h+4)*60;break}}t[2]=u}function xu(m,t){const i=m[0],s=m[1],r=m[2],l=(1-Math.abs(2*r-1))*s,c=l*(1-Math.abs(i/60%2-1)),u=r-l/2;switch(Math.floor(i/60)){case 0:t[0]=l+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=l+u,t[2]=u;break;case 2:t[0]=u,t[1]=l+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=l+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=l+u;break;case 5:case 6:t[0]=l+u,t[1]=u,t[2]=c+u;break}}function bp(m){return m<=.03928?m/12.92:((m+.055)/1.055)**2.4}function vp(m,t,i){xu(m,i),i.map(bp);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];xu(t,i),i.map(bp);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const Ap=new Map;function rv(m,t){const i=m[0]+m[1]*256+m[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Ap.get(i);if(s)return s;const r=new Float32Array(9),l=r.subarray(0,3),c=r.subarray(3,6);yp(m,c);const u=r.subarray(6,9);yp(t,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),vp(c,u,l)<f){let p,y;h?(p=c[2],y=1):(p=0,y=c[2]);const b=.005;for(;y-p>b;){const A=c[2]=(p+y)/2;h===vp(c,u,l)<f?p=A:y=A}c[2]=h?y:p}return xu(c,l),s=tt.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),Ap.set(i,s),s}function Qp({html:m,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof m=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=m.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];l.append(document.createTextNode(f)),u<h-1&&l.append(document.createElement("br"))}r.append(l)}else Kp.render({xfaHtml:m,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",i),s.append(r)}function Zp(m){const t=new Path2D;if(!m)return t;for(let i=0,s=m.length;i<s;)switch(m[i++]){case Fa.moveTo:t.moveTo(m[i++],m[i++]);break;case Fa.lineTo:t.lineTo(m[i++],m[i++]);break;case Fa.curveTo:t.bezierCurveTo(m[i++],m[i++],m[i++],m[i++],m[i++],m[i++]);break;case Fa.quadraticCurveTo:t.quadraticCurveTo(m[i++],m[i++],m[i++],m[i++]);break;case Fa.closePath:t.closePath();break;default:pt(`Unrecognized drawing path operator: ${m[i-1]}`);break}return t}class Xa{#t=null;#e=null;#n;#i=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,Xa.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",gi,{signal:i}),t.addEventListener("pointerdown",Xa.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:l}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ee(t)}#h(t){this.#n._focusEventsAllowed=!0,ee(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",gi,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Xa.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){switch(t){case"comment":this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class ov{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",gi,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,r=0;for(const l of t){const c=l.y+l.height;if(c<s)continue;const u=l.x+(i?l.width:0);if(c>s){r=u,s=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,l]=this.#r(i,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,i,s,r){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",i);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(l.addEventListener("contextmenu",gi,{signal:u}),l.addEventListener("click",r,{signal:u})),this.#t.append(l)}}function Wp(m,t,i){for(const s of i)t.addEventListener(s,m[s].bind(m))}class kt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(kt.#e||=new Set).add(t)}static setPointer(t,i){kt.#t||=i,kt.#i??=t}static setTimeStamp(t){kt.#n=t}static isSamePointerId(t){return kt.#t===t}static isSamePointerIdOrRemove(t){return kt.#t===t?!0:(kt.#e?.delete(t),!1)}static isSamePointerType(t){return kt.#i===t}static isInitializedAndDifferentPointerType(t){return kt.#i!==null&&!kt.isSamePointerType(t)}static isSameTimeStamp(t){return kt.#n===t}static isUsingMultiplePointers(){return kt.#e?.size>=1}static clearPointerType(){kt.#i=null}static clearPointerIds(){kt.#t=NaN,kt.#e=null}static clearTimeStamp(){kt.#n=NaN}}class lv{#t=0;get id(){return`${Ya}${this.#t++}`}}class Pu{#t=Yp();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return mt(this,"_isSVGFittingCanvas",l)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await Wa(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const l=Pu._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=p});c.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){pt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:l}=t;return this.#i(`${i}_${s}_${r}_${l}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class cv{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:i,post:s,type:l};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(c&&this.#t[this.#i].type===l){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class er{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=fe.platform;for(const[s,r,l={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:l=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...c,i)(),l||ee(i))}}class Fu{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return iv(t),mt(this,"_colors",t)}convert(t){const i=tr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((l,c)=>l===i[c]))return Fu._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?tt.makeHexColor(...i):t}}class En{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new cv;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#x=null;#w=null;#S=null;#C=null;#A=!1;#E=null;#R=new lv;#M=!1;#D=!1;#P=!1;#N=null;#k=null;#F=null;#B=null;#q=null;#T=yt.NONE;#_=new Set;#L=null;#U=null;#H=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#z=null;#V=null;#W=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=En.prototype,i=c=>c.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return mt(this,"_keyboardManager",new er([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:i}]]))}constructor(t,i,s,r,l,c,u,h,f,p,y,b,A,S,_,x){const w=this._signal=this.#t.signal;this.#V=t,this.#W=i,this.#J=s,this.#a=r,this.#l=l,this.#U=c,this.#X=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:w}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),u._on("setpreference",this.onSetPreference.bind(this),{signal:w}),u._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:w}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:w}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:w}),this.#rt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#x=h.filterFactory,this.#H=f,this.#C=p||null,this.#y=y,this.#v=b,this.#b=A,this.#q=S||null,this.viewParameters={realScale:Gs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=x!==!1,l?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#_.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#E?.hide(),this.#E=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return mt(this,"hcmFilter",this.#H?this.#x.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return mt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return mt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return mt(this,"highlightColors",null);const i=new Map,s=!!this.#H;for(const[r,l]of t){const c=r.endsWith("_HCM");if(s&&c){i.set(r.replace("_HCM",""),l);continue}!s&&!c&&i.set(r,l)}return mt(this,"highlightColors",i)}get highlightColorNames(){return mt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,r){this.#l?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:r,y:l,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=l&&i<=l+u)return s}return null}disableUserSelect(t=!1){this.#W.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Gs.PDF_TO_CSS_UNITS;for(const i of this.#g)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:u}=s,h=s.toString(),p=this.#Z(s).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;s.empty();const b=this.#tt(p),A=this.#T===yt.NONE,S=()=>{const _=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:u,text:h});A&&this.showAllEditors("highlight",!0,!0),i&&_?.editComment()};if(A){this.switchToMode(yt.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Z(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#E||=new ov(this),this.#E.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${Ya}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#L)return;const r=this.#Z(t).closest(".textLayer");if(!r){this.#L&&(this.#E?.hide(),this.#L=null,this.#O({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=i,this.#O({hasSelectedText:!0}),!(this.#T!==yt.HIGHLIGHT&&this.#T!==yt.NONE)&&(this.#T===yt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#T===yt.HIGHLIGHT?this.#tt(r):null;if(l?.toggleDrawing(),this.#D){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else l?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#T===yt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#_)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#N?.abort(),this.#N=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#_){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const l of i.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){pt(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const h of s){const f=await r.deserialize(h);if(!f)return;l.push(f)}const c=()=>{for(const h of l)this.#it(h);this.#nt(l)},u=()=>{for(const h of l)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(l){pt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==yt.NONE&&!this.isEditorHandlingKeyboard&&En._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#O(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===yt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ct.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#O({isEditing:this.#T!==yt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,l=!1,c=!1){if(this.#T!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===yt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===yt.NONE){this.setEditingState(!1),this.#gt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===yt.SIGNATURE&&await this.#U?.loadSignatures(),s&&kt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#r.values())u.updateMode(t);if(t===yt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,h=[];for(const f of this.#i.values()){const{annotationElementId:p,hasComment:y,deleted:b}=f;p&&u.add(p),y&&!b&&h.push(f.getData())}for(const f of this.#n){const{id:p,popupRef:y,contentsObj:b}=f;y&&b?.str&&!u.has(p)&&!this.#m.has(p)&&h.push(f)}this.#l?.showSidebar(h)}if(!i){r&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const u of this.#i.values())u.uid===i?(this.setSelected(u),c?u.editComment():l?u.enterInEditMode():u.focus()):u.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Ct.CREATE:this.currentLayer.addNewEditor(i);return;case Ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#_)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const l of this.#i.values())l.editorType===t&&l.show(i);(this.#Y?.get(Ct.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Ct.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#P!==t){this.#P=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#gt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#_)i!==t&&i.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#c.cleanType(t)}#Q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#_],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const l of i)l.remove()},r=()=>{for(const l of i)this.#it(l)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#_)i.unselect();this.#_.clear();for(const i of t)i.isEmpty()||(this.#_.add(i),i.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==yt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[r,l]=this.#j,c=[...this.#_],u=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(r,l),h.translationDone())},undo:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(-r,-l),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(t,i),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#_)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let i=!1;for(const[{x:r,y:l,pageIndex:c},u]of t)u.newX=r,u.newY=l,u.newPageIndex=c,i||=r!==u.savedX||l!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(r,l,c,u)=>{if(this.#i.has(r.id)){const h=this.#r.get(u);h?r._setParentAndPosition(h,l,c):(r.pageIndex=u,r.x=l,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:c,newPageIndex:u}]of t)s(r,l,c,u)},undo:()=>{for(const[r,{savedX:l,savedY:c,savedPageIndex:u}]of t)s(r,l,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#p)for(const s of this.#p.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==yt.NONE}get imageManager(){return mt(this,"imageManager",new Pu)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,p=i.rangeCount;f<p;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:l,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,y,b)=>({x:(p-r)/c,y:1-(f+y-s)/l,width:b/c,height:y/l});break;case"180":u=(f,p,y,b)=>({x:1-(f+y-s)/l,y:1-(p+b-r)/c,width:y/l,height:b/c});break;case"270":u=(f,p,y,b)=>({x:1-(p+b-r)/c,y:(f-s)/l,width:b/c,height:y/l});break;default:u=(f,p,y,b)=>({x:(f-s)/l,y:(p-r)/c,width:y/l,height:b/c});break}const h=[];for(let f=0,p=i.rangeCount;f<p;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:S,height:_}of y.getClientRects())S===0||_===0||h.push(u(b,A,S,_))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#T===yt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Ti{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Ti.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ti._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ti.#f.missing),i.setAttribute("data-l10n-id",Ti.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",gi,{signal:s}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#s=!0,r(l))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Ti._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:l=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(l||(this.#t=t,this.#e=i),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ti.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Ti.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:l})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class _o{#t=null;#e=null;#n=!1;#i=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:l,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/c,(i+s-l)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",gi,{signal:s}),i&&(t.addEventListener("focusin",l=>{this.#i._focusEventsAllowed=!1,ee(l)},{capture:!0,signal:s}),t.addEventListener("focusout",l=>{this.#i._focusEventsAllowed=!0,ee(l)},{capture:!0,signal:s})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#n=!0,r(l))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:p,height:y,x:b,y:A}=this.#i;s=b+s*p,r=A+r*y}const l=this.#i.parent.boundingClientRect,{x:c,y:u,width:h,height:f}=l;this.#i._uiManager.editComment(this.#i,c+s*h,u+r*f,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#o=null,this.#a=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class Uo{#t;#e=!1;#n=null;#i;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=r,this.#a=l,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ci.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,l=AbortSignal.any([this.#c,r.signal]),c=this.#t,u={capture:!0,signal:l,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ee(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#p.bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",ee,c),l.addEventListener("pointermove",ee,c),l.addEventListener("pointercancel",ee,c),l.addEventListener("pointerup",ee,c),this.#r?.()}if(ee(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ee(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:l}=i,{screenX:c,screenY:u}=s,h=this.#l,{touch0X:f,touch0Y:p,touch1X:y,touch1Y:b}=h,A=y-f,S=b-p,_=c-r,x=u-l,w=Math.hypot(_,x)||1,C=Math.hypot(A,S)||1;if(!this.#e&&Math.abs(C-w)<=Uo.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=l,h.touch1X=c,h.touch1Y=u,!this.#e){this.#e=!0;return}const T=[(r+c)/2,(l+u)/2];this.#a?.(T,C,w)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ee(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class lt{#t=null;#e=null;#n=null;#i=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#x=0;#w=0;#S=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=lt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Fu;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=lt.prototype._resizeWithKeyboard,i=En.TRANSLATE_SMALL,s=En.TRANSLATE_BIG;return mt(this,"_resizerKeyboardManager",new er([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],lt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[l,c];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return mt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new uv({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(lt._l10n??=t,lt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),lt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);lt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Vt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#z(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[l,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/l,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#R([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#R(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=i/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:p}=s;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=lt,r=s/t,l=s/i;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:l,y:c,width:u,height:h}=this;if(u*=s,h*=r,l*=s,c*=r,this._mustFixPosition)switch(t){case 0:l=Re(l,0,s-u),c=Re(c,0,r-h);break;case 90:l=Re(l,0,s-h),c=Re(c,u,r);break;case 180:l=Re(l,u,s),c=Re(c,h,r);break;case 270:l=Re(l,h,s),c=Re(c,0,r-u);break}this.x=l/=s,this.y=c/=r;const[f,p]=this.getBaseTranslation();l+=f,c+=p,i.left=`${(100*l).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return lt.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return lt.#M(t,i,360-this.parentRotation)}#D(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#N.bind(this,s),{signal:i}),r.addEventListener("contextmenu",gi,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#N(t,i){i.preventDefault();const{isMac:s}=fe.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ee,{passive:!1,signal:c}),window.addEventListener("contextmenu",gi,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const l=this.x,c=this.y,u=this.width,h=this.height;l===t&&c===i&&u===s&&h===r||this.addCommands({cmd:this.#k.bind(this,l,c,u,h),undo:this.#k.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,f=lt.MIN_SIZE/s,p=lt.MIN_SIZE/r,y=this.#D(this.rotation),b=(N,q)=>[y[0]*N+y[2]*q,y[1]*N+y[3]*q],A=this.#D(360-this.rotation),S=(N,q)=>[A[0]*N+A[2]*q,A[1]*N+A[3]*q];let _,x,w=!1,C=!1;switch(t){case"topLeft":w=!0,_=(N,q)=>[0,0],x=(N,q)=>[N,q];break;case"topMiddle":_=(N,q)=>[N/2,0],x=(N,q)=>[N/2,q];break;case"topRight":w=!0,_=(N,q)=>[N,0],x=(N,q)=>[0,q];break;case"middleRight":C=!0,_=(N,q)=>[N,q/2],x=(N,q)=>[0,q/2];break;case"bottomRight":w=!0,_=(N,q)=>[N,q],x=(N,q)=>[0,0];break;case"bottomMiddle":_=(N,q)=>[N/2,q],x=(N,q)=>[N/2,0];break;case"bottomLeft":w=!0,_=(N,q)=>[0,q],x=(N,q)=>[N,0];break;case"middleLeft":C=!0,_=(N,q)=>[0,q/2],x=(N,q)=>[N,q/2];break}const T=_(u,h),L=x(u,h);let O=b(...L);const B=lt._round(l+O[0]),z=lt._round(c+O[1]);let $=1,K=1,J,Z;if(i.fromKeyboard)({deltaX:J,deltaY:Z}=i);else{const{screenX:N,screenY:q}=i,[W,ft]=this.#l;[J,Z]=this.screenToPageTranslation(N-W,q-ft),this.#l[0]=N,this.#l[1]=q}if([J,Z]=S(J/s,Z/r),w){const N=Math.hypot(u,h);$=K=Math.max(Math.min(Math.hypot(L[0]-T[0]-J,L[1]-T[1]-Z)/N,1/u,1/h),f/u,p/h)}else C?$=Re(Math.abs(L[0]-T[0]-J),f,1)/u:K=Re(Math.abs(L[1]-T[1]-Z),p,1)/h;const ht=lt._round(u*$),wt=lt._round(h*K);O=b(...x(ht,wt));const dt=B-O[0],Dt=z-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ht,this.height=wt,this.x=dt,this.y=Dt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Xa(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Ti.initialize(lt._l10n),this.#n=new Ti(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new _o(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new _o(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new _o(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new _o(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,u=c+l+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),Wp(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Uo({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,i,s){let l=.7*(s/i)+1-.7;if(l===1)return;const c=this.#D(this.rotation),u=(B,z)=>[c[0]*B+c[2]*z,c[1]*B+c[3]*z],[h,f]=this.parentDimensions,p=this.x,y=this.y,b=this.width,A=this.height,S=lt.MIN_SIZE/h,_=lt.MIN_SIZE/f;l=Math.max(Math.min(l,1/b,1/A),S/b,_/A);const x=lt._round(b*l),w=lt._round(A*l);if(x===b&&w===A)return;this.#u||=[p,y,b,A];const C=u(b/2,A/2),T=lt._round(p+C[0]),L=lt._round(y+C[1]),O=u(x/2,w/2);this.x=T-O[0],this.y=L-O[1],this.width=x,this.height=w,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=fe.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(t);return}this.#L(t)}#L(t){const{isMac:i}=fe.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:l},u=f=>{r.abort(),this.#s=null,this.#p=!1,this._uiManager.endDragSession()||this.#L(f),s&&this._onStopDragging()};i&&(this.#x=t.clientX,this.#w=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:b}=f;if(b!==this.#s){ee(f);return}const[A,S]=this.screenToPageTranslation(p-this.#x,y-this.#w);this.#x=p,this.#w=y,this._uiManager.dragSelectedEditors(A,S)},c),window.addEventListener("touchmove",ee,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),ee(f)},c));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ee(f)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[l,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,p=i/r,y=this.x*l,b=this.y*c,A=this.width*l,S=this.height*c;switch(s){case 0:return[y+f+u,c-b-p-S+h,y+f+A+u,c-b-p+h];case 90:return[y+p+u,c-b+f+h,y+p+S+u,c-b+f+A+h];case 180:return[y-f-A+u,c-b+p+h,y-f+u,c-b+p+S+h];case 270:return[y-p-S+u,c-b-f-A+h,y-p+u,c-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,l,c]=t,u=l-s,h=c-r;switch(this.rotation){case 0:return[s,i-c,u,h];case 90:return[s,i-r,h,u];case 180:return[l,i-r,u,h];case 270:return[l,i-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:l,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||p,popupRef:!l,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return i<c&&r>0&&t<l&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[l,c]=r.pageDimensions,[u,h,f,p]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/l,r.y=h/c,r.width=f/l,r.height=p/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#z(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,l,c]=this.getPDFRect();return[lt._round(s+(l-s)*t),lt._round(r+(c-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const c=this.#Y.bind(this),u=this.#X.bind(this),h=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#$.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",lt._l10nResizer[p])}}const s=this.#e[0];let r=0;for(const c of i){if(c===s)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==r){if(l<r)for(let u=0;u<r-l;u++)this.#c.append(this.#c.firstElementChild);else if(l>r)for(let u=0;u<l-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",lt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){lt._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#z()}#$(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#z(){this.#v=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#z(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},lt._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class uv extends lt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Sp=3285377520,hi=4294901760,Ei=65535;class Jp{constructor(t){this.h1=t?t&4294967295:Sp,this.h2=t?t&4294967295:Sp}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let _=0,x=t.length;_<x;_++){const w=t.charCodeAt(_);w<=255?i[s++]=w:(i[s++]=w>>>8,i[s++]=w&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,l=s-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,h=0,f=this.h1,p=this.h2;const y=3432918353,b=461845907,A=y&Ei,S=b&Ei;for(let _=0;_<r;_++)_&1?(u=c[_],u=u*y&hi|u*A&Ei,u=u<<15|u>>>17,u=u*b&hi|u*S&Ei,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[_],h=h*y&hi|h*A&Ei,h=h<<15|h>>>17,h=h*b&hi|h*S&Ei,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,l){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&hi|u*A&Ei,u=u<<15|u>>>17,u=u*b&hi|u*S&Ei,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&hi|t*36045&Ei,i=i*4283543511&hi|((i<<16|t>>>16)*2950163797&hi)>>>16,t^=i>>>1,t=t*444984403&hi|t*60499&Ei,i=i*3301882366&hi|((i<<16|t>>>16)*3120437893&hi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Tu=Object.freeze({map:null,hash:"",transfer:void 0});class Uu{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof lt&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof lt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[l,c]of Object.entries(i))s[l]!==c&&(r=!0,s[l]=c);else r=!0,this.#i.set(t,i);r&&this.#r(),i instanceof lt&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tm(this)}get serializable(){if(this.#i.size===0)return Tu;const t=new Map,i=new Jp,s=[],r=Object.create(null);let l=!1;for(const[c,u]of this.#i){const h=u instanceof lt?u.serialize(!1,r):u;h&&(t.set(c,h),i.update(`${c}:${JSON.stringify(h)}`),l||=!!h.bitmap)}if(l)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:Tu}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const l of this.#i.values()){if(!(l instanceof lt)){l.popup&&(l.popup.deleted?r+=1:s+=1);continue}l.isCommentDeleted?r+=1:l.hasEditedComment&&(s+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:u}=c;i.has(u)||i.set(u,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,p]of Object.entries(c)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const b=y.get(p)??0;y.set(p,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[l,c]of i)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class tm extends Uu{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,l=structuredClone(i,r?{transfer:r}:null);this.#t={map:l,hash:s,transfer:r}}get print(){Vt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return mt(this,"modifiedIds",{ids:new Set,hash:""})}}class hv{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Mt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:c}=t,u=new FontFace(r,l,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Vt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw pt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return mt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return mt(this,"isSyncFontLoadingSupported",De||fe.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Mt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return mt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(L,O){return L.charCodeAt(O)<<24|L.charCodeAt(O+1)<<16|L.charCodeAt(O+2)<<8|L.charCodeAt(O+3)&255}function r(L,O,B,z){const $=L.substring(0,O),K=L.substring(O+B);return $+z+K}let l,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(L,O){if(++f>30){pt("Load test font never loaded."),O();return}if(h.font="30px "+L,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(p.bind(null,L,O))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const S=16,_=1482184792;let x=s(b,S);for(l=0,c=y.length-3;l<c;l+=4)x=x-_+s(y,l)|0;l<y.length&&(x=x-_+s(y+"XXX",l)|0),b=r(b,S,4,Vb(x));const w=`url(data:font/opentype;base64,${btoa(b)});`,C=`@font-face {font-family:"${y}";src:${w}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const L of[t.loadedName,y]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=L,T.append(O)}this._document.body.append(T),p(y,()=>{T.remove(),i.complete()})}}class dv{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${$p(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(c){pt(`getPathGenerator - ignoring character: "${c}".`)}const l=Zp(r?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){mt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){mt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Us{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of Us.strings){const p=i.encode(t[f]);s[f]=p,r+=4+p.length}const l=new ArrayBuffer(r),c=new Uint8Array(l),u=new DataView(l);let h=0;for(const f of Us.strings){const p=s[f],y=p.length;u.setUint32(h,y),c.set(p,h+4),h+=4+y}return Mt(h===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Mt(t<Us.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class Is{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const b of Is.strings){const A=i.encode(t[b]);s[b]=A,r+=4+A.length}r+=4;let l,c,u=1+r;t.style&&(l=i.encode(t.style.style),c=i.encode(t.style.weight),u+=4+l.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;p.setUint8(y++,t.guessFallback?1:0),p.setUint32(y,0),y+=4,r=0;for(const b of Is.strings){const A=s[b],S=A.length;r+=4+S,p.setUint32(y,S),f.set(A,y+4),y+=4+S}return p.setUint32(y-r-4,r),t.style&&(p.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length,p.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Mt(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Mt(t<Is.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),l=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:l}}}class Gt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#a;#s;#o;constructor({data:t,extra:i}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),i&&Object.assign(this,i)}#c(t){Mt(t<Gt.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Mt(t<Gt.numbers.length,"Invalid number index"),this.#o.getFloat64(Gt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Gt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Gt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Gt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Mt(t<Gt.strings.length,"Invalid string index");let i=Gt.#r+4;for(let l=0;l<t;l++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Gt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const l=this.#o.getUint32(t);if(l!==0)return new Uint8Array(this.#a,t+4,l)}clearData(){let t=Gt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const l=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,l).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Gt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const l=new Uint8Array(r);return l.set(new Uint8Array(this.#a,t+4,r)),new Us(l.buffer)}get systemFontInfo(){let t=Gt.#r;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,t+4,s)),new Is(r.buffer)}static write(t){const i=t.systemFontInfo?Is.write(t.systemFontInfo):null,s=t.cssFontInfo?Us.write(t.cssFontInfo):null,r=new TextEncoder,l={};let c=0;for(const _ of Gt.strings)l[_]=r.encode(t[_]),c+=4+l[_].length;const u=Gt.#r+4+c+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;const b=Gt.bools.length;let A=0,S=0;for(let _=0;_<b;_++){const x=t[Gt.bools[_]];A|=(x===void 0?0:x?2:1)<<S,S+=2,(S===8||_===b-1)&&(p.setUint8(y++,A),A=0,S=0)}Mt(y===Gt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const _ of Gt.numbers)p.setFloat64(y,t[_]),y+=8;if(Mt(y===Gt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(y++,4);for(const _ of t.bbox)p.setInt16(y,_,!0),y+=2}else p.setUint8(y++,0),y+=8;if(Mt(y===Gt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(y++,6);for(const _ of t.fontMatrix)p.setFloat64(y,_,!0),y+=8}else p.setUint8(y++,0),y+=48;if(Mt(y===Gt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(y++,1);for(const _ of t.defaultVMetrics)p.setInt16(y,_,!0),y+=2}else p.setUint8(y++,0),y+=6;Mt(y===Gt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(Gt.#r,0),y+=4;for(const _ of Gt.strings){const x=l[_],w=x.length;p.setUint32(y,w),f.set(x,y+4),y+=4+w}if(p.setUint32(Gt.#r,y-Gt.#r-4),!i)p.setUint32(y,0),y+=4;else{const _=i.byteLength;p.setUint32(y,_),Mt(y+4+_<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+_}if(!s)p.setUint32(y,0),y+=4;else{const _=s.byteLength;p.setUint32(y,_),Mt(y+4+_<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+_}return t.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Mt(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}}class ye{static#t=0;static#e=1;static#n=2;static#i=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],l=[],c=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],c=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,h=t[1],r=t[2],l=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(r.length/2),y=Math.floor(l.length/3),b=c.length,A=u.length;let S=0;for(const O of u)S+=1,S=Math.ceil(S/4)*4,S+=4+O.coords.length*4,S+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(S+=4);const _=20+p*8+y*3+b*8+(s?16:0)+(f?3:0)+S,x=new ArrayBuffer(_),w=new DataView(x),C=new Uint8Array(x);w.setUint8(ye.#t,i),w.setUint8(ye.#e,s?1:0),w.setUint8(ye.#n,f?1:0),w.setUint8(ye.#i,h),w.setUint32(ye.#r,p,!0),w.setUint32(ye.#a,y,!0),w.setUint32(ye.#s,b,!0),w.setUint32(ye.#o,A,!0);let T=20;new Float32Array(x,T,p*2).set(r),T+=p*8,C.set(l,T),T+=y*3;for(const[O,B]of c)w.setFloat32(T,O,!0),T+=4,w.setUint32(T,parseInt(B.slice(1),16),!0),T+=4;if(s)for(const O of s)w.setFloat32(T,O,!0),T+=4;f&&(C.set(f,T),T+=3);for(let O=0;O<u.length;O++){const B=u[O];w.setUint8(T,B.type),T+=1,T=Math.ceil(T/4)*4,w.setUint32(T,B.coords.length,!0),T+=4,new Int32Array(x,T,B.coords.length).set(B.coords),T+=B.coords.length*4,w.setUint32(T,B.colors.length,!0),T+=4,new Int32Array(x,T,B.colors.length).set(B.colors),T+=B.colors.length*4,B.verticesPerRow!==void 0&&(w.setUint32(T,B.verticesPerRow,!0),T+=4)}return x}getIR(){const t=this.view,i=this.data[ye.#t],s=!!this.data[ye.#e],r=!!this.data[ye.#n],l=t.getUint32(ye.#r,!0),c=t.getUint32(ye.#a,!0),u=t.getUint32(ye.#s,!0),h=t.getUint32(ye.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,l*2);f+=l*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let x=0;x<u;++x){const w=t.getFloat32(f,!0);f+=4;const C=t.getUint32(f,!0);f+=4,b.push([w,`#${C.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let x=0;x<4;++x)A.push(t.getFloat32(f,!0)),f+=4}let S=null;r&&(S=new Uint8Array(this.buffer,f,3),f+=3);const _=[];for(let x=0;x<h;++x){const w=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const C=t.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,C);f+=C*4;const L=t.getUint32(f,!0);f+=4;const O=new Int32Array(this.buffer,f,L);f+=L*4;const B={type:w,coords:T,colors:O};w===Su.LATTICE&&(B.verticesPerRow=t.getUint32(f,!0),f+=4),_.push(B)}if(i===1)return["RadialAxial","axial",A,b,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,b,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(i===3){const x=this.data[ye.#i];let w=null;if(p.length>0){let C=p[0],T=p[0],L=p[1],O=p[1];for(let B=0;B<p.length;B+=2){const z=p[B],$=p[B+1];C=C>z?z:C,L=L>$?$:L,T=T<z?z:T,O=O<$?$:O}w=[C,L,T,O]}return["Mesh",x,p,y,_,w,A,S]}throw new Error(`Unsupported pattern kind: ${i}`)}}class fv{static write(t){let i,s;return fe.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),i=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),i=new Float32Array(s)),i.set(t),s}#t;constructor(t){this.#t=t}get path(){return fe.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function gv(m){if(m instanceof URL)return m.href;if(typeof m=="string"){if(De)return m;const t=URL.parse(m,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function pv(m){if(De&&typeof Buffer<"u"&&m instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return Za(m);if(m instanceof ArrayBuffer||ArrayBuffer.isView(m)||typeof m=="object"&&!isNaN(m?.length))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function wo(m){if(typeof m!="string")return null;if(m.endsWith("/"))return m;throw new Error(`Invalid factory url: "${m}" must include trailing slash.`)}const Cu=m=>typeof m=="object"&&Number.isInteger(m?.num)&&m.num>=0&&Number.isInteger(m?.gen)&&m.gen>=0,mv=m=>typeof m=="object"&&typeof m?.name=="string",yv=Qb.bind(null,Cu,mv);class bv{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){pt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Eo={DATA:1,ERROR:2},ce={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _p(){}function Fe(m){if(m instanceof wn||m instanceof _u||m instanceof gp||m instanceof No||m instanceof du)return m;switch(m instanceof Error||typeof m=="object"&&m!==null||Vt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),m.name){case"AbortException":return new wn(m.message);case"InvalidPDFException":return new _u(m.message);case"PasswordException":return new gp(m.message,m.code);case"ResponseException":return new No(m.message,m.status,m.missing);case"UnknownErrorException":return new du(m.message,m.details)}return new du(m.message,m.toString())}class qa{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Eo.DATA)r.resolve(t.data);else if(t.callback===Eo.ERROR)r.reject(Fe(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(i,t.data).then(function(c){l.postMessage({sourceName:s,targetName:r,callback:Eo.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:s,targetName:r,callback:Eo.ERROR,callbackId:t.callbackId,reason:Fe(c)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,i,s,r){const l=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:t,streamId:l,data:i,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[l].pullCall=p,h.postMessage({sourceName:c,targetName:u,stream:ce.PULL,streamId:l,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Mt(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[l].cancelCall=p,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:ce.CANCEL,streamId:l,reason:Fe(f)}),p.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,c=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=p,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:r,stream:ce.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ce.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){Mt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ce.ERROR,streamId:i,reason:Fe(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[i]=h,Promise.try(u,t.data,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ce.START_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ce.START_COMPLETE,streamId:i,reason:Fe(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ce.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Fe(t.reason));break;case ce.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Fe(t.reason));break;case ce.PULL:if(!u){l.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||_p).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,reason:Fe(f)})});break;case ce.ENQUEUE:if(Mt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ce.CLOSE:if(Mt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,i);break;case ce.ERROR:Mt(c,"error should have stream controller"),c.controller.error(Fe(t.reason)),this.#r(c,i);break;case ce.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Fe(t.reason)),this.#r(c,i);break;case ce.CANCEL:if(!u)break;const h=Fe(t.reason);Promise.try(u.onCancel||_p,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:i,reason:Fe(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class em{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Vt("Abstract method `_createCanvas` called.")}}class vv extends em{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class im{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Vt("Abstract method `_fetch` called.")}}class wp extends im{async _fetch(t){const i=await Wa(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Za(i)}}class nm{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,l){return"none"}destroy(t=!1){}}class Av extends nm{#t;#e;#n;#i;#r;#a;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(Yi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(Yi,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=h[y]/255;const p=f.join(",");return[p,p,p]}const[i,s,r]=t,l=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)l[h]=i[h]/255,c[h]=s[h]/255,u[h]=r[h]/255;return[l.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&(Fo(i)?pt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Vp(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,r,l]=this.#d(t),c=t.length===1?s:`${s}${r}${l}`;if(i=this.#o.get(c),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(c,h);const f=this.#p(u);return this.#g(s,r,l,f),h}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let l=this.#c.get(r);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#c.set(r,l)),!t||!i))return l.url;const c=this.#v(t);t=tt.makeHexColor(...c);const u=this.#v(i);if(i=tt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return l.url;const h=new Array(256);for(let A=0;A<=255;A++){const S=A/255;h[A]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#i}_hcm_filter`,y=l.filter=this.#p(p);this.#g(f,f,f,y),this.#m(y);const b=(A,S)=>{const _=c[A]/255,x=u[A]/255,w=new Array(S+1);for(let C=0;C<=S;C++)w[C]=_+C/S*(x-_);return w.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),l.url=this.#h(p),l.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const l=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(r,c);const u=this.#p(l);return this.#y(s,u),c}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#o.get(r),i)return this.#o.set(t,i),i;const l=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(r,c);const u=this.#p(l);return this.#f(u),t&&this.#y(s,u),c}addHighlightHCMFilter(t,i,s,r,l){const c=`${i}-${s}-${r}-${l}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[h,f]=[i,s].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[r,l].map(this.#v.bind(this));y<p&&([p,y,b,A]=[y,p,A,b]),this.#l.style.color="";const S=(w,C,T)=>{const L=new Array(256),O=(y-p)/T,B=w/255,z=(C-w)/(255*T);let $=0;for(let K=0;K<=T;K++){const J=Math.round(p+K*O),Z=B+K*z;for(let ht=$;ht<=J;ht++)L[ht]=Z;$=J+1}for(let K=$;K<256;K++)L[K]=L[$-1];return L.join(",")},_=`g_${this.#i}_hcm_${t}_filter`,x=u.filter=this.#p(_);return this.#m(x),this.#g(S(b[0],A[0],5),S(b[1],A[1],5),S(b[2],A[2],5),x),u.url=this.#h(_),u.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const i=this.#r.createElementNS(Yi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(Yi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#p(t){const i=this.#r.createElementNS(Yi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const r=this.#r.createElementNS(Yi,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#g(t,i,s,r){const l=this.#r.createElementNS(Yi,"feComponentTransfer");r.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",i),this.#u(l,"feFuncB",s)}#y(t,i){const s=this.#r.createElementNS(Yi,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,tr(getComputedStyle(this.#l).getPropertyValue("color"))}}class sm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Vt("Abstract method `_fetch` called.")}}class Ep extends sm{async _fetch(t){const i=await Wa(t,"arraybuffer");return new Uint8Array(i)}}class am{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Vt("Abstract method `_fetch` called.")}}class xp extends am{async _fetch(t){const i=await Wa(t,"arraybuffer");return new Uint8Array(i)}}De&&pt("Please use the `legacy` build in Node.js environments.");async function Iu(m){const i=await process.getBuiltinModule("fs").promises.readFile(m);return new Uint8Array(i)}class Sv extends nm{}class _v extends em{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class wv extends im{async _fetch(t){return Iu(t)}}class Ev extends sm{async _fetch(t){return Iu(t)}}class xv extends am{async _fetch(t){return Iu(t)}}const Ns="__forcedDependency",{floor:Tp,ceil:Cp}=Math;function xo(m,t,i,s,r,l){m[t*4+0]=Math.min(m[t*4+0],i),m[t*4+1]=Math.min(m[t*4+1],s),m[t*4+2]=Math.max(m[t*4+2],r),m[t*4+3]=Math.max(m[t*4+3],l)}const Mu=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Tv{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Mu}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const To=(m,t)=>{if(!m)return;let i=m.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},m.set(t,i)),i};class Cv{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ns]:[]};#n=new Map;#i=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(Mu,i.length)):this.#u.fill(Mu)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ns]:{__proto__:this.#e[Ns]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(To(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(To(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&(To(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#a.push(tt.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(Ns,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Ns,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,r,l,c){const u=tt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform()),h=[1/0,1/0,-1/0,-1/0];tt.axialAlignedBoundingBox([s,l,r,c],u,h);const f=tt.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,l,c){const u=this.#s;if(u[0]===1/0)return this;const h=tt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform());if(u[0]===-1/0)return tt.axialAlignedBoundingBox([s,l,r,c],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return tt.axialAlignedBoundingBox([s,l,r,c],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,l=0,c=0,u){const h=s.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(s),f!==!1&&(p=[0,0,0,0],tt.axialAlignedBoundingBox(h,s.fontMatrix,p),(r!==1||l!==0||c!==0)&&tt.scaleMinMax([r,0,0,-r,l,c],p),f)))return this.recordBBox(t,i,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&p&&f===void 0&&(f=p[0]<=l-y.actualBoundingBoxLeft&&p[2]>=l+y.actualBoundingBoxRight&&p[1]<=c-y.actualBoundingBoxAscent&&p[3]>=c+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,p[0],p[2],p[1],p[3]):this.recordBBox(t,i,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,r=this.#t,l=this.#e;for(const c of i)c in this.#t?s.add(r[c]):c in l&&l[c].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[Ns]),this.#g){const s=To(this.#g,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Tp(this.#o[0]*256/this.#f),r=Tp(this.#o[1]*256/this.#m),l=Cp(this.#o[2]*256/this.#f),c=Cp(this.#o[3]*256/this.#m);xo(this.#p,t,s,r,l,c);for(const u of this.#l)u!==t&&xo(this.#p,u,s,r,l,c);for(const u of this.#i)u!==t&&xo(this.#p,u,s,r,l,c);for(const u of this.#r)u!==t&&xo(this.#p,u,s,r,l,c);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new Tv(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Lo{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof Lo&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,l,c){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,l,c),this}recordBBox(t,i,s,r,l,c){return this.#n||this.#t.recordBBox(this.#e,i,s,r,l,c),this}recordCharacterBBox(t,i,s,r,l,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,l,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const di={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Te={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Du(m,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),m.clip(r)}class Hu{isModifyingCurrentTransform(){return!1}getPattern(){Vt("Abstract method `getPattern` called.")}}class Mv extends Hu{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,i=null){let s,r=this._p0,l=this._p1;if(i&&(r=r.slice(),l=l.slice(),tt.applyTransform(r,i),tt.applyTransform(l,i)),this._type==="axial")s=t.createLinearGradient(r[0],r[1],l[0],l[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(i){const h=new Float32Array(2);tt.singularValueDecompose2dScale(i,h),c*=h[0],u*=h[0]}s=t.createRadialGradient(r[0],r[1],c,l[0],l[1],u)}for(const c of this._colorStops)s.addColorStop(c[0],c[1]);return s}getPattern(t,i,s,r){let l;if(r===Te.STROKE||r===Te.FILL){if(this.isOriginBased()){let b=tt.transform(s,i.baseTransform);this.matrix&&(b=tt.transform(b,this.matrix));const A=.001,S=Math.hypot(b[0],b[1]),_=Math.hypot(b[2],b[3]),x=(b[0]*b[2]+b[1]*b[3])/(S*_);if(Math.abs(x)<A)if(this.isRadial()){if(Math.abs(S-_)<A)return this._createGradient(t,b)}else return this._createGradient(t,b)}const c=i.current.getClippedPathBoundingBox(r,Qt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),s=tt.transform(s,[1,0,0,1,c[0],c[1]]),p.transform(...i.baseTransform),this.matrix&&p.transform(...this.matrix),Du(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),l=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);l.setTransform(y)}else Du(t,this._bbox),l=this._createGradient(t);return l}}function pu(m,t,i,s,r,l,c,u){const h=t.coords,f=t.colors,p=m.data,y=m.width*4;let b;h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=l,l=c,c=b),h[s+1]>h[r+1]&&(b=s,s=r,r=b,b=c,c=u,u=b),h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=l,l=c,c=b);const A=(h[i]+t.offsetX)*t.scaleX,S=(h[i+1]+t.offsetY)*t.scaleY,_=(h[s]+t.offsetX)*t.scaleX,x=(h[s+1]+t.offsetY)*t.scaleY,w=(h[r]+t.offsetX)*t.scaleX,C=(h[r+1]+t.offsetY)*t.scaleY;if(S>=C)return;const T=f[l],L=f[l+1],O=f[l+2],B=f[c],z=f[c+1],$=f[c+2],K=f[u],J=f[u+1],Z=f[u+2],ht=Math.round(S),wt=Math.round(C);let dt,Dt,N,q,W,ft,At,D;for(let H=ht;H<=wt;H++){if(H<x){const at=H<S?0:(S-H)/(S-x);dt=A-(A-_)*at,Dt=T-(T-B)*at,N=L-(L-z)*at,q=O-(O-$)*at}else{let at;H>C?at=1:x===C?at=0:at=(x-H)/(x-C),dt=_-(_-w)*at,Dt=B-(B-K)*at,N=z-(z-J)*at,q=$-($-Z)*at}let P;H<S?P=0:H>C?P=1:P=(S-H)/(S-C),W=A-(A-w)*P,ft=T-(T-K)*P,At=L-(L-J)*P,D=O-(O-Z)*P;const Q=Math.round(Math.min(dt,W)),et=Math.round(Math.max(dt,W));let nt=y*H+Q*4;for(let at=Q;at<=et;at++)P=(dt-at)/(dt-W),P<0?P=0:P>1&&(P=1),p[nt++]=Dt-(Dt-ft)*P|0,p[nt++]=N-(N-At)*P|0,p[nt++]=q-(q-D)*P|0,p[nt++]=255}}function Dv(m,t,i){const s=t.coords,r=t.colors;let l,c;switch(t.type){case Su.LATTICE:const u=t.verticesPerRow,h=Math.floor(s.length/u)-1,f=u-1;for(l=0;l<h;l++){let p=l*u;for(let y=0;y<f;y++,p++)pu(m,i,s[p],s[p+1],s[p+u],r[p],r[p+1],r[p+u]),pu(m,i,s[p+u+1],s[p+1],s[p+u],r[p+u+1],r[p+1],r[p+u])}break;case Su.TRIANGLES:for(l=0,c=s.length;l<c;l+=3)pu(m,i,s[l],s[l+1],s[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class Rv extends Hu{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),A=f/y,S=p/b,_={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/A,scaleY:1/S},x=y+4,w=b+4,C=s.getCanvas("mesh",x,w),T=C.context,L=T.createImageData(y,b);if(i){const B=L.data;for(let z=0,$=B.length;z<$;z+=4)B[z]=i[0],B[z+1]=i[1],B[z+2]=i[2],B[z+3]=255}for(const B of this._figures)Dv(L,B,_);return T.putImageData(L,2,2),{canvas:C.canvas,offsetX:u-2*A,offsetY:h-2*S,scaleX:A,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){Du(t,this._bbox);const l=new Float32Array(2);if(r===Te.SHADING)tt.singularValueDecompose2dScale(Qt(t),l);else if(this.matrix){tt.singularValueDecompose2dScale(this.matrix,l);const[u,h]=l;tt.singularValueDecompose2dScale(i.baseTransform,l),l[0]*=u,l[1]*=h}else tt.singularValueDecompose2dScale(i.baseTransform,l);const c=this._createMeshCanvas(l,r===Te.SHADING?null:this._background,i.cachedCanvases);return r!==Te.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class Ov extends Hu{getPattern(){return"hotpink"}}function Nv(m){switch(m[0]){case"RadialAxial":return new Mv(m);case"Mesh":return new Rv(m);case"Dummy":return new Ov}throw new Error(`Unknown IR type: ${m[0]}`)}const Mp={COLORED:1,UNCOLORED:2};class ju{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:l,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Po("TilingType: "+c);const y=s[0],b=s[1],A=s[2],S=s[3],_=A-y,x=S-b,w=new Float32Array(2);tt.singularValueDecompose2dScale(this.matrix,w);const[C,T]=w;tt.singularValueDecompose2dScale(this.baseTransform,w);const L=C*w[0],O=T*w[1];let B=_,z=x,$=!1,K=!1;const J=Math.ceil(f*L),Z=Math.ceil(p*O),ht=Math.ceil(_*L),wt=Math.ceil(x*O);J>=ht?B=f:$=!0,Z>=wt?z=p:K=!0;const dt=this.getSizeAndScale(B,this.ctx.canvas.width,L),Dt=this.getSizeAndScale(z,this.ctx.canvas.height,O),N=t.cachedCanvases.getCanvas("pattern",dt.size,Dt.size),q=N.context,W=h.createCanvasGraphics(q,i);if(W.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(W,l,u),q.translate(-dt.scale*y,-Dt.scale*b),W.transform(0,dt.scale,0,0,Dt.scale,0,0),q.save(),W.dependencyTracker?.save(),this.clipBbox(W,y,b,A,S),W.baseTransform=Qt(W.ctx),W.executeOperatorList(r),W.endDrawing(),W.dependencyTracker?.restore(),q.restore(),$||K){const ft=N.canvas;$&&(B=f),K&&(z=p);const At=this.getSizeAndScale(B,this.ctx.canvas.width,L),D=this.getSizeAndScale(z,this.ctx.canvas.height,O),H=At.size,P=D.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",H,P),et=Q.context,nt=$?Math.floor(_/f):0,at=K?Math.floor(x/p):0;for(let Bt=0;Bt<=nt;Bt++)for(let ct=0;ct<=at;ct++)et.drawImage(ft,H*Bt,P*ct,H,P,0,0,H,P);return{canvas:Q.canvas,scaleX:At.scale,scaleY:D.scale,offsetX:y,offsetY:b}}return{canvas:N.canvas,scaleX:dt.scale,scaleY:Dt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const r=Math.max(ju.MAX_PATTERN_SIZE,i);let l=Math.ceil(t*s);return l>=r?l=r:s=l/t,{scale:s,size:l}}clipBbox(t,i,s,r,l){const c=r-i,u=l-s;t.ctx.rect(i,s,c,u),tt.axialAlignedBoundingBox([i,s,r,l],Qt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,l=t.current;switch(i){case Mp.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=l.fillColor=c,r.strokeStyle=l.strokeColor=u;break;case Mp.UNCOLORED:r.fillStyle=r.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new qb(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,l){let c=s;r!==Te.SHADING&&(c=tt.transform(c,i.baseTransform),this.matrix&&(c=tt.transform(c,this.matrix)));const u=this.createPatternCanvas(i,l);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function Lv({src:m,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const u=fe.isLittleEndian?4278190080:255,[h,f]=c?[l,u]:[u,l],p=s>>3,y=s&7,b=m.length;i=new Uint32Array(i.buffer);let A=0;for(let S=0;S<r;S++){for(const x=t+p;t<x;t++){const w=t<b?m[t]:255;i[A++]=w&128?f:h,i[A++]=w&64?f:h,i[A++]=w&32?f:h,i[A++]=w&16?f:h,i[A++]=w&8?f:h,i[A++]=w&4?f:h,i[A++]=w&2?f:h,i[A++]=w&1?f:h}if(y===0)continue;const _=t<b?m[t++]:255;for(let x=0;x<y;x++)i[A++]=_&1<<7-x?f:h}return{srcPos:t,destPos:A}}const Dp=16,Rp=100,kv=15,Op=10,Ue=16,mu=new DOMMatrix,Je=new Float32Array(2),Ps=new Float32Array([1/0,1/0,-1/0,-1/0]);function Bv(m,t){if(m._removeMirroring)throw new Error("Context is already forwarding operations.");m.__originalSave=m.save,m.__originalRestore=m.restore,m.__originalRotate=m.rotate,m.__originalScale=m.scale,m.__originalTranslate=m.translate,m.__originalTransform=m.transform,m.__originalSetTransform=m.setTransform,m.__originalResetTransform=m.resetTransform,m.__originalClip=m.clip,m.__originalMoveTo=m.moveTo,m.__originalLineTo=m.lineTo,m.__originalBezierCurveTo=m.bezierCurveTo,m.__originalRect=m.rect,m.__originalClosePath=m.closePath,m.__originalBeginPath=m.beginPath,m._removeMirroring=()=>{m.save=m.__originalSave,m.restore=m.__originalRestore,m.rotate=m.__originalRotate,m.scale=m.__originalScale,m.translate=m.__originalTranslate,m.transform=m.__originalTransform,m.setTransform=m.__originalSetTransform,m.resetTransform=m.__originalResetTransform,m.clip=m.__originalClip,m.moveTo=m.__originalMoveTo,m.lineTo=m.__originalLineTo,m.bezierCurveTo=m.__originalBezierCurveTo,m.rect=m.__originalRect,m.closePath=m.__originalClosePath,m.beginPath=m.__originalBeginPath,delete m._removeMirroring},m.save=function(){t.save(),this.__originalSave()},m.restore=function(){t.restore(),this.__originalRestore()},m.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},m.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},m.transform=function(i,s,r,l,c,u){t.transform(i,s,r,l,c,u),this.__originalTransform(i,s,r,l,c,u)},m.setTransform=function(i,s,r,l,c,u){t.setTransform(i,s,r,l,c,u),this.__originalSetTransform(i,s,r,l,c,u)},m.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},m.rotate=function(i){t.rotate(i),this.__originalRotate(i)},m.clip=function(i){t.clip(i),this.__originalClip(i)},m.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},m.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},m.bezierCurveTo=function(i,s,r,l,c,u){t.bezierCurveTo(i,s,r,l,c,u),this.__originalBezierCurveTo(i,s,r,l,c,u)},m.rect=function(i,s,r,l){t.rect(i,s,r,l),this.__originalRect(i,s,r,l)},m.closePath=function(){t.closePath(),this.__originalClosePath()},m.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class zv{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Co(m,t,i,s,r,l,c,u,h,f){const[p,y,b,A,S,_]=Qt(m);if(y===0&&b===0){const C=c*p+S,T=Math.round(C),L=u*A+_,O=Math.round(L),B=(c+h)*p+S,z=Math.abs(Math.round(B)-T)||1,$=(u+f)*A+_,K=Math.abs(Math.round($)-O)||1;return m.setTransform(Math.sign(p),0,0,Math.sign(A),T,O),m.drawImage(t,i,s,r,l,0,0,z,K),m.setTransform(p,y,b,A,S,_),[z,K]}if(p===0&&A===0){const C=u*b+S,T=Math.round(C),L=c*y+_,O=Math.round(L),B=(u+f)*b+S,z=Math.abs(Math.round(B)-T)||1,$=(c+h)*y+_,K=Math.abs(Math.round($)-O)||1;return m.setTransform(0,Math.sign(y),Math.sign(b),0,T,O),m.drawImage(t,i,s,r,l,0,0,K,z),m.setTransform(p,y,b,A,S,_),[K,z]}m.drawImage(t,i,s,r,l,c,u,h,f);const x=Math.hypot(p,y),w=Math.hypot(b,A);return[x*h,w*f]}class Np{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Au;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=de.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=Ps.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Te.FILL,i=null){const s=this.minMax.slice();if(t===Te.STROKE){i||Vt("Stroke bounding box must include transform."),tt.singularValueDecompose2dScale(i,Je);const r=Je[0]*this.lineWidth/2,l=Je[1]*this.lineWidth/2;s[0]-=r,s[1]-=l,s[2]+=r,s[3]+=l}return s}updateClipFromPath(){const t=tt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ps,0)}getClippedPathBoundingBox(t=Te.FILL,i=null){return tt.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Lp(m,t){if(t instanceof ImageData){m.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%Ue,l=(i-r)/Ue,c=r===0?l:l+1,u=m.createImageData(s,Ue);let h=0,f;const p=t.data,y=u.data;let b,A,S,_;if(t.kind===Oo.GRAYSCALE_1BPP){const x=p.byteLength,w=new Uint32Array(y.buffer,0,y.byteLength>>2),C=w.length,T=s+7>>3,L=4294967295,O=fe.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(S=b<l?Ue:r,f=0,A=0;A<S;A++){const B=x-h;let z=0;const $=B>T?s:B*8-7,K=$&-8;let J=0,Z=0;for(;z<K;z+=8)Z=p[h++],w[f++]=Z&128?L:O,w[f++]=Z&64?L:O,w[f++]=Z&32?L:O,w[f++]=Z&16?L:O,w[f++]=Z&8?L:O,w[f++]=Z&4?L:O,w[f++]=Z&2?L:O,w[f++]=Z&1?L:O;for(;z<$;z++)J===0&&(Z=p[h++],J=128),w[f++]=Z&J?L:O,J>>=1}for(;f<C;)w[f++]=0;m.putImageData(u,0,b*Ue)}}else if(t.kind===Oo.RGBA_32BPP){for(A=0,_=s*Ue*4,b=0;b<l;b++)y.set(p.subarray(h,h+_)),h+=_,m.putImageData(u,0,A),A+=Ue;b<c&&(_=s*r*4,y.set(p.subarray(h,h+_)),m.putImageData(u,0,A))}else if(t.kind===Oo.RGB_24BPP)for(S=Ue,_=s*S,b=0;b<c;b++){for(b>=l&&(S=r,_=s*S),f=0,A=_;A--;)y[f++]=p[h++],y[f++]=p[h++],y[f++]=p[h++],y[f++]=255;m.putImageData(u,0,b*Ue)}else throw new Error(`bad image kind: ${t.kind}`)}function kp(m,t){if(t.bitmap){m.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%Ue,l=(i-r)/Ue,c=r===0?l:l+1,u=m.createImageData(s,Ue);let h=0;const f=t.data,p=u.data;for(let y=0;y<c;y++){const b=y<l?Ue:r;({srcPos:h}=Lv({src:f,srcPos:h,dest:p,width:s,height:b,nonBlackColor:0})),m.putImageData(u,0,y*Ue)}}function Ua(m,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)m[s]!==void 0&&(t[s]=m[s]);m.setLineDash!==void 0&&(t.setLineDash(m.getLineDash()),t.lineDashOffset=m.lineDashOffset)}function Mo(m){m.strokeStyle=m.fillStyle="#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",m.setLineDash!==void 0&&(m.setLineDash([]),m.lineDashOffset=0);const{filter:t}=m;t!=="none"&&t!==""&&(m.filter="none")}function Bp(m,t){if(t)return!0;tt.singularValueDecompose2dScale(m,Je);const i=Math.fround(Ci.pixelRatio*Gs.PDF_TO_CSS_UNITS);return Je[0]<=i&&Je[1]<=i}const Pv=["butt","round","square"],Fv=["miter","round","bevel"],Uv={},zp={};class Hs{constructor(t,i,s,r,l,{optionalContentConfig:c,markedContentStack:u=null},h,f,p){this.ctx=t,this.current=new Np(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new zv(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Qt(this.compositeCtx))}this.ctx.save(),Mo(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Qt(this.ctx)}executeOperatorList(t,i,s,r,l){const c=t.argsArray,u=t.fnArray;let h=i||0;const f=c.length;if(f===h)return h;const p=f-h>Op&&typeof s=="function",y=p?Date.now()+kv:0;let b=0;const A=this.commonObjs,S=this.objs;let _,x;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!l||l(h))if(_=u[h],x=c[h]??null,_!==$a.dependency)x===null?this[_](h):this[_](h,...x);else for(const w of x){this.dependencyTracker?.recordNamedData(w,h);const C=w.startsWith("g_")?A:S;if(!C.has(w))return C.get(w,s),h}if(h++,h===f)return h;if(p&&++b>Op){if(Date.now()>y)return s(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,h=r,f="prescale1",p,y;for(;l>2&&u>1||c>2&&h>1;){let b=u,A=h;l>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/b),c>2&&h>1&&(A=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/A),p=this.cachedCanvases.getCanvas(f,b,A),y=p.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,h,0,0,b,A),t=p.canvas,u=b,h=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:l}=i,c=this.current.fillColor,u=this.current.patternFill,h=Qt(s);let f,p,y,b;if((i.bitmap||i.data)&&i.count>1){const J=i.bitmap||i.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get(J),f||(f=new Map,this._cachedBitmapsMap.set(J,f));const Z=f.get(p);if(Z&&!u){const ht=Math.round(Math.min(h[0],h[2])+h[4]),wt=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,di.transformAndFill),{canvas:Z,offsetX:ht,offsetY:wt}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,l),kp(b.context,i));let A=tt.transform(h,[1/r,0,0,-1/l,0,0]);A=tt.transform(A,[1,0,0,1,0,-l]);const S=Ps.slice();tt.axialAlignedBoundingBox([0,0,r,l],A,S);const[_,x,w,C]=S,T=Math.round(w-_)||1,L=Math.round(C-x)||1,O=this.cachedCanvases.getCanvas("fillCanvas",T,L),B=O.context,z=_,$=x;B.translate(-z,-$),B.transform(...A),y||(y=this._scaleImage(b.canvas,wi(B)),y=y.img,f&&u&&f.set(p,y)),B.imageSmoothingEnabled=Bp(Qt(B),i.interpolate),Co(B,y,0,0,y.width,y.height,0,0,r,l),B.globalCompositeOperation="source-in";const K=tt.transform(wi(B),[1,0,0,1,-z,-$]);return B.fillStyle=u?c.getPattern(s,this,K,Te.FILL,t):c,B.fillRect(0,0,r,l),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,O.canvas)),this.dependencyTracker?.recordDependencies(t,di.transformAndFill),{canvas:O.canvas,offsetX:Math.round(z),offsetY:Math.round($)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=Pv[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Fv[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),Ua(this.suspendedCtx,c),Bv(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ua(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const l=r[0],c=r[1],u=r[2]-l,h=r[3]-c;u===0||h===0||(this.genericComposeSMask(i.context,s,u,h,i.subtype,i.backdrop,i.transferMap,l,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,l,c,u,h,f,p,y){let b=t.canvas,A=h-p,S=f-y;if(c)if(A<0||S<0||A+s>b.width||S+r>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",s,r),w=x.context;w.drawImage(b,-A,-S),w.globalCompositeOperation="destination-atop",w.fillStyle=c,w.fillRect(0,0,s,r),w.globalCompositeOperation="source-over",b=x.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(A,S,s,r),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,S,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const _=new Path2D;_.rect(h,f,s,r),i.clip(_),i.globalCompositeOperation="destination-in",i.drawImage(b,A,S,s,r,h,f,s,r),i.restore()}save(t){this.inSMaskMode&&Ua(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ua(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,l,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,l,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[l]=s;if(!r){l||=s[0]=new Path2D,this[i](t,l);return}if(this.dependencyTracker!==null){const c=i===$a.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}l instanceof Path2D||(l=s[0]=Zp(l)),tt.axialAlignedBoundingBox(r,Qt(this.ctx),this.current.minMax),this[i](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,l=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=l.getPattern(r,this,wi(r),Te.STROKE,t),c){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(c)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,di.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Te.STROKE,Qt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=l.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=l.getPattern(r,this,wi(r),Te.FILL,t),f){const p=new Path2D;p.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,di.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,h)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,di.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Uv}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=zp}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,l=s.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:p}of i)p&&r.addPath(p,new DOMMatrix(c).preMultiplySelf(l).translate(u,h).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),l=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(l.fontMatrix=r.fontMatrix||Au,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+i),s<0?(s=-s,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const c=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let p=s;s<Dp?p=Dp:s>Rp&&(p=Rp),this.current.fontSizeScale=s/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,l,c){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,b=p&de.FILL_STROKE_MASK,A=!!(p&de.ADD_TO_PATH_FLAG),S=h.patternFill&&!f.missingFile,_=h.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||A||S||_)&&!f.missingFile&&(x=f.getPathGenerator(this.commonObjs,i)),x&&(f.disableFontFace||S||_)){u.save(),u.translate(s,r),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let w;if(b===de.FILL||b===de.FILL_STROKE)if(l){w=u.getTransform(),u.setTransform(...l);const C=this.#n(x,w,l);u.fill(C)}else u.fill(x);if(b===de.STROKE||b===de.FILL_STROKE)if(c){w||=u.getTransform(),u.setTransform(...c);const{a:C,b:T,c:L,d:O}=w,B=tt.inverseTransform(c),z=tt.transform([C,T,L,O,0,0],B);tt.singularValueDecompose2dScale(z,Je),u.lineWidth*=Math.max(Je[0],Je[1])/y,u.stroke(this.#n(x,w,c))}else u.lineWidth/=y,u.stroke(x);u.restore()}else(b===de.FILL||b===de.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i))),(b===de.STROKE||b===de.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i)).recordDependencies(t,di.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:Qt(u),x:s,y:r,fontSize:y,path:x}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return mt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,di.showText).resetBBox(t),this.current.textRenderingMode&de.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const l=s.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,h=s.charSpacing,f=s.wordSpacing,p=s.fontDirection,y=s.textHScale*p,b=i.length,A=r.vertical,S=A?1:-1,_=r.defaultVMetrics,x=l*s.fontMatrix[0],w=s.textRenderingMode===de.FILL&&!r.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),p>0?c.scale(y,-1):c.scale(y,1);let C,T;const L=s.textRenderingMode&de.FILL_STROKE_MASK,O=L===de.FILL||L===de.FILL_STROKE,B=L===de.STROKE||L===de.FILL_STROKE;if(O&&s.patternFill){c.save();const Z=s.fillColor.getPattern(c,this,wi(c),Te.FILL,t);C=Qt(c),c.restore(),c.fillStyle=Z}if(B&&s.patternStroke){c.save();const Z=s.strokeColor.getPattern(c,this,wi(c),Te.STROKE,t);T=Qt(c),c.restore(),c.strokeStyle=Z}let z=s.lineWidth;const $=s.textMatrixScale;if($===0||z===0?B&&(z=this.getSinglePixelWidth()):z/=$,u!==1&&(c.scale(u,u),z/=u),c.lineWidth=z,r.isInvalidPDFjsFont){const Z=[];let ht=0;for(const dt of i)Z.push(dt.unicode),ht+=dt.width;const wt=Z.join("");if(c.fillText(wt,0,0),this.dependencyTracker!==null){const dt=c.measureText(wt);this.dependencyTracker.recordBBox(t,this.ctx,-dt.actualBoundingBoxLeft,dt.actualBoundingBoxRight,-dt.actualBoundingBoxAscent,dt.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=ht*x*y,c.restore(),this.compose();return}let K=0,J;for(J=0;J<b;++J){const Z=i[J];if(typeof Z=="number"){K+=S*Z*l/1e3;continue}let ht=!1;const wt=(Z.isSpace?f:0)+h,dt=Z.fontChar,Dt=Z.accent;let N,q,W=Z.width;if(A){const D=Z.vmetric||_,H=-(Z.vmetric?D[1]:W*.5)*x,P=D[2]*x;W=D?-D[0]:W,N=H/u,q=(K+P)/u}else N=K/u,q=0;let ft;if(r.remeasure&&W>0){ft=c.measureText(dt);const D=ft.width*1e3/l*u;if(W<D&&this.isFontSubpixelAAEnabled){const H=W/D;ht=!0,c.save(),c.scale(H,1),N/=H}else W!==D&&(N+=(W-D)/2e3*l/u)}if(this.contentVisible&&(Z.isInFont||r.missingFile)){if(w&&!Dt)c.fillText(dt,N,q),this.dependencyTracker?.recordCharacterBBox(t,c,ft?{bbox:null}:r,l/u,N,q,()=>ft??c.measureText(dt));else if(this.paintChar(t,dt,N,q,C,T),Dt){const D=N+l*Dt.offset.x/u,H=q-l*Dt.offset.y/u;this.paintChar(t,Dt.fontChar,D,H,C,T)}}const At=A?W*x-wt*p:W*x+wt*p;K+=At,ht&&c.restore()}A?s.y-=K:s.x+=K*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,l=r.font,c=r.fontSize,u=r.fontDirection,h=l.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,y=r.textHScale*u,b=r.fontMatrix||Au,A=i.length,S=r.textRenderingMode===de.INVISIBLE;let _,x,w,C;if(S||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(y,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new Lo(T,t):null,_=0;_<A;++_){if(x=i[_],typeof x=="number"){C=h*x*c/1e3,this.ctx.translate(C,0),r.x+=C*y;continue}const L=(x.isSpace?p:0)+f,O=l.charProcOperatorList[x.operatorListId];O?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...b),this.executeOperatorList(O),this.restore()):pt(`Type3 character "${x.operatorListId}" is not available.`);const B=[x.width,0];tt.applyTransform(B,b),w=B[0]*c+L,s.translate(w,0),r.x+=w*y}s.restore(),T&&(this.dependencyTracker=T)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,l,c,u){const h=new Path2D;h.rect(r,l,c-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,l,u).recordClipBox(t,this.ctx,r,c,l,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||Qt(this.ctx),l={createCanvasGraphics:(c,u)=>new Hs(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Lo(this.dependencyTracker,u,!0):null)};s=new ju(i,this.ctx,l,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=Nv(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,wi(s),Te.SHADING,t);const l=wi(s);if(l){const{width:c,height:u}=s.canvas,h=Ps.slice();tt.axialAlignedBoundingBox([0,0,c,u],l,h);const[f,p,y,b]=h;this.ctx.fillRect(f,p,y-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,di.transform).recordDependencies(t,di.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Vt("Should not call beginInlineImage")}beginImageData(){Vt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Qt(this.ctx),s)){tt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,l,c,u]=s,h=new Path2D;h.rect(r,l,c-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,l,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||Po("TODO: Support non-isolated groups."),i.knockout&&pt("Knockout groups not supported.");const r=Qt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let l=Ps.slice();tt.axialAlignedBoundingBox(i.bbox,Qt(s),l);const c=[0,0,s.canvas.width,s.canvas.height];l=tt.intersect(l,c)||[0,0,0,0];const u=Math.floor(l[0]),h=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-u,1),p=Math.max(Math.ceil(l[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,p),A=b.context;A.translate(-u,-h),A.transform(...r);let S=new Path2D;const[_,x,w,C]=i.bbox;if(S.rect(_,x,w-_,C-x),i.matrix){const T=new Path2D;T.addPath(S,new DOMMatrix(i.matrix)),S=T}A.clip(S),i.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:h,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),Ua(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Qt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=Ps.slice();tt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],l,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,i,s,r,l,c){if(this.#t(),Mo(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,tt.singularValueDecompose2dScale(Qt(this.ctx),Je);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(Je[0],0,0,-Je[1],0,h*Je[1]),Mo(this.ctx)}else{Mo(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,h),this.ctx.clip(f)}}this.current=new Np(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,l=this._createMaskCanvas(t,i),c=l.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,l=0,c,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const h=this.ctx;h.save();const f=Qt(h);h.transform(s,r,l,c,0,0);const p=this._createMaskCanvas(t,i);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=tt.transform(f,[s,r,l,c,u[y],u[y+1]]);h.drawImage(p.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+p.canvas.width,A[5],A[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,di.transformAndFill);for(const c of i){const{data:u,width:h,height:f,transform:p}=c,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=y.context;b.save();const A=this.getObject(t,u,c);kp(b,A),b.globalCompositeOperation="source-in",b.fillStyle=l?r.getPattern(b,this,wi(s),Te.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),s.save(),s.transform(...p),s.scale(1,-1),Co(s,y.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,h,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,l){if(!this.contentVisible)return;const c=this.getObject(t,i);if(!c){pt("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let p=0,y=l.length;p<y;p+=2)f.push({transform:[s,0,0,r,l[p],l[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",s,r),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const p=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Lp(p,i),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,wi(l));l.imageSmoothingEnabled=Bp(Qt(l),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,s,-r,0).recordDependencies(t,di.imageXObject).recordOperation(t),Co(l,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let l;if(i.bitmap)l=i.bitmap;else{const c=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;Lp(f,i),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)r.save(),r.transform(...c.transform),r.scale(1,-1),Co(r,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,di.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const l=this.ctx;this.pendingClip?(r||(this.pendingClip===zp?l.clip(i,"evenodd"):l.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Qt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:l}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const h=Math.abs(i),f=Math.abs(l);if(h===f)if(t===0)c=u=1/h;else{const p=h*t;c=u=p<1?1/p:1}else if(t===0)c=1/h,u=1/f;else{const p=h*t,y=f*t;c=p<1?1/p:1,u=y<1?1/y:1}}else{const h=Math.abs(i*l-s*r),f=Math.hypot(i,s),p=Math.hypot(r,l);if(t===0)c=p/h,u=f/h;else{const y=t*h;c=p>y?p/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[l,c]=this.getScaleForStroking();if(l===c){s.lineWidth=(r||1)*l,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(l,c),mu.a=1/l,mu.d=1/c;const h=new Path2D;if(h.addPath(t,mu),u.length>0){const f=Math.max(l,c);s.setLineDash(u.map(p=>p/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(h),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const m in $a)Hs.prototype[m]!==void 0&&(Hs.prototype[$a[m]]=Hs.prototype[m]);class js{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Iv{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ks=Symbol("INTERNAL");class Hv{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:l}){this.#t=!!(t&Ze.DISPLAY),this.#e=!!(t&Ze.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=l}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==ks&&Vt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class jv{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=Ze.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new Hv(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(ks,!1);for(const s of t.on)this.#e.get(s)._setVisible(ks,!0);for(const s of t.off)this.#e.get(s)._setVisible(ks,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const l=t[r];let c;if(Array.isArray(l))c=this.#r(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return pt(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Po("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return pt(`Unknown optional content policy ${t.policy}.`),!0}return pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){pt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const l of r.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(ks,!1,!0);r._setVisible(ks,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const l=this.#e.get(r);if(l)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!l.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Jp;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Gv{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Mt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,l?.length>0){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(s),!0)});Mt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new qv(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Vv(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class qv{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=zu(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Vv{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Xv(m){let t=!0,i=s("filename\\*","i").exec(m);if(i){i=i[1];let p=u(i);return p=unescape(p),p=h(p),p=f(p),l(p)}if(i=c(m),i){const p=f(i);return l(p)}if(i=s("filename","i").exec(m),i){i=i[1];let p=u(i);return p=f(p),l(p)}function s(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(p,{fatal:!0}),A=Za(y);y=b.decode(A),t=!1}catch{}}return y}function l(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function c(p){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(p))!==null;){let[,_,x,w]=b;if(_=parseInt(_,10),_ in y){if(_===0)break;continue}y[_]=[x,w]}const S=[];for(let _=0;_<y.length&&_ in y;++_){let[x,w]=y[_];w=u(w),x&&(w=unescape(w),_===0&&(w=h(w))),S.push(w)}return S.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function h(p){const y=p.indexOf("'");if(y===-1)return p;const b=p.slice(0,y),S=p.slice(y+1).replace(/^[^']*'/,"");return r(b,S)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,x){return String.fromCharCode(parseInt(x,16))}),r(b,S);try{S=atob(S)}catch{}return r(b,S)})}return""}function rm(m,t){const i=new Headers;if(!m||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function Io(m){return URL.parse(m)?.origin??null}function om({responseHeaders:m,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(m.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*i)||s||!t||m.get("Accept-Ranges")!=="bytes"||(m.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function lm(m){const t=m.get("Content-Disposition");if(t){let i=Xv(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(zu(i))return i}return null}function ir(m,t){return new No(`Unexpected server response (${m}) while retrieving PDF "${t}".`,m,m===404||m===0&&t.startsWith("file:"))}function cm(m){return m===200||m===206}function um(m,t,i){return{method:"GET",headers:m,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function hm(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:(pt(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class Yv{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=rm(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new $v(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Kv(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class $v{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,um(s,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Io(l.url),!cm(l.status))throw ir(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:u,suggestedLength:h}=om({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=lm(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new wn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:hm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Kv{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${i}-${s-1}`);const c=r.url;fetch(c,um(l,this._withCredentials,this._abortController)).then(u=>{const h=Io(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!cm(u.status))throw ir(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:hm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const yu=200,bu=206;function Qv(m){const t=m.response;return typeof t!="string"?t:Za(t).buffer}class Zv{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=rm(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[l,c]of this.headers)i.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=bu):r.expectedStatus=yu,i.responseType="arraybuffer",Mt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const l=r.status||yu;if(!(l===yu&&s.expectedStatus===bu)&&l!==s.expectedStatus){s.onError(r.status);return}const u=Qv(r);if(l===bu){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(pt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class Wv{constructor(t){this._source=t,this._manager=new Zv(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Jv(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new tA(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Jv{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Io(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=om({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=lm(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ir(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tA{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Io(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=ir(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const eA=/^[a-z][a-z0-9\-+.]+:/i;function iA(m){if(eA.test(m))return new URL(m);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(m))}class nA{constructor(t){this.source=t,this.url=iA(t.url),Mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new sA(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new aA(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class sA{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=ir(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new wn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class aA{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ia=Symbol("INITIAL_DATA");class dm{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ia}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===Ia)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==Ia}delete(t){const i=this.#t[t];return!i||i.data===Ia?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==Ia&&(yield[t,i])}}}const rA=1e5,Pp=30;class We{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#x=new WeakMap;static#w=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*Ci.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+l],this.#o=r,this.#s=l,We.#D(),i.style.setProperty("--min-font-size",We.#w),qn(i,s),this.#t.promise.finally(()=>{We.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=fe.platform;return mt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#C(i.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),We.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Ci.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,qn(this.#l,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const l={div:null,properties:null,ctx:We.#R(this.#r)};for(const c of this.#u)l.properties=this.#g.get(c),l.div=c,this.#E(l)}}cancel(){const t=new wn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#n)return;this.#a.ctx??=We.#R(this.#r);const i=this.#u,s=this.#m;for(const r of t){if(i.length>rA){pt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),l.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=tt.transform(this.#y,t.transform);let l=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=We.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*We.#P(u,c,this.#r);let p,y;l===0?(p=r[4],y=r[5]-f):(p=r[4]+f*Math.sin(l),y=r[5]-f*Math.cos(l));const b=i.style;b.left=`${(100*p/this.#o).toFixed(2)}%`,b.top=`${(100*y/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${h.toFixed(2)}px`),b.fontFamily=u,s.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(s.angle=l*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(A=!0)}if(A&&(s.canvasWidth=c.vertical?t.height:t.width),this.#g.set(i,s),this.#a.div=i,this.#a.properties=s,this.#E(this.#a),s.hasText&&this.#e.append(i),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#E(t){const{div:i,properties:s,ctx:r}=t,{style:l}=i;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=l,{canvasWidth:u,fontSize:h}=s;We.#M(r,h*this.#h,c);const{width:f}=r.measureText(i.textContent);f>0&&l.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&l.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#R(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#x.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#x.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#D(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#P(t,i,s){const r=this.#v.get(t);if(r)return r;const l=this.#R(s);l.canvas.width=l.canvas.height=Pp,this.#M(l,Pp,t);const c=l.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return u?f=u/(u+h):(fe.platform.isFirefox&&pt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const oA=100;function fm(m={}){typeof m=="string"||m instanceof URL?m={url:m}:(m instanceof ArrayBuffer||ArrayBuffer.isView(m))&&(m={data:m});const t=new Gu,{docId:i}=t,s=m.url?gv(m.url):null,r=m.data?pv(m.data):null,l=m.httpHeaders||null,c=m.withCredentials===!0,u=m.password??null,h=m.range instanceof gm?m.range:null,f=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:2**16;let p=m.worker instanceof xe?m.worker:null;const y=m.verbosity,b=typeof m.docBaseUrl=="string"&&!Fo(m.docBaseUrl)?m.docBaseUrl:null,A=wo(m.cMapUrl),S=m.cMapPacked!==!1,_=m.CMapReaderFactory||(De?wv:wp),x=wo(m.iccUrl),w=wo(m.standardFontDataUrl),C=m.StandardFontDataFactory||(De?Ev:Ep),T=wo(m.wasmUrl),L=m.WasmFactory||(De?xv:xp),O=m.stopAtErrors!==!0,B=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,z=m.isEvalSupported!==!1,$=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!De,K=typeof m.isImageDecoderSupported=="boolean"?m.isImageDecoderSupported:!De&&(fe.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,Z=typeof m.disableFontFace=="boolean"?m.disableFontFace:De,ht=m.fontExtraProperties===!0,wt=m.enableXfa===!0,dt=m.ownerDocument||globalThis.document,Dt=m.disableRange===!0,N=m.disableStream===!0,q=m.disableAutoFetch===!0,W=m.pdfBug===!0,ft=m.CanvasFactory||(De?_v:vv),At=m.FilterFactory||(De?Sv:Av),D=m.enableHWA===!0,H=m.useWasm!==!1,P=h?h.length:m.length??NaN,Q=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!De&&!Z,et=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:!!(_===wp&&C===Ep&&L===xp&&A&&w&&T&&Ga(A,document.baseURI)&&Ga(w,document.baseURI)&&Ga(T,document.baseURI)),nt=null;Hb(y);const at={canvasFactory:new ft({ownerDocument:dt,enableHWA:D}),filterFactory:new At({docId:i,ownerDocument:dt}),cMapReaderFactory:et?null:new _({baseUrl:A,isCompressed:S}),standardFontDataFactory:et?null:new C({baseUrl:w}),wasmFactory:et?null:new L({baseUrl:T})};p||(p=xe.create({verbosity:y,port:js.workerPort}),t._worker=p);const Bt={docId:i,apiVersion:"5.4.530",data:r,password:u,disableAutoFetch:q,rangeChunkSize:f,length:P,docBaseUrl:b,enableXfa:wt,evaluatorOptions:{maxImageSize:B,disableFontFace:Z,ignoreErrors:O,isEvalSupported:z,isOffscreenCanvasSupported:$,isImageDecoderSupported:K,canvasMaxAreaInBytes:J,fontExtraProperties:ht,useSystemFonts:Q,useWasm:H,useWorkerFetch:et,cMapUrl:A,iccUrl:x,standardFontDataUrl:w,wasmUrl:T}},ct={ownerDocument:dt,pdfBug:W,styleElement:nt,loadingParams:{disableAutoFetch:q,enableXfa:wt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ut=p.messageHandler.sendWithPromise("GetDocRequest",Bt,r?[r.buffer]:null);let bi;if(h)bi=new Gv(h,{disableRange:Dt,disableStream:N});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Mi=Ga(s)?Yv:De?nA:Wv;bi=new Mi({url:s,length:P,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:Dt,disableStream:N})}return Ut.then(Mi=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ki=new qa(i,Mi,p.port),Xt=new uA(Ki,t,bi,ct,at,D);t._transport=Xt,Ki.send("Ready",null)})}).catch(t._capability.reject),t}class Gu{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Gu.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class gm{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Vt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class lA{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return mt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class cA{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new mp:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new dm,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:l=!1}={}){return new Ja({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return mt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:l=_n.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:S=null}){this._stats?.time("Overall");const _=this._transport.getRenderingIntent(r,l,y,b),{renderingIntent:x,cacheKey:w}=_;this.#t=!1,h||=this._transport.getOptionalContentConfig(x);let C=this._intentStates.get(w);C||(C=Object.create(null),this._intentStates.set(w,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(x&Ze.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(_));const L=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(A||L),B=K=>{if(C.renderTasks.delete(z),O){const J=z.gfx?.dependencyTracker.take();J&&(z.stepper&&z.stepper.setOperatorBBoxes(J,z.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=J))}T&&(this.#t=!0),this.#e(),K?(z.capability.reject(K),this._abortOperatorList({intentState:C,reason:K instanceof Error?K:new Error(K)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new Fs({callback:B,params:{canvas:i,canvasContext:t,dependencyTracker:O?new Cv(i,C.operatorList.length,L):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:S});(C.renderTasks||=new Set).add(z);const $=z.task;return Promise.all([C.displayReadyCapability.promise,h]).then(([K,J])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(J.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:K,optionalContentConfig:J}),z.operatorListChanged()}).catch(B),$}getOperatorList({intent:t="display",annotationMode:i=_n.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Ka.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function l(){c.read().then(function({value:h,done:f}){if(f){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),l()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new mp),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:l,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:l,modifiedIds:r},c).getReader(),f=this._intentStates.get(i);f.streamReader=h;const p=()=>{h.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Bu){let r=oA;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new wn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class xe{#t=Promise.withResolvers();#e=null;#n=null;#i=null;static#r=0;static#a=!1;static#s=new WeakMap;static{De&&(this.#a=!0,js.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},this._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},this.fromPort=t=>{if(tv("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.create(t)}}constructor({name:t=null,port:i=null,verbosity:s=jb()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(xe.#s.has(i))throw new Error("Cannot use more than one PDFWorker per port.");xe.#s.set(i,this),this.#c(i)}else this.#l()}get promise(){return this.#t.promise}#o(){this.#t.resolve(),this.#e.send("configure",{verbosity:this.verbosity})}get port(){return this.#n}get messageHandler(){return this.#e}#c(t){this.#n=t,this.#e=new qa("main","worker",t),this.#e.on("ready",()=>{}),this.#o()}#l(){if(xe.#a||xe.#h){this.#d();return}let{workerSrc:t}=xe;try{xe._isSameOrigin(window.location,t)||(t=xe._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new qa("main","worker",i),r=()=>{l.abort(),s.destroy(),i.terminate(),this.destroyed?this.#t.reject(new Error("Worker was destroyed")):this.#d()},l=new AbortController;i.addEventListener("error",()=>{this.#i||r()},{signal:l.signal}),s.on("test",u=>{if(l.abort(),this.destroyed||!u){r();return}this.#e=s,this.#n=i,this.#i=i,this.#o()}),s.on("ready",u=>{if(l.abort(),this.destroyed){r();return}try{c()}catch{this.#d()}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{Po("The worker has been disabled.")}this.#d()}#d(){xe.#a||(pt("Setting up fake worker."),xe.#a=!0),xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this.#t.reject(new Error("Worker was destroyed"));return}const i=new bv;this.#n=i;const s=`fake${xe.#r++}`,r=new qa(s+"_worker",s,i);t.setup(r,i),this.#e=new qa(s,s+"_worker",i),this.#o()}).catch(t=>{this.#t.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this.#i?.terminate(),this.#i=null,xe.#s.delete(this.#n),this.#n=null,this.#e?.destroy(),this.#e=null}static create(t){const i=this.#s.get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new xe(t)}static get workerSrc(){if(js.workerSrc)return js.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#h(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return mt(this,"_setupFakeWorkerGlobal",(async()=>this.#h?this.#h:(await import(this.workerSrc)).WorkerMessageHandler)())}}class uA{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,r,l,c){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new dm,this.fontLoader=new hv({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return mt(this,"annotationStorage",new Uu)}getRenderingIntent(t,i=_n.ENABLE,s=null,r=!1,l=!1){let c=Ze.DISPLAY,u=Tu;switch(t){case"any":c=Ze.ANY;break;case"display":break;case"print":c=Ze.PRINT;break;default:pt(`getRenderingIntent - invalid intent: ${t}`)}const h=c&Ze.PRINT&&s instanceof tm?s:this.annotationStorage;switch(i){case _n.DISABLE:c+=Ze.ANNOTATIONS_DISABLE;break;case _n.ENABLE:break;case _n.ENABLE_FORMS:c+=Ze.ANNOTATIONS_FORMS;break;case _n.ENABLE_STORAGE:c+=Ze.ANNOTATIONS_STORAGE,u=h.serializable;break;default:pt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=Ze.IS_EDITING),l&&(c+=Ze.OPLIST);const{ids:f,hash:p}=h.modifiedIds,y=[c,u.hash,p];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),We.cleanup(),this._networkStream?.cancelAllRequests(new wn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){r.close();return}Mt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:c}=this._fullReader;return(!r||!l)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{Mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:c,done:u}){if(u){r.close();return}Mt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{l.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new lA(s,this))}),t.on("DocException",s=>{i._capability.reject(Fe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw Fe(s);const r=l=>{l instanceof Error?this.#r.reject(l):this.#r.resolve({password:l})};i.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in l){const y=l.error;pt(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const c=new Gt(l),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,h=new dv(c,u,l.extra,l.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=l;Mt(f,"The imageRef must be defined.");for(const y of this.#e.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new fv(l));break;case"Image":this.commonObjs.resolve(s,l);break;case"Pattern":const p=new ye(l);this.commonObjs.resolve(s,p.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,l,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#i.set(l.refStr,t);const c=new cA(i,l,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#n.set(i,r),r}getPageIndex(t){return Cu(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(i=>new jv(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new Iv(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:r[2]}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),We.cleanup()}}cachedPageNumber(t){if(!Cu(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class hA{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class Fs{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:l,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:S=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new hA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(Fs.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Fs.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:l,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Hs(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Fs.#e.delete(this._canvas),t||=new Bu(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Fs.#e.delete(this._canvas),this.callback())))}}const dA="5.4.530",fA="50cc4adac";class fi{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return mt(this,"_keyboardManager",new er([[["Escape","mac+Escape"],fi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fi.prototype._moveToPrevious],[["Home","mac+Home"],fi.prototype._moveToBeginning],[["End","mac+End"],fi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",fi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",gi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=s,l.setAttribute("data-l10n-id",fi.#d[s]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=r,l.ariaSelected=r===this.#n,l.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(l)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ct.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#i.lastElementChild?.focus()}#m(t){fi._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#g){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Qa{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Qa.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Qa.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Fp(m){return Math.floor(Math.max(0,Math.min(1,m))*255).toString(16).padStart(2,"0")}function Ha(m){return Math.max(0,Math.min(255,255*m))}class Up{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ha(t),[t,t,t]}static G_HTML([t]){const i=Fp(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(Ha)}static RGB_HTML(t){return`#${t.map(Fp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[Ha(1-Math.min(1,t+r)),Ha(1-Math.min(1,s+r)),Ha(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,l=1-i,c=1-s,u=Math.min(r,l,c);return["CMYK",r,l,c,u]}}class gA{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Vt("Abstract method `_createSVG` called.")}}class ko extends gA{_createSVG(t){return document.createElementNS(Yi,t)}}const pA=9,Vn=new WeakSet,mA=new Date().getTimezoneOffset()*60*1e3;class vu{static create(t){switch(t.data.annotationType){case ue.LINK:return new qu(t);case ue.TEXT:return new bA(t);case ue.WIDGET:switch(t.data.fieldType){case"Tx":return new vA(t);case"Btn":return t.data.radioButton?new pm(t):t.data.checkBox?new SA(t):new _A(t);case"Ch":return new wA(t);case"Sig":return new AA(t)}return new Yn(t);case ue.POPUP:return new Ru(t);case ue.FREETEXT:return new mm(t);case ue.LINE:return new xA(t);case ue.SQUARE:return new TA(t);case ue.CIRCLE:return new CA(t);case ue.POLYLINE:return new ym(t);case ue.CARET:return new DA(t);case ue.INK:return new Vu(t);case ue.POLYGON:return new MA(t);case ue.HIGHLIGHT:return new bm(t);case ue.UNDERLINE:return new RA(t);case ue.SQUIGGLY:return new OA(t);case ue.STRIKEOUT:return new NA(t);case ue.STAMP:return new vm(t);case ue.FILEATTACHMENT:return new LA(t);default:return new Wt(t)}}}class Wt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Wt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let l=-1/0,c=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>c?(c=i[u+1],l=i[u+2]):i[u+1]===c&&(l=Math.max(l,i[u+2]));return[l,c]}if(s?.length>=1){for(const u of s)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],l=u[h]):u[h+1]===c&&(l=Math.max(l,u[h]));if(l!==1/0)return[l,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-l)/s,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Ya}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${Ya}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/l}%`,i.top=`${100*(c-t[3]+h)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/l}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",i.id),!(this instanceof Yn)&&!(this instanceof qu)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(l.title=i.alternativeText),i.noRotate&&l.classList.add("norotate"),!i.rect||this instanceof Ru){const{rotation:_}=i;return!i.hasOwnCanvas&&_!==0&&this.setRotation(_,l),l}const{width:u,height:h}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const _=i.borderStyle.horizontalCornerRadius,x=i.borderStyle.verticalCornerRadius;if(_>0||x>0){const C=`calc(${_}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;c.borderRadius=C}else if(this instanceof pm){const C=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=C}switch(i.borderStyle.style){case Ls.SOLID:c.borderStyle="solid";break;case Ls.DASHED:c.borderStyle="dashed";break;case Ls.BEVELED:pt("Unimplemented border style: beveled");break;case Ls.INSET:pt("Unimplemented border style: inset");break;case Ls.UNDERLINE:c.borderBottomStyle="solid";break}const w=i.borderColor||null;w?(this.#e=!0,c.borderColor=tt.makeHexColor(w[0]|0,w[1]|0,w[2]|0)):c.borderWidth=0}const f=tt.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:y,pageX:b,pageY:A}=r.rawDims;c.left=`${100*(f[0]-b)/p}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:S}=i;return i.hasOwnCanvas||S===0?(c.width=`${100*u/p}%`,c.height=`${100*h/y}%`):this.setRotation(S,l),l}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),i.style.width=`${100*l/s}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const l=r.detail[i],c=l[0],u=l.slice(1);r.target.style[s]=Up[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Up[`${c}_rgb`](u)})};return mt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,l]of Object.entries(i)){const c=s[r];if(c){const u={detail:{[r]:l},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,l]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,x,w,C]=t.subarray(2,6);if(r===_&&l===x&&i===w&&s===C)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:_,borderWidth:x}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const h=r-i,f=l-s,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=p.createElement("defs");y.append(b);const A=p.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let _=2,x=t.length;_<x;_+=8){const w=t[_],C=t[_+1],T=t[_+2],L=t[_+3],O=p.createElement("rect"),B=(T-i)/h,z=(l-C)/f,$=(w-T)/h,K=(C-L)/f;O.setAttribute("x",B),O.setAttribute("y",z),O.setAttribute("width",$),O.setAttribute("height",K),A.append(O),u?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${z}" width="${$}" height="${K}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new Ru({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Vt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:c,exportValues:u}of r){if(l===-1||c===i)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Vn.has(f)){pt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,c=r.getAttribute("data-element-id");c!==i&&Vn.has(r)&&s.push({id:c,exportValue:l,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class yA extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class qu extends Wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const l=s.get(r);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:l,include:c}=i,u=[];if(r.length!==0||l.length!==0){const p=new Set(l);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)p.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)p.has(b.id)===c&&u.push(b)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,f=[];for(const p of u){const{id:y}=p;switch(f.push(y),p.type){case"text":{const A=p.defaultValue||"";h.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=p.defaultValue===p.exportValues;h.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=p.defaultValue||"";h.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!Vn.has(b)){pt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class bA extends Wt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Yn extends Wt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return fe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,l){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c)}})})}_setEventListeners(t,i,s,r){for(const[l,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,l,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":tt.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||pA,l=t.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(hu*r))||1,y=f/p;c=Math.min(r,h(y/hu))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,h(f/hu))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=tt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class vA extends Yn{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),l.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let l=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Vn.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:y}=this.data,b=!!p&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",S=>{t.setValue(i,{value:S.target.value}),this.setPropertyOnSiblings(s,"value",S.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",S=>{const _=this.data.defaultFieldValue??"";s.value=h.userValue=_,h.formattedValue=null});let A=S=>{const{formattedValue:_}=h;_!=null&&(S.target.value=_),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",_=>{if(h.focused)return;const{target:x}=_;if(b&&(x.type=p,y&&(x.step=y)),h.userValue){const w=h.userValue;if(b)if(p==="time"){const C=new Date(w),T=[C.getHours(),C.getMinutes(),C.getSeconds()];x.value=T.map(L=>L.toString().padStart(2,"0")).join(":")}else x.value=new Date(w-mA).toISOString().split(p==="date"?"T":".",1)[0];else x.value=w}h.lastCommittedValue=x.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const x={value(w){h.userValue=w.detail.value??"",b||t.setValue(i,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:C}=w.detail;h.formattedValue=C,C!=null&&w.target!==document.activeElement&&(w.target.value=C);const T={formattedValue:C};b&&(T.value=C),t.setValue(i,T)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:C}=w.detail,{target:T}=w;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let L=h.userValue;!L||L.length<=C||(L=L.slice(0,C),T.value=h.userValue=L,t.setValue(i,{value:L}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,_)}),s.addEventListener("keydown",_=>{h.commitKey=1;let x=-1;if(_.key==="Escape"?x=0:_.key==="Enter"&&!this.data.multiLine?x=2:_.key==="Tab"&&(h.commitKey=3),x===-1)return;const{value:w}=_.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:x,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const S=A;A=null,s.addEventListener("blur",_=>{if(!h.focused||!_.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:x}=_;let{value:w}=x;if(b){if(w&&p==="time"){const C=w.split(":").map(T=>parseInt(T,10));w=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),x.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();x.type="text"}h.userValue=w,h.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}),S(_)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",_=>{h.lastCommittedValue=null;const{data:x,target:w}=_,{value:C,selectionStart:T,selectionEnd:L}=w;let O=T,B=L;switch(_.inputType){case"deleteWordBackward":{const z=C.substring(0,T).match(/\w*[^\w]*$/);z&&(O-=z[0].length);break}case"deleteWordForward":{const z=C.substring(T).match(/^[^\w]*\w*/);z&&(B+=z[0].length);break}case"deleteContentBackward":T===L&&(O-=1);break;case"deleteContentForward":T===L&&(B+=1);break}_.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:C,change:x||"",willCommit:!1,selStart:O,selEnd:B}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class AA extends Yn{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class SA extends Yn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Vn.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",i.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s)){const p=h&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class pm extends Yn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(Vn.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;l.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=p&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class _A extends qu{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class wA extends Yn{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");Vn.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,s.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let c=null;if(l){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),c=()=>{p.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=p=>{const y=p?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,S=>S.selected).map(S=>S[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let h=u(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const y={value(b){c?.();const A=b.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const _ of r.options)_.selected=S.has(_.value);t.setValue(i,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,S=b.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,x=>x.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),h=u(!1)},insert(b){const{index:A,displayValue:S,exportValue:_}=b.detail.insert,x=r.children[A],w=document.createElement("option");w.textContent=S,w.value=_,x?x.before(w):r.append(w),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:_,exportValue:x}=S,w=document.createElement("option");w.textContent=_,w.value=x,r.append(w)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const S of b.target.options)S.selected=A.has(S.index);t.setValue(i,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,p)}),r.addEventListener("input",p=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:h,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ru extends Wt{constructor(t){const{data:i,elements:s,parent:r}=t,l=!!r._commentManager;if(super(t,{isRenderable:!l&&Wt._hasPopupData(i)}),this.elements=s,l&&Wt._hasPopupData(i)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new EA({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${zs}${r}`).join(",")),this.container}}class EA{#t=null;#e=this.#q.bind(this);#n=this.#U.bind(this);#i=this.#L.bind(this);#r=this.#_.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#x=null;#w=null;#S=null;#C=!1;#A=null;#E=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:l,contentsObj:c,richText:u,parent:h,rect:f,parentRect:p,open:y,commentManager:b=null}){this.#s=t,this.#w=r,this.#o=c,this.#x=u,this.#d=h,this.#a=i,this.#b=f,this.#h=p,this.#l=s,this.#t=b,this.#A=s[0],this.#c=wu.toDateObject(l),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b||(this.#R(),this.#s.hidden=!0,y&&this.#_())}#R(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g){this.#g.parentNode||this.#A.container.after(this.#g);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#p=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#g=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#g=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#D(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),u.after(c)}}#D(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#g||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#P(){this.#A.extraPopupElement||(this.#g||this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}}get elementBeforePopup(){return this.#g}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(t){t!==this.comment&&(this.#A.commentText=this.#E=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=i)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#g.getBoundingClientRect(),{x:r,y:l,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/c,(i+s-l)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:l,y:c,width:u,height:h}=r;this.#t.showDialog(null,this,l+i*u,c+s*h,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=tt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}Qp({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#N(){const t=this.#x,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#x.html||null}get#k(){return this.#N?.attributes?.style?.fontSize||0}get#F(){return this.#N?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))i.push({name:"span",value:l,attributes:r});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#E=null):i&&(i.deleted?this.remove():(this.#P(),this.#E=i.text)),t&&(this.#y=null,this.#M(),this.#D());return}if(s||i?.deleted){this.remove();return}this.#R(),this.#S||={contentsObj:this.#o,richText:this.#x},t&&(this.#u=null),i&&i.text&&(this.#x=this.#B(i.text),this.#c=wu.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#x}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:l}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#b;for(const S of this.#l)if(!u||tt.intersect(S.data.rect,u)!==null){u=S.data.rect,c=!0;break}const h=tt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,y=h[0]+p,b=h[1];this.#u=[100*(y-r)/i,100*(b-l)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#_(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#C&&(this.#m||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class mm extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=yt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class xA extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class TA extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",i-l),c.setAttribute("height",s-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class CA extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-l/2),c.setAttribute("ry",s/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ym extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:l,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(l,c,!0);let h=[];for(let p=0,y=i.length;p<y;p+=2){const b=i[p]-t[0],A=t[3]-i[p+1];h.push(`${b},${A}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class MA extends ym{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class DA extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Vu extends Wt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?yt.HIGHLIGHT:yt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:l}}=this,{transform:c,width:u,height:h}=this.#n(i,t),f=this.svgFactory.create(u,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),p.append(A)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,l=this.#t;if(i>=0&&l.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:h}=this.#n(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class bm extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=yt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class RA extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class OA extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class NA extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class vm extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=yt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class LA extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=fe.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Xu{#t=null;#e=null;#n=null;#i=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:l,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#a=f||null,this.#n=p||new Uu,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;qn(s,this.viewport);const r=new Map,l=[],c={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ko,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const h=u.annotationType===ue.POPUP;if(h){const y=r.get(u.id);if(!y)continue;if(!this._commentManager){l.push(u);continue}c.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=vu.create(c);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const y=r.get(u.popupRef);y?y.push(f):r.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of l){const h=c.elements=r.get(u.id);c.data=u;const f=vu.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${zs}${u.id}`,u.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const l=s.id=`${zs}${r}`;t.push(this.#r?.getAriaAttributes(l).then(c=>{if(c)for(const[u,h]of c)s.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[s,r,l,c]}},{data:{rect:[u,h,f,p]}})=>{if(s===l&&r===c)return 1;if(u===f&&h===p)return-1;const y=c,b=r,A=(r+c)/2,S=p,_=h,x=(h+p)/2;if(A>=S&&x<=b)return-1;if(x>=y&&A<=_)return 1;const w=(s+l)/2,C=(u+f)/2;return w-C});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#a,svgFactory:new ko,parent:this};for(const s of t){s.borderStyle||=Xu._defaultBorderStyle,i.data=s;const r=vu.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${zs}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,qn(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):r.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,l=new yA({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return l.render(),l.contentElement.id=`${zs}${s}`,l.createOrUpdatePopup(),this.#s.push(l),l}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return mt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ls.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Do=/\r\n?|\n/g;class be extends lt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=be.prototype,i=l=>l.isEmpty(),s=En.TRANSLATE_SMALL,r=En.TRANSLATE_BIG;return mt(this,"_keyboardManager",new er([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=yt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||be._defaultColor||lt._defaultLineColor,this.#i=t.fontSize||be._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){lt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ct.FREETEXT_SIZE:be._defaultFontSize=i;break;case Ct.FREETEXT_COLOR:be._defaultColor=i;break}}updateParams(t,i){switch(t){case Ct.FREETEXT_SIZE:this.#r(i);break;case Ct.FREETEXT_COLOR:this.#a(i);break}}static get defaultPropertiesToUpdate(){return[[Ct.FREETEXT_SIZE,be._defaultFontSize],[Ct.FREETEXT_COLOR,be._defaultColor||lt._defaultLineColor]]}get propertiesToUpdate(){return[[Ct.FREETEXT_SIZE,this.#i],[Ct.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Qa(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.FREETEXT_COLOR}#r(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-be._internalPadding*t,-(be._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(be.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,c=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,p]=this.pageDimensions,[y,b]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=t+(c[0]-y)/f,S=i+this.height-(c[1]-b)/p;break;case 90:A=t+(c[0]-y)/f,S=i-(c[1]-b)/p,[u,h]=[h,-u];break;case 180:A=t-this.width+(c[0]-y)/f,S=i-(c[1]-b)/p,[u,h]=[-u,-h];break;case 270:A=t+(c[0]-y-this.height*p)/f,S=i+(c[1]-b-this.width*f)/p,[u,h]=[-h,u];break}this.setAt(A*r,S*l,u,h)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Do,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=be.#h(i.getData("text")||"").replaceAll(Do,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:h}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Do,"")),A!==this.editorDiv){let S=f;for(const _ of this.editorDiv.childNodes){if(_===A){S=p;continue}S.push(be.#c(_))}}f.push(u.nodeValue.slice(0,h).replaceAll(Do,""))}else if(u===this.editorDiv){let A=f,S=0;for(const _ of this.editorDiv.childNodes)S++===h&&(A=p),A.push(be.#c(_))}this.#t=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const S=A.nodeValue.length;if(b<=S){y.setStart(A,b),y.setEnd(A,b);break}b-=S}l.removeAllRanges(),l.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=be._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof mm){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:p,popupRef:y,richText:b,contentsObj:A,creationDate:S,modificationDate:_},textContent:x,textPosition:w,parent:{page:{pageNumber:C}}}=t;if(!x||x.length===0)return null;r=t={annotationType:yt.FREETEXT,color:Array.from(u),fontSize:c,value:x.join(`
`),position:w,pageIndex:C-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:S,modificationDate:_}}const l=await super.deserialize(t,i,s);return l.#i=t.fontSize,l.color=tt.makeHexColor(...t.color),l.#t=be.#h(t.value),l._initialData=r,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==l}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const l=document.createElement("div");l.append(r?document.createTextNode(r):document.createElement("br")),i.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){Vt("Abstract method `toSVGPath` must be implemented.")}get box(){Vt("Abstract getter `box` must be implemented.")}serialize(t,i){Vt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,l,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u]*r,c[u+1]=s+t[u+1]*l;return c}static _rescaleAndSwap(t,i,s,r,l,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u+1]*r,c[u+1]=s+t[u]*l;return c}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)r[l]=i+t[l],r[l+1]=s+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,l){switch(l){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,l,c){return[(t+5*s)/6,(i+5*r)/6,(5*s+l)/6,(5*r+c)/6,(s+l)/2,(r+c)/2]}}class Gn{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=Gn.#m+Gn.#p;constructor({x:t,y:i},s,r,l,c,u=0){this.#t=s,this.#h=l*r,this.#i=c,this.#a.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=Gn.#m*r,this.#c=Gn.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#a[8])}#g(){const t=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[s,r,l,c]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/l,(this.#o+(t[1]-i[1])/2-r)/c,(this.#s+(i[0]-t[0])/2-s)/l,(this.#o+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,r,l,c]=this.#t;let[u,h,f,p]=this.#a.subarray(8,12);const y=t-f,b=i-p,A=Math.hypot(y,b);if(A<this.#c)return!1;const S=A-this.#l,_=S/A,x=_*y,w=_*b;let C=u,T=h;u=f,h=p,f+=x,p+=w,this.#f?.push(t,i);const L=-w/S,O=x/S,B=L*this.#h,z=O*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+B,p+z],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-B,p-z],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+B,h+z],2),this.#r.push(NaN,NaN,NaN,NaN,(u+B-s)/l,(h+z-r)/c),this.#a.set([u-B,h-z],14),this.#e.push(NaN,NaN,NaN,NaN,(u-B-s)/l,(h-z-r)/c)),this.#a.set([C,T,u,h,f,p],6),!this.isEmpty()):(this.#a.set([C,T,u,h,f,p],6),Math.abs(Math.atan2(T-h,C-u)-Math.atan2(w,x))<Math.PI/2?([u,h,f,p]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/l,((h+p)/2-r)/c),[u,h,C,T]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((C+u)/2-s)/l,((T+h)/2-r)/c),!0):([C,T,u,h,f,p]=this.#a.subarray(0,6),this.#r.push(((C+5*u)/6-s)/l,((T+5*h)/6-r)/c,((5*u+f)/6-s)/l,((5*h+p)/6-r)/c,((u+f)/2-s)/l,((h+p)/2-r)/c),[f,p,u,h,C,T]=this.#a.subarray(12,18),this.#e.push(((C+5*u)/6-s)/l,((T+5*h)/6-r)/c,((5*u+f)/6-s)/l,((5*h+p)/6-r)/c,((u+f)/2-s)/l,((h+p)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[l,c,u,h]=this.#g();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-i)/r} L${(this.#a[4]-t)/s} ${(this.#a[5]-i)/r} L${l} ${c} L${u} ${h} L${(this.#a[16]-t)/s} ${(this.#a[17]-i)/r} L${(this.#a[14]-t)/s} ${(this.#a[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,r,l]=this.#t,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[h,f,p,y]=this.#g();t.push(`L${(c[0]-i)/r} ${(c[1]-s)/l} L${h} ${f} L${p} ${y} L${(u[0]-i)/r} ${(u[1]-s)/l}`)}newFreeDrawOutline(t,i,s,r,l,c){return new Am(t,i,s,r,l,c)}getOutlines(){const t=this.#r,i=this.#e,s=this.#a,[r,l,c,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=h.length-2;y<b;y+=2)h[y]=(this.#f[y]-r)/c,h[y+1]=(this.#f[y+1]-l)/u;if(h[h.length-2]=(this.#s-r)/c,h[h.length-1]=(this.#o-l)/u,isNaN(s[6])&&!this.isEmpty())return this.#x(h);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let y=0;y<p;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}p=this.#S(f,p);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=i[y+b],f[p+1]=i[y+b+1],p+=2}return this.#w(f,p),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#x(t){const i=this.#a,[s,r,l,c]=this.#t,[u,h,f,p]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/l,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-s)/l,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[16]-s)/l,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-s)/l,(i[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#w(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[l,c,u,h]=this.#t,[f,p,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-l)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-l)/u,(r[1]-c)/h],i),i+=24}}class Am extends it{#t;#e=new Float32Array(4);#n;#i;#r;#a;#s;constructor(t,i,s,r,l,c){super(),this.#s=t,this.#r=i,this.#t=s,this.#a=r,this.#n=l,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,f,p]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-h)/p;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-h)/p}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],l){const c=s-t,u=r-i;let h,f;switch(l){case 0:h=it._rescale(this.#s,t,r,c,-u),f=it._rescale(this.#r,t,r,c,-u);break;case 90:h=it._rescaleAndSwap(this.#s,t,i,c,u),f=it._rescaleAndSwap(this.#r,t,i,c,u);break;case 180:h=it._rescale(this.#s,s,i,-c,u),f=it._rescale(this.#r,s,i,-c,u);break;case 270:h=it._rescaleAndSwap(this.#s,s,r,-c,-u),f=it._rescaleAndSwap(this.#r,s,r,-c,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],r=i[5];const l=[s,r,s,r];let c=s,u=r,h=s,f=r;const p=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,S=i.length;A<S;A+=6){const _=i[A+4],x=i[A+5];isNaN(i[A])?(tt.pointBoundingBox(_,x,l),u>x?(c=_,u=x):u===x&&(c=p(c,_)),f<x?(h=_,f=x):f===x&&(h=p(h,_))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,tt.bezierBoundingBox(s,r,...i.slice(A,A+6),y),tt.rectBoundingBox(y[0],y[1],y[2],y[3],l),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=p(c,y[0])),f<y[3]?(h=y[2],f=y[3]):f===y[3]&&(h=p(h,y[2]))),s=_,r=x}const b=this.#e;b[0]=l[0]-this.#n,b[1]=l[1]-this.#n,b[2]=l[2]-l[0]+2*this.#n,b[3]=l[3]-l[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,i,s,r,l,c=0){return new Gn(t,i,s,r,l,c)}getNewOutline(t,i){const[s,r,l,c]=this.#e,[u,h,f,p]=this.#t,y=l*f,b=c*p,A=s*f+u,S=r*p+h,_=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+S},this.#t,this.#a,t,this.#i,i??this.#n);for(let x=2;x<this.#r.length;x+=2)_.add({x:this.#r[x]*y+A,y:this.#r[x+1]*b+S});return _.getOutlines()}}class Ou{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:_,y:x,width:w,height:C}of t){const T=Math.floor((_-i)/c)*c,L=Math.ceil((_+w+i)/c)*c,O=Math.floor((x-i)/c)*c,B=Math.ceil((x+C+i)/c)*c,z=[T,O,B,!0],$=[L,O,B,!1];this.#i.push(z,$),tt.rectBoundingBox(T,O,L,B,l)}const u=l[2]-l[0]+2*s,h=l[3]-l[1]+2*s,f=l[0]-s,p=l[1]-s;let y=r?-1/0:1/0,b=1/0;const A=this.#i.at(r?-1:-2),S=[A[0],A[2]];for(const _ of this.#i){const[x,w,C,T]=_;!T&&r?w<b?(b=w,y=x):w===b&&(y=Math.max(y,x)):T&&!r&&(w<b?(b=w,y=x):w===b&&(y=Math.min(y,x))),_[0]=(x-f)/u,_[1]=(w-p)/h,_[2]=(C-p)/h}this.#t=new Float32Array([f,p,u,h]),this.#e=[y,b],this.#n=S}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#a(t)}#a(t){const i=[],s=new Set;for(const c of t){const[u,h,f]=c;i.push([u,h,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const h=i[c][2],f=i[c+1][2];h.push(f),f.push(h),s.add(h),s.add(f)}const r=[];let l;for(;s.size>0;){const c=s.values().next().value;let[u,h,f,p,y]=c;s.delete(c);let b=u,A=h;for(l=[u,f],r.push(l);;){let S;if(s.has(p))S=p;else if(s.has(y))S=y;else break;s.delete(S),[u,h,f,p,y]=S,b!==u&&(l.push(b,A,u,A===h?h:f),b=u),A=A===h?f:h}l.push(b,A)}return new kA(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#r;let s=0,r=i.length-1;for(;s<=r;){const l=s+r>>1,c=i[l][0];if(c===t)return l;c<t?s=l+1:r=l-1}return r+1}#o([,t,i]){const s=this.#s(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#r.length;r++){const[l,c]=this.#r[r];if(l!==t)break;if(l===t&&c===i){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[l,c]=this.#r[r];if(l!==t)break;if(l===t&&c===i){this.#r.splice(r,1);return}}}#l(t){const[i,s,r]=t,l=[[i,s,r]],c=this.#s(r);for(let u=0;u<c;u++){const[h,f]=this.#r[u];for(let p=0,y=l.length;p<y;p++){const[,b,A]=l[p];if(!(f<=b||A<=h)){if(b>=h){if(A>f)l[p][1]=f;else{if(y===1)return[];l.splice(p,1),p--,y--}continue}l[p][2]=h,A>f&&l.push([i,f,A])}}}return l}}class kA extends it{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let l=2;l<i.length;l+=2){const c=i[l],u=i[l+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],l){const c=[],u=s-t,h=r-i;for(const f of this.#e){const p=new Array(f.length);for(let y=0;y<f.length;y+=2)p[y]=t+f[y]*u,p[y+1]=r-f[y+1]*h;c.push(p)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Nu extends Gn{newFreeDrawOutline(t,i,s,r,l,c){return new BA(t,i,s,r,l,c)}}class BA extends Am{newOutliner(t,i,s,r,l,c=0){return new Nu(t,i,s,r,l,c)}}class se extends lt{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=yt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=se.prototype;return mt(this,"_keyboardManager",new er([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||se._defaultColor,this.#g=t.thickness||se._defaultThickness,this.opacity=t.opacity||se._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Ou(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new Ou(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#a;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#a=t.getNewOutline(this.#g/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:se.#E(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:se.#E(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[l,c,u,h]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=u,this.height=h;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-l,this.width=u*b/y,this.height=h*y/b;break}case 180:this.x=1-l,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=l,this.width=u*b/y,this.height=h*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-l)/u,(f[1]-c)/h];const{lastPoint:p}=this.#a;this.#m=[(p[0]-l)/u,(p[1]-c)/h]}static initialize(t,i){lt.initialize(t,i),se._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Ct.HIGHLIGHT_COLOR:se._defaultColor=i;break;case Ct.HIGHLIGHT_THICKNESS:se._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Ct.HIGHLIGHT_COLOR:this.#x(i);break;case Ct.HIGHLIGHT_THICKNESS:this.#w(i);break}}static get defaultPropertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,se._defaultColor],[Ct.HIGHLIGHT_THICKNESS,se._defaultThickness]]}get propertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,this.color||se._defaultColor],[Ct.HIGHLIGHT_THICKNESS,this.#g||se._defaultThickness],[Ct.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#x(t){const i=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,se._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const i=this.#g,s=r=>{this.#g=r,this.#S(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new fi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#C():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#E([t,i,s,r],l){switch(l){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=se.#E(this.#l.box,t)):s=se.#E([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#p,{bbox:se.#E(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),Wp(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){se._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#P(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,l=this.#n,c=new Float32Array(l.length*8);let u=0;for(const{x:h,y:f,width:p,height:y}of l){const b=h*t+s,A=(1-f)*i+r;c[u]=c[u+4]=b,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=b+p*t,c[u+5]=c[u+7]=A-y*i,u+=8}return c}#N(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,i,{target:s,x:r,y:l}){const{x:c,y:u,width:h,height:f}=s.getBoundingClientRect(),p=new AbortController,y=t.combinedSignal(p),b=A=>{p.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ee,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",gi,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Nu({x:r,y:l},[c,u,h,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof bm){const{data:{quadPoints:S,rect:_,rotation:x,id:w,color:C,opacity:T,popupRef:L,richText:O,contentsObj:B,creationDate:z,modificationDate:$},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:yt.HIGHLIGHT,color:Array.from(C),opacity:T,quadPoints:S,boxes:null,pageIndex:K-1,rect:_.slice(0),rotation:x,annotationElementId:w,id:w,deleted:!1,popupRef:L,richText:O,comment:B?.str||null,creationDate:z,modificationDate:$}}else if(t instanceof Vu){const{data:{inkLists:S,rect:_,rotation:x,id:w,color:C,borderStyle:{rawWidth:T},popupRef:L,richText:O,contentsObj:B,creationDate:z,modificationDate:$},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:yt.HIGHLIGHT,color:Array.from(C),thickness:T,inkLists:S,boxes:null,pageIndex:K-1,rect:_.slice(0),rotation:x,annotationElementId:w,id:w,deleted:!1,popupRef:L,richText:O,comment:B?.str||null,creationDate:z,modificationDate:$}}const{color:l,quadPoints:c,inkLists:u,opacity:h}=t,f=await super.deserialize(t,i,s);f.color=tt.makeHexColor(...l),f.opacity=h||1,u&&(f.#g=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[p,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(c){const S=f.#n=[];for(let _=0;_<c.length;_+=8)S.push({x:(c[_]-b)/p,y:1-(c[_+1]-A)/y,width:(c[_+2]-c[_])/p,height:(c[_+1]-c[_+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const S=u[0],_={x:S[0]-b,y:y-(S[1]-A)},x=new Nu(_,[0,0,p,y],1,f.#g/2,!0,.001);for(let T=0,L=S.length;T<L;T+=2)_.x=S[T]-b,_.y=y-(S[T+1]-A),x.add(_);const{id:w,clipPathId:C}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#b({highlightOutlines:x.getOutlines(),highlightId:w,clipPathId:C}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#g,quadPoints:this.#P(),outlines:this.#N(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Sm{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Vt("Not implemented")}}class Lt extends lt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(Lt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,l]of Object.entries(i))s.has(r)?Object.assign(t[r],l):t[r]=l;return t}static getDefaultDrawingOptions(t){Vt("Not implemented")}static get typesMap(){Vt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(Lt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,l=r[i],c=u=>{r.updateProperty(i,u);const h=this.#t.updateProperty(i,u);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,r]){const{parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/l),r*(l/c)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(c/l),r*(l/c)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(l/c),r*(c/l)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(l/c),r*(c/l)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:l,parentRotation:c,parentDimensions:[u,h]}=this;switch((l*4+c)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-i,t,s*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-i,r*(h/u),s*(u/h)];case 7:return[i-s*(u/h),1-t-r*(h/u),s*(u/h),r*(h/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(h/u),i,r*(h/u),s*(u/h)];case 13:return[1-i-s*(u/h),t-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-t,1-i-s*(u/h),r*(h/u),s*(u/h)];case 15:return[i,1-t,s*(u/h),r*(h/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Lt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,l){Vt("Not implemented")}static startDrawing(t,i,s,r){const{target:l,offsetX:c,offsetY:u,pointerId:h,pointerType:f}=r;if(kt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:y,height:b}=l.getBoundingClientRect(),A=Lt.#i=new AbortController,S=t.combinedSignal(A);if(kt.setPointer(f,h),window.addEventListener("pointerup",_=>{kt.isSamePointerIdOrRemove(_.pointerId)&&this._endDraw(_)},{signal:S}),window.addEventListener("pointercancel",_=>{kt.isSamePointerIdOrRemove(_.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",_=>{kt.isSamePointerType(_.pointerType)&&(kt.initializeAndAddPointerId(_.pointerId),Lt.#n.isCancellable()&&(Lt.#n.removeLastElement(),Lt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",gi,{signal:S}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),l.addEventListener("touchmove",_=>{kt.isSameTimeStamp(_.timeStamp)&&ee(_)},{signal:S}),t.toggleDrawing(),i._editorUndoBar?.hide(),Lt.#n){t.drawLayer.updateProperties(this._currentDrawId,Lt.#n.startNew(c,u,y,b,p));return}i.updateUIForDefaultProperties(this),Lt.#n=this.createDrawerInstance(c,u,y,b,p),Lt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Lt.#r.toSVGProperties(),Lt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(kt.isSameTimeStamp(t.timeStamp),!Lt.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(kt.isSamePointerId(r)){if(kt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Lt.#n.add(i,s)),kt.setTimeStamp(t.timeStamp),ee(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Lt.#n=null,Lt.#r=null,kt.clearTimeStamp()),Lt.#i&&(Lt.#i.abort(),Lt.#i=null,kt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Lt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Lt.#n,r=this._currentDrawId,l=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(l))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ct.DRAW_STEP),!Lt.#n.isEmpty()){const{pageDimensions:[s,r],scale:l}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Lt.#n.getOutlines(s*l,r*l,l,this._INNER_MARGIN),drawingOptions:Lt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,l,c){Vt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:u}}=i.viewport,h=this.deserializeDraw(c,u,r,l,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#a({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#t.serialize([i,s,r,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class zA{#t=new Float64Array(6);#e;#n;#i;#r;#a;#s="";#o=0;#c=new nr;#l;#d;constructor(t,i,s,r,l,c){this.#l=s,this.#d=r,this.#i=l,this.#r=c,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i],this.#n=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return it._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,l,c]=this.#t.subarray(2,6),u=t-l,h=i-c;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#a.push(t,i),isNaN(s)?(this.#t.set([l,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,l,c,t,i],0),this.#e.push(...it.createBezierPoints(s,r,l,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,l){this.#l=s,this.#d=r,this.#i=l,[t,i]=this.#h(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#a=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=it.svgRound(this.#e[4]),i=it.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#a.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#o=6}if(this.#a.length===4){const r=it.svgRound(this.#e[10]),l=it.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${l}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let r=this.#o,l=this.#e.length;r<l;r+=6){const[c,u,h,f,p,y]=this.#e.slice(r,r+6).map(it.svgRound);s.push(`C${c} ${u} ${h} ${f} ${p} ${y}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,r){const l=this.#n.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class nr extends it{#t;#e=0;#n;#i;#r;#a;#s;#o;#c;build(t,i,s,r,l,c,u){this.#r=i,this.#a=s,this.#s=r,this.#o=l,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${it.svgRound(i[4])} ${it.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${it.svgRound(i[10])} ${it.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[l,c,u,h,f,p]=i.subarray(s,s+6).map(it.svgRound);t.push(`C${l} ${c} ${u} ${h} ${f} ${p}`)}}return t.join("")}serialize([t,i,s,r],l){const c=[],u=[],[h,f,p,y]=this.#d();let b,A,S,_,x,w,C,T,L;switch(this.#o){case 0:L=it._rescale,b=t,A=i+r,S=s,_=-r,x=t+h*s,w=i+(1-f-y)*r,C=t+(h+p)*s,T=i+(1-f)*r;break;case 90:L=it._rescaleAndSwap,b=t,A=i,S=s,_=r,x=t+f*s,w=i+h*r,C=t+(f+y)*s,T=i+(h+p)*r;break;case 180:L=it._rescale,b=t+s,A=i,S=-s,_=r,x=t+(1-h-p)*s,w=i+f*r,C=t+(1-h)*s,T=i+(f+y)*r;break;case 270:L=it._rescaleAndSwap,b=t+s,A=i+r,S=-s,_=-r,x=t+(1-f-y)*s,w=i+(1-h-p)*r,C=t+(1-f)*s,T=i+(1-h)*r;break}for(const{line:O,points:B}of this.#i)c.push(L(O,b,A,S,_,l?new Array(O.length):null)),u.push(L(B,b,A,S,_,l?new Array(B.length):null));return{lines:c,points:u,rect:[x,w,C,T]}}static deserialize(t,i,s,r,l,{paths:{lines:c,points:u},rotation:h,thickness:f}){const p=[];let y,b,A,S,_;switch(h){case 0:_=it._rescale,y=-t/s,b=i/r+1,A=1/s,S=-1/r;break;case 90:_=it._rescaleAndSwap,y=-i/r,b=-t/s,A=1/r,S=1/s;break;case 180:_=it._rescale,y=t/s+1,b=-i/r,A=-1/s,S=1/r;break;case 270:_=it._rescaleAndSwap,y=i/r+1,b=t/s+1,A=-1/r,S=-1/s;break}if(!c){c=[];for(const w of u){const C=w.length;if(C===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(C===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const T=new Float32Array(3*(C-2));c.push(T);let[L,O,B,z]=w.subarray(0,4);T.set([NaN,NaN,NaN,NaN,L,O],0);for(let $=4;$<C;$+=2){const K=w[$],J=w[$+1];T.set(it.createBezierPoints(L,O,B,z,K,J),($-2)*3),[L,O,B,z]=[B,z,K,J]}}}for(let w=0,C=c.length;w<C;w++)p.push({line:_(c[w].map(T=>T??NaN),y,b,A,S),points:_(u[w].map(T=>T??NaN),y,b,A,S)});const x=new this.prototype.constructor;return x.build(p,s,r,1,h,f,l),x}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#r,i/this.#a]:[i/this.#a,i/this.#r]}#d(){const[t,i,s,r]=this.#t,[l,c]=this.#l(0);return[t+l,i+c,s-2*l,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)tt.pointBoundingBox(r[u],r[u+1],t);continue}let l=r[4],c=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,p,y,b,A,S]=r.subarray(u,u+6);tt.bezierBoundingBox(l,c,f,p,y,b,A,S,t),l=A,c=S}}const[i,s]=this.#l();t[0]=Re(t[0]-i,0,1),t[1]=Re(t[1]-s,0,1),t[2]=Re(t[2]+i,0,1),t[3]=Re(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[r,l]=this.#l(),[c,u]=[r-i,l-s],h=this.#t;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([t,i],s){const[r,l]=this.#l();this.#r=t,this.#a=i,this.#s=s;const[c,u]=this.#l(),h=c-r,f=u-l,p=this.#t;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,l=0,c=0,u=0,h=0;switch(this.#e){case 90:r=i/t,l=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,h=i;break;case 270:r=-i/t,l=t/i,h=i;break;default:return""}return`matrix(${s} ${r} ${l} ${c} ${it.svgRound(u)} ${it.svgRound(h)})`}getPathResizingSVGProperties([t,i,s,r]){const[l,c]=this.#l(),[u,h,f,p]=this.#t;if(Math.abs(f-l)<=it.PRECISION||Math.abs(p-c)<=it.PRECISION){const _=t+s/2-(u+f/2),x=i+r/2-(h+p/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:`${this.rotationTransform} translate(${_} ${x})`}}}const y=(s-2*l)/(f-2*l),b=(r-2*c)/(p-2*c),A=f/s,S=p/r;return{path:{"transform-origin":`${it.svgRound(u)} ${it.svgRound(h)}`,transform:`${this.rotationTransform} scale(${A} ${S}) translate(${it.svgRound(l)} ${it.svgRound(c)}) scale(${y} ${b}) translate(${it.svgRound(-l)} ${it.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[l,c]=this.#l(),u=this.#t,[h,f,p,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(p-l)<=it.PRECISION||Math.abs(y-c)<=it.PRECISION){const x=t+s/2-(h+p/2),w=i+r/2-(f+y/2);for(const{line:C,points:T}of this.#i)it._translate(C,x,w,C),it._translate(T,x,w,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*l)/(p-2*l),A=(r-2*c)/(y-2*c),S=-b*(h+l)+t+l,_=-A*(f+c)+i+c;if(b!==1||A!==1||S!==0||_!==0)for(const{line:x,points:w}of this.#i)it._rescale(x,S,_,b,A,x),it._rescale(w,S,_,b,A,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,l]=s,c=this.#t,u=t-c[0],h=i-c[1];if(this.#r===r&&this.#a===l)for(const{line:f,points:p}of this.#i)it._translate(f,u,h,f),it._translate(p,u,h,p);else{const f=this.#r/r,p=this.#a/l;this.#r=r,this.#a=l;for(const{line:y,points:b}of this.#i)it._rescale(y,u,h,f,p,y),it._rescale(b,u,h,f,p,b);c[2]*=f,c[3]*=p}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Ho extends Sm{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Ho(this._viewParameters);return t.updateAll(this),t}}class Yu extends Lt{static _type="ink";static _editorType=yt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){lt.initialize(t,i),this._defaultDrawingOptions=new Ho(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return mt(this,"typesMap",new Map([[Ct.INK_THICKNESS,"stroke-width"],[Ct.INK_COLOR,"stroke"],[Ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,l){return new zA(t,i,s,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,l,c){return nr.deserialize(t,i,s,r,l,c)}static async deserialize(t,i,s){let r=null;if(t instanceof Vu){const{data:{inkLists:c,rect:u,rotation:h,id:f,color:p,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:S,contentsObj:_,creationDate:x,modificationDate:w},parent:{page:{pageNumber:C}}}=t;r=t={annotationType:yt.INK,color:Array.from(p),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:C-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:S,comment:_?.str||null,creationDate:x,modificationDate:w}}const l=await super.deserialize(t,i,s);return l._initialData=r,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new Qa(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Yu.getDefaultDrawingOptions({stroke:tt.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":l,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:lt._colorManager.convert(r),opacity:l,thickness:c,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class Lu extends nr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Ro=8,ja=3;class Bs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,l,c,u){const h=this.#e(s,r,l,c);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,y=this.#n[2*p],b=this.#n[2*p+1];if(t[(s+y)*i+(r+b)]!==0)return p}return-1}static#r(t,i,s,r,l,c,u){const h=this.#e(s,r,l,c);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,y=this.#n[2*p],b=this.#n[2*p+1];if(t[(s+y)*i+(r+b)]!==0)return p}return-1}static#a(t,i,s,r){const l=t.length,c=new Int32Array(l);for(let p=0;p<l;p++)c[p]=t[p]<=r?1:0;for(let p=1;p<s-1;p++)c[p*i]=c[p*i+i-1]=0;for(let p=0;p<i;p++)c[p]=c[i*s-1-p]=0;let u=1,h;const f=[];for(let p=1;p<s-1;p++){h=1;for(let y=1;y<i-1;y++){const b=p*i+y,A=c[b];if(A===0)continue;let S=p,_=y;if(A===1&&c[b-1]===0)u+=1,_-=1;else if(A>=1&&c[b+1]===0)u+=1,_+=1,A>1&&(h=A);else{A!==1&&(h=Math.abs(A));continue}const x=[y,p],w=_===y+1,C={isHole:w,points:x,id:u,parent:0};f.push(C);let T;for(const Z of f)if(Z.id===h){T=Z;break}T?T.isHole?C.parent=w?T.parent:h:C.parent=w?h:T.parent:C.parent=w?h:0;const L=this.#i(c,i,p,y,S,_,0);if(L===-1){c[b]=-u,c[b]!==1&&(h=Math.abs(c[b]));continue}let O=this.#n[2*L],B=this.#n[2*L+1];const z=p+O,$=y+B;S=z,_=$;let K=p,J=y;for(;;){const Z=this.#r(c,i,K,J,S,_,1);O=this.#n[2*Z],B=this.#n[2*Z+1];const ht=K+O,wt=J+B;x.push(wt,ht);const dt=K*i+J;if(c[dt+1]===0?c[dt]=-u:c[dt]===1&&(c[dt]=u),ht===p&&wt===y&&K===z&&J===$){c[b]!==1&&(h=Math.abs(c[b]));break}else S=K,_=J,K=ht,J=wt}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let z=i;z<s-2;z+=2)r.push(t[z],t[z+1]);return}const l=t[i],c=t[i+1],u=t[s-4]-l,h=t[s-3]-c,f=Math.hypot(u,h),p=u/f,y=h/f,b=p*c-y*l,A=h/u,S=1/f,_=Math.atan(A),x=Math.cos(_),w=Math.sin(_),C=S*(Math.abs(x)+Math.abs(w)),T=S*(1-C+C**2),L=Math.max(Math.atan(Math.abs(w+x)*T),Math.atan(Math.abs(w-x)*T));let O=0,B=i;for(let z=i+2;z<s-2;z+=2){const $=Math.abs(b-p*t[z+1]+y*t[z]);$>O&&(B=z,O=$)}O>(f*L)**2?(this.#s(t,i,B+2,r),this.#s(t,B,s,r)):r.push(l,c)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,l,c){const u=new Float32Array(c**2),h=-2*r**2,f=c>>1;for(let _=0;_<c;_++){const x=(_-f)**2;for(let w=0;w<c;w++)u[_*c+w]=Math.exp((x+(w-f)**2)/h)}const p=new Float32Array(256),y=-2*l**2;for(let _=0;_<256;_++)p[_]=Math.exp(_**2/y);const b=t.length,A=new Uint8Array(b),S=new Uint32Array(256);for(let _=0;_<s;_++)for(let x=0;x<i;x++){const w=_*i+x,C=t[w];let T=0,L=0;for(let B=0;B<c;B++){const z=_+B-f;if(!(z<0||z>=s))for(let $=0;$<c;$++){const K=x+$-f;if(K<0||K>=i)continue;const J=t[z*i+K],Z=u[B*c+$]*p[Math.abs(J-C)];T+=J*Z,L+=Z}}const O=A[w]=Math.round(T/L);S[O]++}return[A,S]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,l=1/0;for(let u=0,h=s.length;u<h;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),l=Math.min(l,f)}const c=255/(r-l);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-l)*c;return s}static#h(t){let i,s=-1/0,r=-1/0;const l=t.findIndex(h=>h!==0);let c=l,u=l;for(i=l;i<256;i++){const h=t[i];h>s&&(i-c>r&&(r=i-c,u=i-1),s=h,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:l}=this.#t;let c=s,u=r;if(s>l||r>l){let b=s,A=r,S=Math.log2(Math.max(s,r)/l);const _=Math.floor(S);S=S===_?_-1:_;for(let w=0;w<S;w++){c=Math.ceil(b/2),u=Math.ceil(A/2);const C=new OffscreenCanvas(c,u);C.getContext("2d").drawImage(t,0,0,b,A,0,0,c,u),b=c,A=u,t!==i&&t.close(),t=C.transferToImageBitmap()}const x=Math.min(l/c,l/u);c=Math.round(c*x),u=Math.round(u*x)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#d(p),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},l,c,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const y=200,b=p.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:S,actualBoundingBoxAscent:_,actualBoundingBoxDescent:x,fontBoundingBoxAscent:w,fontBoundingBoxDescent:C,width:T}=p.measureText(t),L=1.5,O=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||0,T)*L),B=Math.ceil(Math.max(Math.abs(_)+Math.abs(x)||y,Math.abs(w)+Math.abs(C)||y)*L);f=new OffscreenCanvas(O,B),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=b,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,O,B),p.fillStyle="black",p.fillText(t,O*(L-1)/2,B*(3-L)/2);const z=this.#d(p.getImageData(0,0,O,B).data),$=this.#l(z),K=this.#h($),J=this.#a(z,O,B,K);return this.processDrawnLines({lines:{curves:J,width:O,height:B},pageWidth:l,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,l){const[c,u,h]=this.#f(t),[f,p]=this.#c(c,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(p),b=this.#a(f,u,h,y);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:c,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:h,width:f,height:p}=t,y=t.thickness??0,b=[],A=Math.min(i/f,s/p),S=A/i,_=A/s,x=[];for(const{points:C}of h){const T=c?this.#o(C):C;if(!T)continue;x.push(T);const L=T.length,O=new Float32Array(L),B=new Float32Array(3*(L===2?2:L-2));if(b.push({line:B,points:O}),L===2){O[0]=T[0]*S,O[1]=T[1]*_,B.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[z,$,K,J]=T;z*=S,$*=_,K*=S,J*=_,O.set([z,$,K,J],0),B.set([NaN,NaN,NaN,NaN,z,$],0);for(let Z=4;Z<L;Z+=2){const ht=O[Z]=T[Z]*S,wt=O[Z+1]=T[Z+1]*_;B.set(it.createBezierPoints(z,$,K,J,ht,wt),(Z-2)*3),[z,$,K,J]=[K,J,ht,wt]}}if(b.length===0)return null;const w=u?new Lu:new nr;return w.build(b,i,s,1,r,u?0:y,l),{outline:w,newCurves:x,areContours:u,thickness:y,width:f,height:p}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:l}){let c=1/0,u=-1/0,h=0;for(const T of t){h+=T.length;for(let L=2,O=T.length;L<O;L++){const B=T[L]-T[L-2];c=Math.min(c,B),u=Math.max(u,B)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,y=Ro+ja*p,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=l,b[A++]=i?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=p,b[A++]=f.BYTES_PER_ELEMENT;for(const T of t)b[A++]=T.length-2,b[A++]=T[0],b[A++]=T[1];const S=new CompressionStream("deflate-raw"),_=S.writable.getWriter();await _.ready,_.write(b);const x=f.prototype.constructor;for(const T of t){const L=new x(T.length-2);for(let O=2,B=T.length;O<B;O++)L[O-2]=T[O]-T[O-2];_.write(L)}_.close();const w=await new Response(S.readable).arrayBuffer(),C=new Uint8Array(w);return $p(C)}static async decompressSignature(t){try{const i=Zb(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(i).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,u=0;for await(const T of s)c||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),c.set(T,u),u+=T.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],y=h[3],b=h[4]===0,A=h[5],S=h[6],_=h[7],x=[],w=(Ro+ja*S)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(_){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(c.buffer,w);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(c.buffer,w);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(c.buffer,w);break}u=0;for(let T=0;T<S;T++){const L=h[ja*T+Ro],O=new Float32Array(L+2);x.push(O);for(let B=0;B<ja-1;B++)O[B]=h[ja*T+Ro+B+1];for(let B=0;B<L;B++)O[B+2]=O[B]+C[u++]}return{areContours:b,thickness:A,outlines:x,width:p,height:y}}catch(i){return pt(`decompressSignature: ${i}`),null}}}class $u extends Sm{constructor(){super(),super.updateProperties({fill:lt._defaultLineColor,"stroke-width":0})}clone(){const t=new $u;return t.updateAll(this),t}}class Ku extends Ho{constructor(t){super(t),super.updateProperties({stroke:lt._defaultLineColor,"stroke-width":1})}clone(){const t=new Ku(this._viewParameters);return t.updateAll(this),t}}class xi extends Lt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=yt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){lt.initialize(t,i),this._defaultDrawingOptions=new $u,this._defaultDrawnSignatureOptions=new Ku(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return mt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:l,areContours:c,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:p,pageHeight:y},rotation:b}=this.parent.viewport,A=Bs.processDrawnLines({lines:r,pageWidth:p,pageHeight:y,rotation:b,innerMargin:xi._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(A,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:l}=this.#n,c=Math.max(r,l),u=Bs.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:s,width:r,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:l,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof Lu,this.description=s;let h;this.#t?h=xi.getDefaultDrawingOptions():(h=xi._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let p=i/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Bs.process(t,i,s,r,xi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return Bs.extractContoursFromText(t,i,s,r,l,xi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Bs.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:xi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=xi.getDefaultDrawingOptions():(this._drawingOptions=xi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(l),t?(l.paths={lines:i,points:s},l.uuid=this.#i,l.isCopy=!0):l.lines=i,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,i,s,r,l,c){return c.areContours?Lu.deserialize(t,i,s,r,l,c):nr.deserialize(t,i,s,r,l,c)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class PA extends lt{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=yt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){lt.initialize(t,i)}static isHandlingMimeForPasting(t){return Eu.includes(t)}static paste(t,i){i.pasteEditor({mode:yt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:l,height:c,channels:r.length/(l*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),i&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Eu.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,l]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,s=this.height*l;else if(i>c*r||s>c*l){const h=Math.min(c*r/i,c*l/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:l}=this.#t,c=new Ci;let u=this.#t,h=r,f=l,p=null;if(i){if(r>i||l>i){const B=Math.min(i/r,i/l);h=Math.floor(r*B),f=Math.floor(l*B)}p=document.createElement("canvas");const b=p.width=Math.ceil(h*c.sx),A=p.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(b,A));const S=p.getContext("2d");S.filter=this._uiManager.hcmFilter;let _="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":nv.isDarkMode&&(_="#8f8f9d",x="#42414d");const w=15,C=w*c.sx,T=w*c.sy,L=new OffscreenCanvas(C*2,T*2),O=L.getContext("2d");O.fillStyle=_,O.fillRect(0,0,C*2,T*2),O.fillStyle=x,O.fillRect(0,0,C,T),O.fillRect(C,T,C,T),S.fillStyle=S.createPattern(L,"repeat"),S.fillRect(0,0,b,A),S.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(c.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,r>t||l>t){const x=Math.min(t/r,t/l);b=Math.floor(r*x),A=Math.floor(l*x),this.#l||(u=this.#u(b,A))}const _=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});_.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:_.getImageData(0,0,b,A).data}}return{canvas:p,width:h,height:f,imageData:y}}#u(t,i){const{width:s,height:r}=this.#t;let l=s,c=r,u=this.#t;for(;l>2*t||c>2*i;){const h=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(l,c);p.getContext("2d").drawImage(u,0,0,h,f,0,0,l,c),u=p.transferToImageBitmap()}return u}#g(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,l=new Ci,c=Math.ceil(s*t*l.sx),u=Math.ceil(r*i*l.sy),h=this.#s;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const f=this.#l?this.#t:this.#u(c,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Gs.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*Gs.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,l=!1;if(t instanceof vm){const{data:{rect:_,rotation:x,id:w,structParent:C,popupRef:T,richText:L,contentsObj:O,creationDate:B,modificationDate:z},container:$,parent:{page:{pageNumber:K}},canvas:J}=t;let Z,ht;J?(delete t.canvas,{id:Z,bitmap:ht}=s.imageManager.getFromCanvas($.id,J),J.remove()):(l=!0,t._hasNoCanvas=!0);const wt=(await i._structTree.getAriaAttributes(`${zs}${w}`))?.get("aria-label")||"";r=t={annotationType:yt.STAMP,bitmapId:Z,bitmap:ht,pageIndex:K-1,rect:_.slice(0),rotation:x,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:wt},isSvg:!1,structParent:C,popupRef:T,richText:L,comment:O?.str||null,creationDate:B,modificationDate:z}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:p,isSvg:y,accessibilityData:b}=t;l?(s.addMissingCanvas(t.id,c),c.#o=!0):p&&s.imageManager.isValidId(p)?(c.#e=p,h&&(c.#t=h)):c.#i=f,c.#l=y;const[A,S]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/S,b&&(c.altTextData=b),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,l=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class $i{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([be,Yu,PA,se,xi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:l,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:p}){const y=[...$i.#g.values()];if(!$i._initialized){$i._initialized=!0;for(const b of y)b.initialize(p,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=l,this.#n=c,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===yt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case yt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case yt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case yt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===yt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of $i.#g.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",l=>{const{clientX:u,clientY:h,timeStamp:f}=l,p=this.#p;if(f-p>500){this.#p=f;return}this.#p=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(u,h);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const S=new RegExp(`^${Ya}[0-9]+$`);for(const x of b)if(S.test(x.id)){A=x.id;break}if(!A)return;const _=this.#a.get(A);_?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),_.dblclick(l))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,l=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else l.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=l.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of $i.#g.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=fe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),se.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),lt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#a.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return $i.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#x(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#w(),l=this.getNextId(),c=this.#x({parent:this,id:l,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await $i.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),l=this.#x({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,i+r),f=(l+u)/2-t,p=(c+h)/2-i,[y,b]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=fe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===yt.STAMP||s===yt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===yt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=fe.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,qn(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,qn(this.div,{rotation:s}),i!==s)for(const r of this.#a.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class Ee{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return mt(this,"_svgFactory",new ko)}static#r(t,[i,s,r,l]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*l}%`}#a(){const t=Ee._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=Ee._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const l=Ee._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${i}`),l.classList.add("clip"),r}#o(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=Ee.#i++,l=this.#a(),c=Ee._svgFactory.createElement("defs");l.append(c);const u=Ee._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(c,h):null,p=Ee._svgFactory.createElement("use");return l.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(l,t),this.#e.set(r,l),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=Ee.#i++,r=this.#a(),l=Ee._svgFactory.createElement("defs");r.append(l);const c=Ee._svgFactory.createElement("path");l.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(i){const y=Ee._svgFactory.createElement("mask");l.append(y),h=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const b=Ee._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Ee._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Ee._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:l,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&Ee.#r(u,r),l){const{classList:h}=u;for(const[f,p]of Object.entries(l))h.toggle(f,p)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ou};globalThis.pdfjsLib={AbortException:wn,AnnotationEditorLayer:$i,AnnotationEditorParamsType:Ct,AnnotationEditorType:yt,AnnotationEditorUIManager:En,AnnotationLayer:Xu,AnnotationMode:_n,AnnotationType:ue,applyOpacity:av,build:fA,ColorPicker:fi,createValidAbsoluteUrl:qp,CSSConstants:sv,DOMSVGFactory:ko,DrawLayer:Ee,FeatureTest:fe,fetchData:Wa,findContrastColor:rv,getDocument:fm,getFilenameFromUrl:Wb,getPdfFilenameFromUrl:Jb,getRGB:tr,getUuid:Yp,getXfaPageViewport:ev,GlobalWorkerOptions:js,ImageKind:Oo,InvalidPDFException:_u,isDataScheme:Fo,isPdfFile:zu,isValidExplicitDest:yv,MathClamp:Re,noContextMenu:gi,normalizeUnicode:Kb,OPS:$a,OutputScale:Ci,PasswordResponses:Ib,PDFDataRangeTransport:gm,PDFDateString:wu,PDFWorker:xe,PermissionFlag:Ub,PixelsPerInch:Gs,RenderingCancelledException:Bu,renderRichText:Qp,ResponseException:No,setLayerDimensions:qn,shadow:mt,SignatureExtractor:Bs,stopEvent:ee,SupportedImageMimeTypes:Eu,TextLayer:We,TouchManager:Uo,updateUrlHash:Vp,Util:tt,VerbosityLevel:Bo,version:dA,XfaLayer:Kp};const FA="5.4.530";js.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${FA}/build/pdf.worker.min.mjs`;const UA=async(m,t)=>{try{const i=await m.arrayBuffer(),r=await fm({data:i,useWorkerFetch:!0,isEvalSupported:!1}).promise,l=r.numPages,c=[];for(let u=1;u<=l;u++){const h=await r.getPage(u),f=h.getViewport({scale:1.5}),y=(await h.getTextContent()).items.map(S=>S.str).join(" ").replace(/\s+/g," ").trim(),b=document.createElement("canvas"),A=b.getContext("2d");if(A){b.height=f.height,b.width=f.width,await h.render({canvas:b,canvasContext:A,viewport:f}).promise;const S=b.toDataURL("image/jpeg",.8).split(",")[1];c.push({index:u,text:y,image:S})}t(u/l*100)}return c}catch(i){throw console.error("PDF parsing error:",i),new Error("Failed to parse PDF. This can happen if the worker fails to load or the file is corrupted.")}},IA=(m,t=1900)=>{const i=[];let s=m;for(;s.length>0;){if(s.length<=t){i.push(s);break}let r=s.lastIndexOf(". ",t);(r===-1||r<t/2)&&(r=s.lastIndexOf(" ",t)),r===-1&&(r=t),i.push(s.substring(0,r+1).trim()),s=s.substring(r+1).trim()}return i},Ip=m=>m?m.replace(/[\w.-]+@[\w.-]+\.\w+/g,"").replace(/https?:\/\/[^\s]+/g,"").replace(/www\.[^\s]+/g,"").replace(/doi:\s*[\d./\w-]+/gi,"").replace(/\b10\.\d{4,}\/[^\s]+/g,"").replace(/arXiv:\s*[\d.]+/gi,"").replace(/\[\d+(?:[-,]\s*\d+)*\]/g,"").replace(/\([A-Z][a-z]+(?:\s+et\s+al\.?)?,?\s*\d{4}\)/g,"").replace(/\([A-Z][a-z]+\s+and\s+[A-Z][a-z]+,?\s*\d{4}\)/g,"").replace(/^(\d{3}\s+)+/gm,"").replace(/\b\d{3}\s+(?=\d{3}\b)/g,"").replace(/^\s*\d{1,3}\s+(?=[A-Z])/gm,"").replace(/\bPage\s+\d+\b/gi,"").replace(/\s*\d{4}[^.]*\./gi,"").replace(/copyright\s*\d{4}[^.]*\./gi,"").replace(/\bet\s+al\.\s*,?\s*\d{4}/g,"").replace(/[*]\d*/g,"").replace(/ORCID:\s*[\d-]+/gi,"").replace(/(?:Received|Accepted|Published|Submitted):\s*[^.]+\./gi,"").replace(/\*?\s*Corresponding author[.:]?/gi,"").replace(/\s+/g," ").trim():"",HA=async(m,t)=>{let i=[];if(t.length<=15)i=t.map((l,c)=>({pageNum:c+1,text:l}));else{const l=new Set;for(let c=0;c<4&&c<t.length;c++)l.add(c);for(let c=4;c<t.length-3;c+=2)l.add(c);for(let c=Math.max(0,t.length-3);c<t.length;c++)l.add(c);i=Array.from(l).sort((c,u)=>c-u).map(c=>({pageNum:c+1,text:t[c]}))}const s=i.map(l=>`--- PAGE ${l.pageNum} ---
${l.text}`).join(`

`),r=`Analyze this research paper and identify ALL of its sections. Be thorough - do not miss any sections.

COMMON SECTION TYPES (find all that exist):
- Abstract
- Introduction
- Background / Related Work / Prior Work / Literature Review
- Problem Statement / Motivation
- Methods / Methodology / Approach / Proposed Method / Our Approach
- Model / Architecture / System Design / Framework
- Implementation / Setup
- Experiments / Experimental Setup / Evaluation
- Results / Findings
- Analysis / Ablation Study
- Discussion
- Limitations / Future Work
- Conclusion / Summary
- Acknowledgments (include this)
- Skip: References / Bibliography / Appendix

The paper has ${t.length} total pages. I'm showing you samples from pages to help identify ALL section boundaries.

OUTPUT FORMAT: Return ONLY a valid JSON array:
[{"title": "Abstract", "pageStart": 1, "pageEnd": 1}, {"title": "Introduction", "pageStart": 1, "pageEnd": 3}]

CRITICAL RULES:
1. Find EVERY section - don't skip any
2. Use clean section names without numbering (e.g., "Methods" not "3. Methods")
3. Page numbers are 1-indexed
4. Sections must cover pages 1 through ${t.length} without gaps
5. Skip References/Bibliography section only

PAPER SAMPLES:
${s}`;try{const l=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`,"HTTP-Referer":window.location.origin,"X-Title":"Paper Reader AI"},body:JSON.stringify({model:"xiaomi/mimo-v2-flash:free",messages:[{role:"user",content:r}]})});if(!l.ok)throw new Error(`OpenRouter API error: ${l.status}`);const u=(await l.json()).choices?.[0]?.message?.content||"[]";let h=u;const f=u.match(/```(?:json)?\s*([\s\S]*?)```/);if(f)h=f[1].trim();else{const y=u.match(/\[[\s\S]*\]/);y&&(h=y[0])}return JSON.parse(h).filter(y=>!y.title.toLowerCase().includes("reference")).map(y=>({title:y.title,pageStart:Math.max(1,y.pageStart),pageEnd:Math.min(t.length,y.pageEnd)}))}catch(l){return console.error("Failed to extract sections:",l),[{title:"Full Paper",pageStart:1,pageEnd:t.length}]}},jA=async(m,t,i,s)=>{const r=s.join(`

`),l=`You are an expert academic voice assistant. Process this section titled "${t}" from a research paper for reading aloud.

KEEP:
- Main scholarly content and section headings
- Paper title
- Author LAST NAMES and their companies/organizations (e.g., "Smith and Johnson from Google Research and OpenAI")
- Do NOT include full addresses, emails, or department details - just last names and company/organization names

REMOVE COMPLETELY:
- Line numbers (000, 001, 055, etc.)
- Email addresses, URLs, DOIs
- Citations: [1], [2,3], (Smith et al., 2023)
- Full postal addresses and department details
- Copyright notices, dates
- Footnote markers, ORCID IDs
- Grant acknowledgments
- Conference/journal headers

CRITICAL - HANDLING EQUATIONS AND MATH:
When you encounter mathematical equations or formulas, you MUST convert them to natural spoken language. Do NOT include LaTeX, symbols like $$, or raw math notation.

Examples of how to convert equations:
- "$$\\text{Attention}(Q, K, V) = \\text{softmax}(QK^T/\\sqrt{d_k})V$$"  "The Attention function takes Query, Key, and Value as inputs. It computes the softmax of the product of Query and Key-transpose, divided by the square root of the key dimension d-k, then multiplies the result by the Value matrix."
- "$$L = -\\sum_i y_i \\log(p_i)$$"  "The loss L equals the negative sum over all i of y-i times the log of p-i, which is the cross-entropy loss."
- "$$\\nabla_\\theta J(\\theta)$$"  "The gradient of the objective function J with respect to theta."
- "$$O(n^2)$$"  "O of n squared time complexity."
- "$$x \\in \\mathbb{R}^d$$"  "x is a d-dimensional real vector."

For figures and tables, describe what they show conceptually.

OUTPUT FORMAT: Return ONLY a valid JSON array:
[{"type": "text", "content": "Cleaned paragraph..."}, {"type": "description", "content": "The equation shows..."}]

SECTION TEXT:
${r}`;try{const c=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`,"HTTP-Referer":window.location.origin,"X-Title":"Paper Reader AI"},body:JSON.stringify({model:"xiaomi/mimo-v2-flash:free",messages:[{role:"user",content:l}]})});if(!c.ok)throw c.status===401||c.status===403?new Error("INVALID_KEY"):new Error(`OpenRouter API error: ${c.status}`);const h=(await c.json()).choices?.[0]?.message?.content||"[]";let f=h;const p=h.match(/```(?:json)?\s*([\s\S]*?)```/);if(p)f=p[1].trim();else{const b=h.match(/\[[\s\S]*\]/);b&&(f=b[0])}return JSON.parse(f).map((b,A)=>({id:`${i}-block-${A}`,type:b.type,content:Ip(b.content),sectionId:i}))}catch(c){if(console.error("Failed to process section:",c),c.message==="INVALID_KEY")throw c;return[{id:`${i}-fallback`,type:Va.TEXT,content:Ip(s.join(" ")),sectionId:i}]}},GA={Kore:"aura-2-thalia-en",Puck:"aura-2-orpheus-en"},qA=async(m,t,i,s="Kore")=>{try{const r=GA[s]||"aura-2-thalia-en",l=IA(t,1900);if(l.length===1)return await Hp(m,r,l[0],i);const c=[];for(const u of l){const h=await Hp(m,r,u,i);h&&c.push(h)}return c.length===0?null:VA(c,i)}catch(r){if(console.error("TTS generation failed:",r),r.message==="INVALID_KEY")throw r;return null}};async function Hp(m,t,i,s){const r=await fetch(`https://api.deepgram.com/v1/speak?model=${t}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${m}`},body:JSON.stringify({text:i})});if(!r.ok){const c=await r.text();if(console.error("Deepgram TTS error:",r.status,c),r.status===401||r.status===403)throw new Error("INVALID_KEY");return null}const l=await r.arrayBuffer();return await s.decodeAudioData(l)}function VA(m,t){const i=m.reduce((u,h)=>u+h.length,0),s=m[0].numberOfChannels,r=m[0].sampleRate,l=t.createBuffer(s,i,r);let c=0;for(const u of m){for(let h=0;h<s;h++)l.getChannelData(h).set(u.getChannelData(h),c);c+=u.length}return l}const XA=[{value:.75,label:"Slow"},{value:1,label:"Normal"},{value:1.25,label:"Fast"},{value:1.5,label:"Faster"},{value:2,label:"2x"}],YA=()=>{const[m,t]=Zt.useState(localStorage.getItem("openrouter_api_key")||""),[i,s]=Zt.useState(localStorage.getItem("deepgram_api_key")||""),[r,l]=Zt.useState(!m||!i),[c,u]=Zt.useState(m),[h,f]=Zt.useState(i),[p,y]=Zt.useState(!1),[b,A]=Zt.useState(!1),[S,_]=Zt.useState(localStorage.getItem("dark_mode")==="true"),x=()=>{const P=!S;_(P),localStorage.setItem("dark_mode",String(P))},[w,C]=Zt.useState({file:null,status:Ft.IDLE,progress:0,totalPages:0,currentPage:0,error:null,sections:[],currentSectionIndex:0,currentlyPlayingBlockId:null,selectedVoice:"female",playbackSpeed:1}),T=Zt.useRef(null),L=Zt.useRef([]),O=Zt.useRef(0),B=Zt.useRef([]),z=Zt.useRef([]),$=Zt.useRef(!1),K=Zt.useRef(1),J=Zt.useRef(null),Z=P=>{K.current=P,C(Q=>({...Q,playbackSpeed:P})),L.current.forEach(Q=>{Q.source.playbackRate.value=P})},ht=()=>{c.trim()&&h.trim()&&(localStorage.setItem("openrouter_api_key",c.trim()),localStorage.setItem("deepgram_api_key",h.trim()),t(c.trim()),s(h.trim()),l(!1),C(P=>({...P,error:null})))},wt=()=>{T.current||(T.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3})),T.current.state==="suspended"&&T.current.resume()},dt=async P=>{const Q=P.target.files?.[0];if(!Q)return;if(Q.type!=="application/pdf"){C(nt=>({...nt,error:"Please upload a valid PDF file."}));return}C(nt=>({...nt,file:Q,status:Ft.PARSING_PDF,progress:0,totalPages:0,currentPage:0,error:null,sections:[],currentSectionIndex:0,currentlyPlayingBlockId:null})),B.current=[],O.current=0,$.current=!1;const et=w.selectedVoice==="female"?"Kore":"Puck";try{const nt=await UA(Q,ct=>C(Ut=>({...Ut,progress:ct})));z.current=nt.map(ct=>ct.text),C(ct=>({...ct,totalPages:nt.length,status:Ft.EXTRACTING_SECTIONS})),wt();const Bt=(await HA(m,z.current)).map((ct,Ut)=>({id:`section-${Ut}`,title:ct.title,pageStart:ct.pageStart,pageEnd:ct.pageEnd,blocks:[],status:"pending"}));C(ct=>({...ct,sections:Bt,status:Ft.PROCESSING_SECTION,progress:0}));for(let ct=0;ct<Bt.length;ct++){const Ut=Bt[ct];C(Xt=>({...Xt,currentSectionIndex:ct,sections:Xt.sections.map((Ie,ti)=>ti===ct?{...Ie,status:"processing"}:Ie),progress:ct/Bt.length*100}));const bi=z.current.slice(Ut.pageStart-1,Ut.pageEnd),Mi=await jA(m,Ut.title,Ut.id,bi);C(Xt=>{const Ie=Xt.status===Ft.PAUSED||Xt.status===Ft.PLAYING?Xt.status:Ft.GENERATING_VOICE;return{...Xt,status:Ie}});const Ki=[];for(const Xt of Mi){const Ie=await qA(i,Xt.content,T.current,et),ti={...Xt,audioBuffer:Ie};Ki.push(ti),B.current.push(ti),Ie&&Dt(ti)}C(Xt=>{const Ie=Xt.status===Ft.PAUSED||Xt.status===Ft.PLAYING?Xt.status:Ft.PROCESSING_SECTION;return{...Xt,sections:Xt.sections.map((ti,jo)=>jo===ct?{...ti,blocks:Ki,status:"ready"}:ti),status:Ie}})}C(ct=>({...ct,status:Ft.COMPLETED,progress:100}))}catch(nt){console.error(nt),nt.message==="INVALID_KEY"?(C(at=>({...at,status:Ft.ERROR,error:"Your API key seems invalid. Please check your key and try again."})),l(!0)):C(at=>({...at,status:Ft.ERROR,error:nt.message||"An unexpected error occurred."}))}},Dt=P=>{if(!T.current||!P.audioBuffer)return;const Q=T.current,et=Q.createBufferSource();et.buffer=P.audioBuffer,et.playbackRate.value=K.current,et.connect(Q.destination);const nt=.5;J.current!==null&&J.current!==P.sectionId&&(O.current+=nt),J.current=P.sectionId,O.current===0&&(O.current=Q.currentTime+.1,C(Ut=>Ut.status===Ft.PAUSED?Ut:{...Ut,status:Ft.PLAYING}));const at=Math.max(O.current,Q.currentTime);et.start(at);const Bt=P.audioBuffer.duration/K.current,ct=(at-Q.currentTime)*1e3;setTimeout(()=>{C(Ut=>({...Ut,currentlyPlayingBlockId:P.id}))},Math.max(0,ct)),O.current=at+Bt,L.current.push({id:P.id,source:et}),et.onended=()=>{L.current=L.current.filter(Ut=>Ut.source!==et),C(Ut=>L.current.length===0&&Ut.status===Ft.COMPLETED?{...Ut,currentlyPlayingBlockId:null}:Ut)}},N=()=>{L.current.forEach(P=>{try{P.source.stop()}catch{}}),L.current=[],O.current=0},q=()=>{T.current&&(T.current.state==="running"?(T.current.suspend(),C(P=>({...P,status:Ft.PAUSED}))):(T.current.resume(),C(P=>({...P,status:Ft.PLAYING}))))},W=()=>{N(),C(P=>({...P,file:null,status:Ft.IDLE,progress:0,totalPages:0,currentPage:0,error:null,sections:[],currentSectionIndex:0,currentlyPlayingBlockId:null}))},ft=P=>{C(Q=>({...Q,selectedVoice:P}))},At=(P,Q)=>{const et=w.sections.find(nt=>nt.id===P);if(et&&et.blocks.length>0){const nt=et.blocks[0].id,at=document.getElementById(nt);at&&(at.scrollIntoView({behavior:"smooth",block:"start"}),C(Bt=>({...Bt,currentSectionIndex:Q})))}};if(r)return G.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-slate-50 text-slate-900",children:G.jsxs("div",{className:"w-full max-w-md glass p-8 rounded-3xl shadow-xl border border-white animate-in fade-in zoom-in duration-500",children:[G.jsxs("div",{className:"text-center mb-8",children:[G.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 border border-indigo-100 text-indigo-600 text-xs font-semibold mb-4",children:[G.jsx(uu,{size:14}),G.jsx("span",{children:"Setup Required"})]}),G.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Paper Reader AI"}),G.jsx("p",{className:"text-slate-500 text-sm",children:"Enter your API keys to get started"})]}),G.jsxs("div",{className:"space-y-4 text-left",children:[G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block",children:"OpenRouter API Key (for text analysis)"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{type:p?"text":"password",value:c,onChange:P=>u(P.target.value),placeholder:"Paste your OpenRouter API key here...",className:"w-full bg-slate-100 border border-slate-200 px-5 py-4 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all pr-12 font-mono"}),G.jsx("button",{onClick:()=>y(!p),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:p?G.jsx(cp,{size:18}):G.jsx(up,{size:18})})]})]}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block",children:"Deepgram API Key (for TTS audio)"}),G.jsxs("div",{className:"relative",children:[G.jsx("input",{type:b?"text":"password",value:h,onChange:P=>f(P.target.value),placeholder:"Paste your Deepgram API key here...",className:"w-full bg-slate-100 border border-slate-200 px-5 py-4 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all pr-12 font-mono"}),G.jsx("button",{onClick:()=>A(!b),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:b?G.jsx(cp,{size:18}):G.jsx(up,{size:18})})]})]}),G.jsxs("button",{onClick:ht,disabled:!c.trim()||!h.trim(),className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-bold text-lg shadow-lg shadow-indigo-100 hover:bg-indigo-700 hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:translate-y-0",children:[G.jsx(Db,{size:18}),G.jsx("span",{children:"Save & Continue"})]}),G.jsxs("div",{className:"flex gap-4 justify-center",children:[G.jsxs("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1.5 text-[11px] font-bold text-slate-400 hover:text-indigo-600 transition-colors uppercase tracking-widest",children:["Get OpenRouter Key ",G.jsx(lp,{size:10})]}),G.jsxs("a",{href:"https://console.deepgram.com/signup",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1.5 text-[11px] font-bold text-slate-400 hover:text-indigo-600 transition-colors uppercase tracking-widest",children:["Get Deepgram Key ",G.jsx(lp,{size:10})]})]})]})]})});const D=w.sections.flatMap(P=>P.blocks),H=w.sections.filter(P=>P.status==="ready"||P.status==="completed").length;return G.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center p-4 md:p-6 transition-colors duration-300 ${S?"bg-slate-950 text-slate-100 selection:bg-indigo-900 selection:text-indigo-100":"bg-slate-50 text-slate-900 selection:bg-indigo-100 selection:text-indigo-900"}`,children:[G.jsx("button",{onClick:x,className:`fixed top-4 right-4 z-50 p-3 rounded-xl transition-all hover:scale-110 ${S?"bg-slate-800 text-amber-400 hover:bg-slate-700 border border-slate-700":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-200 shadow-lg"}`,title:S?"Switch to Light Mode":"Switch to Dark Mode",children:S?G.jsx(Lb,{size:20}):G.jsx(wb,{size:20})}),G.jsxs("div",{className:"fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none -z-10",children:[G.jsx("div",{className:`absolute top-[-5%] left-[-5%] w-[35%] h-[35%] blur-[100px] rounded-full ${S?"bg-indigo-900/30":"bg-indigo-100/60"}`}),G.jsx("div",{className:`absolute bottom-[-5%] right-[-5%] w-[35%] h-[35%] blur-[100px] rounded-full ${S?"bg-purple-900/30":"bg-blue-100/60"}`})]}),w.status===Ft.IDLE&&G.jsxs("header",{className:"mb-8 text-center animate-in fade-in slide-in-from-top duration-700 w-full max-w-xl",children:[G.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[G.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${S?"bg-indigo-900/50 border border-indigo-700 text-indigo-300":"bg-indigo-50 border border-indigo-100 text-indigo-600"}`,children:[G.jsx(uu,{size:14}),G.jsx("span",{children:"AI Research Assistant"})]}),G.jsx("button",{onClick:()=>l(!0),className:`p-1.5 rounded-full transition-colors shadow-sm ${S?"bg-slate-800 border border-slate-700 text-slate-400 hover:text-indigo-400":"bg-white border border-slate-200 text-slate-400 hover:text-indigo-600"}`,title:"Change API Key",children:G.jsx(dp,{size:14})})]}),G.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[!S&&G.jsx("img",{src:"./images/logo.png",alt:"Paper Reader AI",className:"w-14 h-14 md:w-16 md:h-16 rounded-2xl"}),G.jsxs("h1",{className:`text-4xl md:text-6xl font-bold tracking-tight font-['Inter'] ${S?"text-slate-100":"text-slate-900"}`,children:["Paper Reader ",G.jsx("span",{className:S?"text-indigo-400":"text-indigo-600",children:"AI"})]})]}),G.jsx("p",{className:`max-w-lg mx-auto text-base md:text-lg leading-relaxed ${S?"text-slate-400":"text-slate-600"}`,children:"Upload your PDF and listen to research papers. Papers are intelligently split into sections for natural narration."})]}),G.jsxs("main",{className:"w-full max-w-4xl flex flex-col gap-6",children:[w.status===Ft.IDLE&&G.jsxs("div",{className:`p-8 md:p-12 rounded-[2rem] border-dashed border-2 flex flex-col items-center gap-8 transition-all shadow-sm relative overflow-hidden ${S?"bg-slate-900/80 backdrop-blur-xl border-slate-700 hover:border-indigo-500":"glass border-indigo-200 hover:border-indigo-400"}`,children:[G.jsxs("div",{className:"w-full flex flex-col items-center gap-4",children:[G.jsx("span",{className:`text-xs font-bold uppercase tracking-widest ${S?"text-slate-500":"text-slate-400"}`,children:"Select Narrator"}),G.jsxs("div",{className:`flex p-1 rounded-2xl border shadow-inner ${S?"bg-slate-800 border-slate-700":"bg-slate-100 border-slate-200"}`,children:[G.jsxs("button",{onClick:()=>ft("female"),className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-sm font-bold transition-all ${w.selectedVoice==="female"?S?"bg-indigo-600 text-white shadow-sm":"bg-white text-indigo-600 shadow-sm ring-1 ring-slate-200":S?"text-slate-400 hover:text-slate-200":"text-slate-500 hover:text-slate-700"}`,children:[G.jsx(fp,{size:16}),"Female"]}),G.jsxs("button",{onClick:()=>ft("male"),className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-sm font-bold transition-all ${w.selectedVoice==="male"?S?"bg-indigo-600 text-white shadow-sm":"bg-white text-indigo-600 shadow-sm ring-1 ring-slate-200":S?"text-slate-400 hover:text-slate-200":"text-slate-500 hover:text-slate-700"}`,children:[G.jsx(fp,{size:16}),"Male"]})]})]}),G.jsxs("div",{className:`w-full flex flex-col items-center gap-6 py-4 border-t group cursor-pointer active:scale-[0.99] transition-all ${S?"border-slate-700":"border-slate-100"}`,children:[G.jsx("div",{className:`w-20 h-20 rounded-[1.5rem] flex items-center justify-center group-hover:scale-110 transition-transform shadow-inner border ${S?"bg-indigo-900/50 text-indigo-400 border-indigo-800":"bg-indigo-50 text-indigo-500 border-indigo-100"}`,children:G.jsx(Bb,{size:36})}),G.jsxs("div",{className:"text-center",children:[G.jsx("h2",{className:`text-xl md:text-2xl font-bold mb-1 ${S?"text-slate-100":"text-slate-800"}`,children:"Ready to start?"}),G.jsx("p",{className:"text-sm text-slate-500",children:"Select a PDF to begin intelligent narration"})]}),G.jsxs("label",{className:"relative cursor-pointer",children:[G.jsx("span",{className:`px-10 py-3.5 rounded-2xl font-bold text-base hover:-translate-y-0.5 transition-all inline-block ${S?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 hover:bg-indigo-500":"bg-indigo-600 text-white shadow-lg shadow-indigo-200 hover:bg-indigo-700"}`,children:"Choose PDF File"}),G.jsx("input",{type:"file",className:"hidden",accept:"application/pdf",onChange:dt})]})]}),G.jsxs("div",{className:"mt-2 flex gap-4 text-slate-400 text-[10px] md:text-xs font-medium uppercase tracking-wider",children:[G.jsxs("span",{className:"flex items-center gap-1",children:[G.jsx(hb,{size:12})," Section-based reading"]}),G.jsxs("span",{className:"flex items-center gap-1",children:[G.jsx(uu,{size:12})," Smart analysis"]})]})]}),w.status!==Ft.IDLE&&G.jsxs("div",{className:`rounded-[2rem] overflow-hidden shadow-xl border flex flex-col h-[85vh] md:h-[75vh] animate-in fade-in zoom-in duration-500 ${S?"bg-slate-900 border-slate-700":"glass border-white"}`,children:[G.jsxs("div",{className:`px-6 md:px-10 py-5 md:py-6 border-b flex items-center justify-between sticky top-0 z-10 ${S?"bg-slate-900/90 border-slate-800":"bg-white/40 border-slate-100"}`,children:[G.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[G.jsx("button",{onClick:W,className:`p-2 rounded-full transition-colors ${S?"hover:bg-slate-800":"hover:bg-slate-100"}`,children:G.jsx(cb,{size:20,className:S?"text-slate-400":"text-slate-500"})}),G.jsxs("div",{className:"overflow-hidden",children:[G.jsx("h3",{className:`text-sm md:text-lg font-bold truncate ${S?"text-slate-100":"text-slate-900"}`,children:w.file?.name}),G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${w.status===Ft.PLAYING?"bg-indigo-500 animate-pulse":"bg-slate-300"}`}),G.jsxs("p",{className:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-slate-500",children:[w.status===Ft.COMPLETED?"Finished":w.status.replace(/_/g," "),"  ",w.selectedVoice," voice"]})]})]})]}),G.jsxs("div",{className:"flex items-center gap-3",children:[G.jsx("button",{onClick:()=>l(!0),className:`p-2 rounded-full transition-colors ${S?"text-slate-500 hover:bg-slate-800 hover:text-indigo-400":"hover:bg-slate-100 text-slate-400 hover:text-indigo-600"}`,title:"Settings",children:G.jsx(dp,{size:20})}),w.status!==Ft.COMPLETED&&w.status!==Ft.ERROR&&G.jsxs("div",{className:`px-3 py-1 rounded-full border flex items-center gap-2 text-[10px] md:text-xs font-bold shadow-sm ${S?"bg-slate-800 border-slate-700 text-indigo-400":"bg-white border-slate-200 text-indigo-600"}`,children:[G.jsx(hp,{size:12,className:"animate-spin"}),Math.round(w.progress),"%"]})]})]}),w.sections.length>0&&G.jsx("div",{className:`px-6 md:px-10 py-3 border-b flex gap-2 overflow-x-auto custom-scrollbar ${S?"bg-slate-900/50 border-slate-800":"bg-slate-50/80 border-slate-100"}`,children:w.sections.map((P,Q)=>G.jsxs("button",{onClick:()=>At(P.id,Q),disabled:P.blocks.length===0,className:`px-3 py-1.5 rounded-lg text-xs font-semibold whitespace-nowrap transition-all cursor-pointer hover:scale-105 disabled:cursor-not-allowed disabled:opacity-50 ${w.currentSectionIndex===Q?"bg-indigo-600 text-white ring-2 ring-indigo-300":P.status==="ready"||P.status==="completed"?S?"bg-indigo-900/40 text-indigo-300 hover:bg-indigo-900/60":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":P.status==="processing"?S?"bg-amber-900/30 text-amber-500":"bg-amber-100 text-amber-700":S?"bg-slate-800 text-slate-600":"bg-slate-100 text-slate-500"}`,children:[P.status==="processing"&&G.jsx(hp,{size:10,className:"inline mr-1 animate-spin"}),P.title]},P.id))}),G.jsx("div",{className:`flex-1 overflow-y-auto p-6 md:p-10 space-y-6 custom-scrollbar scroll-smooth ${S?"bg-slate-950/20":"bg-white/20"}`,children:D.length>0?D.map(P=>{const Q=w.currentlyPlayingBlockId===P.id,et=w.sections.find(nt=>nt.id===P.sectionId);return G.jsxs("div",{id:P.id,className:`relative p-5 md:p-6 rounded-2xl transition-all duration-700 ${Q?S?"bg-slate-800 ring-1 ring-slate-700 shadow-lg shadow-indigo-900/20 translate-x-1":"bg-white ring-1 ring-slate-200 shadow-lg shadow-indigo-100/20 translate-x-1":"opacity-40 grayscale-[0.3]"} ${P.type===Va.DESCRIPTION?S?"border-dashed border-2 border-indigo-900/50 bg-indigo-900/10":"border-dashed border-2 border-indigo-100 bg-indigo-50/30":""}`,children:[Q&&G.jsx("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-1 h-8 bg-indigo-600 rounded-full shadow-[0_0_10px_rgba(79,70,229,0.4)]"}),G.jsxs("div",{className:"flex items-center justify-between mb-3",children:[G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx("span",{className:`text-[9px] font-bold tracking-widest uppercase px-2 py-0.5 rounded ${P.type===Va.DESCRIPTION?"bg-indigo-600 text-white":S?"bg-slate-700 text-slate-400":"bg-slate-100 text-slate-500"}`,children:P.type===Va.DESCRIPTION?"Analysis":"Paper Text"}),et&&G.jsx("span",{className:`text-[9px] font-semibold px-2 py-0.5 rounded ${S?"text-indigo-300 bg-indigo-900/30":"text-indigo-600 bg-indigo-50"}`,children:et.title})]}),Q&&G.jsx(Fb,{size:14,className:"text-indigo-600 animate-bounce"})]}),G.jsx("p",{className:`text-base md:text-lg font-['Inter'] leading-relaxed ${Q?S?"text-slate-200 font-medium":"text-slate-900 font-medium":S?"text-slate-500":"text-slate-600"}`,children:P.content})]},P.id)}):G.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 gap-4 opacity-50",children:[G.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${S?"bg-slate-800":"bg-slate-100"}`,children:G.jsx(Ab,{size:32,className:"animate-pulse"})}),G.jsx("p",{className:"italic text-base font-medium",children:w.status===Ft.EXTRACTING_SECTIONS?"Detecting paper sections...":"Processing sections..."})]})}),G.jsxs("div",{className:`px-6 md:px-10 py-6 md:py-8 border-t flex flex-col md:flex-row items-center gap-6 shadow-[0_-10px_20px_rgba(0,0,0,0.02)] ${S?"bg-slate-900 border-slate-800":"bg-white border-slate-100"}`,children:[G.jsx("div",{className:"flex items-center gap-4 w-full md:w-auto justify-center",children:G.jsx("button",{onClick:q,disabled:D.length===0,className:`w-14 h-14 md:w-16 md:h-16 rounded-2xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all shadow-xl disabled:opacity-50 disabled:cursor-not-allowed group ${S?"bg-indigo-600 text-white hover:bg-indigo-500 shadow-indigo-900/50":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-indigo-100"}`,children:w.status===Ft.PLAYING?G.jsx(xb,{size:28,fill:"currentColor"}):G.jsx(Cb,{size:28,fill:"currentColor",className:"ml-1"})})}),G.jsxs("div",{className:"flex-1 w-full max-w-md",children:[G.jsxs("div",{className:"flex justify-between items-end mb-2 px-1",children:[G.jsx("div",{className:"flex flex-col",children:G.jsx("span",{className:`text-[10px] md:text-xs font-bold uppercase tracking-wider ${S?"text-slate-400":"text-slate-800"}`,children:"Sections Progress"})}),G.jsxs("div",{className:`font-bold text-xs ${S?"text-indigo-400":"text-indigo-600"}`,children:[H,"/",w.sections.length," Sections"]})]}),G.jsx("div",{className:`h-1.5 w-full rounded-full overflow-hidden p-0 border ${S?"bg-slate-800 border-slate-700":"bg-slate-100 border-slate-200"}`,children:G.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-1000 ease-out shadow-[0_0_8px_rgba(79,70,229,0.2)]",style:{width:`${w.sections.length>0?H/w.sections.length*100:0}%`}})})]}),G.jsxs("div",{className:"flex items-center gap-2",children:[G.jsx(bb,{size:16,className:S?"text-slate-600":"text-slate-400"}),G.jsx("div",{className:`flex rounded-lg p-0.5 border ${S?"bg-slate-800 border-slate-700":"bg-slate-100 border-slate-200"}`,children:XA.map(P=>G.jsx("button",{onClick:()=>Z(P.value),className:`px-2 py-1 text-[10px] md:text-xs font-bold rounded-md transition-all ${w.playbackSpeed===P.value?"bg-indigo-600 text-white shadow-sm":S?"text-slate-400 hover:text-slate-200":"text-slate-500 hover:text-slate-700"}`,children:P.label},P.value))})]})]})]}),w.error&&G.jsxs("div",{className:"bg-red-50 border border-red-100 p-5 rounded-3xl flex items-center gap-4 text-red-600 shadow-sm animate-in fade-in slide-in-from-bottom duration-300",children:[G.jsx("div",{className:"p-2 bg-red-100 rounded-xl",children:G.jsx(fb,{size:24})}),G.jsxs("div",{children:[G.jsx("p",{className:"font-bold text-sm",children:"Action Required"}),G.jsx("p",{className:"text-xs font-medium opacity-80",children:w.error})]}),G.jsx("button",{onClick:()=>C(P=>({...P,error:null})),className:"ml-auto text-xs font-bold bg-white px-3 py-1 rounded-lg border border-red-100",children:"Dismiss"})]})]}),G.jsxs("footer",{className:`mt-auto py-10 text-xs flex flex-col items-center gap-2 w-full text-center ${S?"text-slate-600":"text-slate-400"}`,children:[G.jsxs("p",{className:"opacity-80",children:["Vibe coded by ",G.jsx("a",{href:"https://bhavinjawade.github.io",target:"_blank",rel:"noopener noreferrer",className:`font-semibold hover:underline ${S?"text-indigo-400":"text-indigo-600"}`,children:"Bhavin Jawade"})," with ",G.jsx("span",{className:S?"text-indigo-400":"text-indigo-600",children:"Antigravity"})," + ",G.jsx("span",{className:S?"text-indigo-400":"text-indigo-600",children:"Claude Opus 4.5"})]}),G.jsxs("p",{className:"opacity-60 text-[10px]",children:["LLM APIs from ",G.jsx("span",{className:S?"text-indigo-400":"text-indigo-600",children:"OpenRouter"}),"  Speech Generation using ",G.jsx("span",{className:S?"text-indigo-400":"text-indigo-600",children:"Deepgram"})]}),G.jsx("p",{className:"opacity-50 font-bold uppercase tracking-widest text-[9px] mt-1",children:"Your key is never sent to our servers."})]}),G.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 5px;
          height: 5px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #e2e8f0;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #cbd5e1;
        }
      `})]})},_m=document.getElementById("root");if(!_m)throw new Error("Could not find root element to mount to");const $A=ib.createRoot(_m);$A.render(G.jsx($y.StrictMode,{children:G.jsx(YA,{})}));
